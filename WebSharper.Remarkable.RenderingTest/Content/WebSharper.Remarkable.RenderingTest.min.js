function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Remarkable=b.Remarkable||{};d=c.RenderingTest=c.RenderingTest||{};e=d.Client=d.Client||{};f=b.UI=b.UI||{};g=f.Var=f.Var||{};h=b.Operators=b.Operators||{};i=b.Obj=b.Obj||{};j=f.HtmlModule=f.HtmlModule||{};k=j.attr=j.attr||{};l=f.Doc=f.Doc||{};m=f.ConcreteVar=f.ConcreteVar||{};n=f.Snap=f.Snap||{};o=b.JavaScript=b.JavaScript||{};p=o.Pervasives=o.Pervasives||{};q=f.AttrProxy=f.AttrProxy||{};r=b.Unchecked=b.Unchecked||{};s=a.EventTarget;t=b.Arrays=b.Arrays||{};u=f.Docs=f.Docs||{};v=f.Array=f.Array||{};w=f.View=f.View||{};x=f.Client=f.Client||{};y=x.Templates=x.Templates||{};z=f.Abbrev=f.Abbrev||{};A=z.Fresh=z.Fresh||{};B=f.DomUtility=f.DomUtility||{};C=b.Seq=b.Seq||{};D=f.AttrModule=f.AttrModule||{};E=f.Attrs=f.Attrs||{};F=o.JSModule=o.JSModule||{};G=f.DocElemNode=f.DocElemNode||{};H=a.Node;I=b.Collections=b.Collections||{};J=I.Dictionary=I.Dictionary||{};K=f.Elt=f.Elt||{};L=b.Enumerator=b.Enumerator||{};M=L.T=L.T||{};N=a.CharacterData;O=x.Attrs=x.Attrs||{};P=O.Dyn=O.Dyn||{};Q=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};R=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};S=I.HashSet=I.HashSet||{};T=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};U=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};V=b.List=b.List||{};W=V.T=V.T||{};X=a.Object;Y=f.Updates=f.Updates||{};Z=I.DictionaryUtil=I.DictionaryUtil||{};_0=y.Prepare=y.Prepare||{};_1=b.Slice=b.Slice||{};_2=I.KeyCollection=I.KeyCollection||{};_3=f.An=f.An||{};_4=x.Settings=x.Settings||{};_5=z.Mailbox=z.Mailbox||{};_6=b.Strings=b.Strings||{};_7=x.Docs=x.Docs||{};_8=_7.RunState=_7.RunState||{};_9=_7.NodeSet=_7.NodeSet||{};_=f.Anims=f.Anims||{};$=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};ba=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bb=b.Concurrency=b.Concurrency||{};bc=f.AppendList=f.AppendList||{};bd=I.HashSetUtil=I.HashSetUtil||{};be=f.DynamicAttrNode=f.DynamicAttrNode||{};bf=f.Easing=f.Easing||{};bg=bb.AsyncBody=bb.AsyncBody||{};bh=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bi=bb.CT=bb.CT||{};bj=z.HashSet=z.HashSet||{};bk=b.Queue=b.Queue||{};bl=bb.Scheduler=bb.Scheduler||{};bm=b.CancellationTokenSource=b.CancellationTokenSource||{};bn=_7.DomNodes=_7.DomNodes||{};bo=b.OperationCanceledException=b.OperationCanceledException||{};bp=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bq=b.Lazy=b.Lazy||{};br=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bs=br.LazyRecord=br.LazyRecord||{};bt=a.IntelliFactory;bu=bt&&bt.Runtime;bv=a.jQuery;bw=a.console;bx=a.Date;e.Main=function(){var by,bz,bA;function bB(bC){return by.render(bC);}by=new a.Remarkable({html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:true,linkTarget:"",typographer:false,quotes:"'\ufffd\ufffd\ufffd\ufffd'"});bz=g.Create$1("");bA=l.Element("div",[],[l.Element("h1",[],[l.TextNode("WebSharper.Remarkable extension sample page")]),l.Element("p",[],[l.TextNode("Type markdown text here:")]),l.InputArea([q.Create("class","input"),q.Create("rows","20")],bz),l.Element("hr",[],[]),l.Element("h4",[],[l.TextNode("Result")]),l.Element("div",[q.Create("class","output")],[l.BindView(function(bC){return l.Verbatim(bB(bC));},bz.get_View())])]);y.LoadLocalTemplates("");l.RunById("main",bA);};g.Create$1=function(by){return new m.New(false,n.New({$:2,$0:by,$1:[]}),by);};h.FailWith=function(by){throw a.Error(by);};h.KeyValue=function(by){return[by.K,by.V];};i=b.Obj=bu.Class({Equals:function(by){return this===by;},GetHashCode:function(){return -1;}},null,i);k=j.attr=bu.Class({},i,k);g=f.Var=bu.Class({},i,g);g.New=bu.Ctor(function(){},g);l=f.Doc=bu.Class({},i,l);l.Verbatim=function(by){var bz;return l.Mk(v.MapTreeReduce(function(bA){return r.Equals(bA.nodeType,H.TEXT_NODE)?{$:5,$0:bA}:{$:1,$0:u.CreateElemNode(bA,E.EmptyAttr(),null)};},null,function(bA,bB){return{$:0,$0:bA,$1:bB};},(bz=bv.parseHTML(by),r.Equals(bz,null)?[]:bz)),w.Const());};l.Element=function(by,bz,bA){var bB,bC;bB=q.Concat(bz);bC=l.Concat(bA);return K.New(B.CreateElement(by),bB,bC);};l.TextNode=function(by){return l.Mk({$:5,$0:B.CreateText(by)},w.Const());};l.InputArea=function(by,bz){return l.InputInternal("textarea",function(){return C.append(by,[D.Value(bz)]);});};l.Mk=function(by,bz){return new l.New(by,bz);};l.RunById=function(by,bz){var bA;bA=B.Doc().getElementById(by);r.Equals(bA,null)?h.FailWith("invalid id: "+by):l.Run(bA,bz);};l.Concat=function(by){var bz;bz=v.ofSeqNonCopying(by);return v.TreeReduce(l.get_Empty(),l.Append,bz);};l.InputInternal=function(by,bz){var bA;bA=B.CreateElement(by);return K.New(bA,q.Concat(bz(bA)),l.get_Empty());};l.BindView=function(by,bz){return l.EmbedView(w.Map(by,bz));};l.Run=function(by,bz){u.LinkElement(by,bz.docNode);l.RunInPlace(false,by,bz);};l.get_Empty=function(){return l.Mk(null,w.Const());};l.Append=function(by,bz){return l.Mk({$:0,$0:by.docNode,$1:bz.docNode},w.Map2Unit(by.updates,bz.updates));};l.EmbedView=function(by){var bz;bz=u.CreateEmbedNode();return l.Mk({$:2,$0:bz},w.Map(a.ignore,w.Bind(function(bA){u.UpdateEmbedNode(bz,bA.docNode);return bA.updates;},by)));};l.RunInPlace=function(by,bz,bA){var bB;bB=u.CreateRunState(bz,bA.docNode);w.Sink(_3.get_UseAnimations()||_4.BatchUpdatesEnabled()?_5.StartProcessor(u.PerformAnimatedUpdate(by,bB,bA.docNode)):function(){u.PerformSyncUpdate(by,bB,bA.docNode);},bA.updates);};l.New=bu.Ctor(function(by,bz){this.docNode=by;this.updates=bz;},l);m=f.ConcreteVar=bu.Class({get_View:function(){return this.view;},UpdateMaybe:function(by){var bz;bz=by(this.Get());bz!=null&&bz.$==1?this.Set(bz.$0):void 0;},Get:function(){return this.current;},Set:function(by){if(this.isConst)(function(bz){return bz("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bz){bw.log(bz);}));else{n.Obsolete(this.snap);this.current=by;this.snap=n.New({$:2,$0:by,$1:[]});}}},g,m);m.New=bu.Ctor(function(by,bz,bA){var bB;bB=this;g.New.call(this);this.isConst=by;this.current=bA;this.snap=bz;this.view=function(){return bB.snap;};this.id=A.Int();},m);n.Map=function(by,bz){var bA,bB;bA=bz.s;return bA!=null&&bA.$==0?n.New({$:0,$0:by(bA.$0)}):(bB=n.New({$:3,$0:[],$1:[]}),(n.When(bz,function(bC){n.MarkDone(bB,bz,by(bC));},bB),bB));};n.Map2Unit=function(by,bz){var bA,bB,bC;function bD(){var bE,bF,bG;if(!(bE=bC.s,bE!=null&&bE.$==0||bE!=null&&bE.$==2)){bF=n.ValueAndForever(by);bG=n.ValueAndForever(bz);bF!=null&&bF.$==1?bG!=null&&bG.$==1?bF.$0[1]&&bG.$0[1]?n.MarkForever(bC,null):n.MarkReady(bC,null):void 0:void 0;}}bA=by.s;bB=bz.s;return bA!=null&&bA.$==0?bB!=null&&bB.$==0?n.New({$:0,$0:null}):bz:bB!=null&&bB.$==0?by:(bC=n.New({$:3,$0:[],$1:[]}),(n.When(by,bD,bC),n.When(bz,bD,bC),bC));};n.Copy=function(by){var bz,bA,bB;bz=by.s;return bz==null?by:bz!=null&&bz.$==2?(bA=n.New({$:2,$0:bz.$0,$1:[]}),(n.WhenObsolete(by,bA),bA)):bz!=null&&bz.$==3?(bB=n.New({$:3,$0:[],$1:[]}),(n.When(by,function(bC){n.MarkDone(bB,by,bC);},bB),bB)):by;};n.WhenObsoleteRun=function(by,bz){var bA;bA=by.s;bA==null?bz():bA!=null&&bA.$==2?bA.$1.push(bz):bA!=null&&bA.$==3?bA.$1.push(bz):void 0;};n.When=function(by,bz,bA){var bB;bB=by.s;bB==null?n.Obsolete(bA):bB!=null&&bB.$==2?(n.EnqueueSafe(bB.$1,bA),bz(bB.$0)):bB!=null&&bB.$==3?(bB.$0.push(bz),n.EnqueueSafe(bB.$1,bA)):bz(bB.$0);};n.MarkDone=function(by,bz,bA){var bB;if(bB=bz.s,bB!=null&&bB.$==0)n.MarkForever(by,bA);else n.MarkReady(by,bA);};n.WhenRun=function(by,bz,bA){var bB;bB=by.s;bB==null?bA():bB!=null&&bB.$==2?(bB.$1.push(bA),bz(bB.$0)):bB!=null&&bB.$==3?(bB.$0.push(bz),bB.$1.push(bA)):bz(bB.$0);};n.ValueAndForever=function(by){var bz;bz=by.s;return bz!=null&&bz.$==0?{$:1,$0:[bz.$0,true]}:bz!=null&&bz.$==2?{$:1,$0:[bz.$0,false]}:null;};n.MarkForever=function(by,bz){var bA,bB,bC,bD;bA=by.s;if(bA!=null&&bA.$==3){by.s={$:0,$0:bz};bB=bA.$0;for(bC=0,bD=t.length(bB)-1;bC<=bD;bC++)(t.get(bB,bC))(bz);}else void 0;};n.MarkReady=function(by,bz){var bA,bB,bC,bD;bA=by.s;if(bA!=null&&bA.$==3){by.s={$:2,$0:bz,$1:bA.$1};bB=bA.$0;for(bC=0,bD=t.length(bB)-1;bC<=bD;bC++)(t.get(bB,bC))(bz);}else void 0;};n.WhenObsolete=function(by,bz){var bA;bA=by.s;bA==null?n.Obsolete(bz):bA!=null&&bA.$==2?n.EnqueueSafe(bA.$1,bz):bA!=null&&bA.$==3?n.EnqueueSafe(bA.$1,bz):void 0;};n.Join=function(by){var bz;bz=n.New({$:3,$0:[],$1:[]});n.When(by,function(bA){var bB;bB=bA();n.When(bB,function(bC){var bD,bE;if((bD=bB.s,bD!=null&&bD.$==0)&&(bE=by.s,bE!=null&&bE.$==0))n.MarkForever(bz,bC);else n.MarkReady(bz,bC);},bz);},bz);return bz;};n.EnqueueSafe=function(by,bz){var bA,bB,bC,bD;by.push(bz);if(by.length%20===0){bA=by.slice(0);bk.Clear(by);for(bB=0,bC=t.length(bA)-1;bB<=bC;bB++){bD=t.get(bA,bB);typeof bD=="object"?function(bE){if(bE.s)by.push(bE);}(bD):function(bE){by.push(bE);}(bD);}}else void 0;};p.NewFromSeq=function(by){var bz,bA,bB;bz={};bA=L.Get(by);try{while(bA.MoveNext()){bB=bA.Current();bz[bB[0]]=bB[1];}}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}return bz;};q=f.AttrProxy=bu.Class({},null,q);q.Create=function(by,bz){return E.Static(function(bA){B.SetAttr(bA,by,bz);});};q.Concat=function(by){var bz;bz=v.ofSeqNonCopying(by);return v.TreeReduce(E.EmptyAttr(),q.Append,bz);};q.Append=function(by,bz){return E.AppendTree(by,bz);};r.Equals=function(by,bz){var bA,bB,bC,bD;if(by===bz)return true;else{bA=typeof by;if(bA=="object"){if(by===null||by===void 0||bz===null||bz===void 0)return false;else if("Equals"in by)return by.Equals(bz);else if(by instanceof a.Array&&bz instanceof a.Array)return r.arrayEquals(by,bz);else if(by instanceof a.Date&&bz instanceof a.Date)return r.dateEquals(by,bz);else{bB=[true];for(var bE in by)if(function(bF){bB[0]=!by.hasOwnProperty(bF)||bz.hasOwnProperty(bF)&&r.Equals(by[bF],bz[bF]);return!bB[0];}(bE))break;if(bB[0]){for(var bF in bz)if(function(bG){bB[0]=!bz.hasOwnProperty(bG)||by.hasOwnProperty(bG);return!bB[0];}(bF))break;}return bB[0];}}else return bA=="function"&&("$Func"in by?by.$Func===bz.$Func&&by.$Target===bz.$Target:"$Invokes"in by&&"$Invokes"in bz&&r.arrayEquals(by.$Invokes,bz.$Invokes));}};r.arrayEquals=function(by,bz){var bA,bB;if(t.length(by)===t.length(bz)){bA=true;bB=0;while(bA&&bB<t.length(by)){!r.Equals(t.get(by,bB),t.get(bz,bB))?bA=false:void 0;bB=bB+1;}return bA;}else return false;};r.dateEquals=function(by,bz){return by.getTime()===bz.getTime();};r.Hash=function(by){var bz;bz=typeof by;return bz=="function"?0:bz=="boolean"?by?1:0:bz=="number"?by:bz=="string"?r.hashString(by):bz=="object"?by==null?0:by instanceof a.Array?r.hashArray(by):r.hashObject(by):0;};r.hashString=function(by){var bz,bA,bB;if(by===null)return 0;else{bz=5381;for(bA=0,bB=by.length-1;bA<=bB;bA++)bz=r.hashMix(bz,by[bA].charCodeAt());return bz;}};r.hashArray=function(by){var bz,bA,bB;bz=-34948909;for(bA=0,bB=t.length(by)-1;bA<=bB;bA++)bz=r.hashMix(bz,r.Hash(t.get(by,bA)));return bz;};r.hashObject=function(by){var bz,bA;if("GetHashCode"in by)return by.GetHashCode();else{bz=[0];for(var bB in by)if(function(bC){bz[0]=r.hashMix(r.hashMix(bz[0],r.hashString(bC)),r.Hash(by[bC]));return false;}(bB))break;return bz[0];}};r.hashMix=function(by,bz){return(by<<5)+by+bz;};r.Compare=function(by,bz){var bA,bB,bC,bD,bE,bF;if(by===bz)return 0;else{bB=typeof by;switch(bB=="function"?1:bB=="boolean"?2:bB=="number"?2:bB=="string"?2:bB=="object"?3:0){case 0:return typeof bz=="undefined"?0:-1;break;case 1:return h.FailWith("Cannot compare function values.");break;case 2:return by<bz?-1:1;break;case 3:if(by===null)bC=-1;else if(bz===null)bC=1;else if("CompareTo"in by)bC=by.CompareTo(bz);else if("CompareTo0"in by)bC=by.CompareTo0(bz);else if(by instanceof a.Array&&bz instanceof a.Array)bC=r.compareArrays(by,bz);else if(by instanceof a.Date&&bz instanceof a.Date)bC=r.compareDates(by,bz);else{bD=[0];for(var bG in by)if(function(bH){return!by.hasOwnProperty(bH)?false:!bz.hasOwnProperty(bH)?(bD[0]=1,true):(bD[0]=r.Compare(by[bH],bz[bH]),bD[0]!==0);}(bG))break;if(bD[0]===0){for(var bH in bz)if(function(bI){return!bz.hasOwnProperty(bI)?false:!by.hasOwnProperty(bI)&&(bD[0]=-1,true);}(bH))break;}bC=bD[0];}return bC;break;}}};r.compareArrays=function(by,bz){var bA,bB;if(t.length(by)<t.length(bz))return -1;else if(t.length(by)>t.length(bz))return 1;else{bA=0;bB=0;while(bA===0&&bB<t.length(by)){bA=r.Compare(t.get(by,bB),t.get(bz,bB));bB=bB+1;}return bA;}};r.compareDates=function(by,bz){return r.Compare(by.getTime(),bz.getTime());};t.get=function(by,bz){t.checkBounds(by,bz);return by[bz];};t.length=function(by){return by.dims===2?by.length*by.length:by.length;};t.checkBounds=function(by,bz){if(bz<0||bz>=by.length)h.FailWith("Index was outside the bounds of the array.");};t.set=function(by,bz,bA){t.checkBounds(by,bz);by[bz]=bA;};u.CreateElemNode=function(by,bz,bA){var bB;u.LinkElement(by,bA);bB=E.Insert(by,bz);return G.New(bB,bA,null,by,A.Int(),bu.GetOptional(bB.OnAfterRender));};u.LinkElement=function(by,bz){u.InsertDoc(by,bz,null);};u.InsertDoc=function(by,bz,bA){var bB;return bz!=null&&bz.$==1?u.InsertNode(by,bz.$0.El,bA):bz!=null&&bz.$==2?(bB=bz.$0,(bB.Dirty=false,u.InsertDoc(by,bB.Current,bA))):bz==null?bA:bz!=null&&bz.$==4?u.InsertNode(by,bz.$0.Text,bA):bz!=null&&bz.$==5?u.InsertNode(by,bz.$0,bA):bz!=null&&bz.$==6?t.foldBack(function(bC,bD){return bC==null||bC.constructor===X?u.InsertDoc(by,bC,bD):u.InsertNode(by,bC,bD);},bz.$0.Els,bA):u.InsertDoc(by,bz.$0,u.InsertDoc(by,bz.$1,bA));};u.CreateEmbedNode=function(){return{Current:null,Dirty:false};};u.UpdateEmbedNode=function(by,bz){by.Current=bz;by.Dirty=true;};u.InsertNode=function(by,bz,bA){B.InsertAt(by,bA,bz);return bz;};u.CreateRunState=function(by,bz){return _8.New(_9.get_Empty(),u.CreateElemNode(by,E.EmptyAttr(),bz));};u.PerformAnimatedUpdate=function(by,bz,bA){var bB;return _3.get_UseAnimations()?(bB=null,bb.Delay(function(){var bC,bD,bE;bC=_9.FindAll(bA);bD=u.ComputeChangeAnim(bz,bC);bE=u.ComputeEnterAnim(bz,bC);return bb.Bind(_3.Play(_3.Append(bD,u.ComputeExitAnim(bz,bC))),function(){return bb.Bind(u.SyncElemNodesNextFrame(by,bz),function(){return bb.Bind(_3.Play(bE),function(){bz.PreviousNodes=bC;return bb.Return(null);});});});})):u.SyncElemNodesNextFrame(by,bz);};u.PerformSyncUpdate=function(by,bz,bA){var bB;bB=_9.FindAll(bA);u.SyncElemNode(by,bz.Top);bz.PreviousNodes=bB;};u.ComputeChangeAnim=function(by,bz){var bA;function bB(bC){return E.HasChangeAnim(bC.Attr);}bA=function(bC){return _9.Filter(bB,bC);};return _3.Concat(t.map(function(bC){return E.GetChangeAnim(bC.Attr);},_9.ToArray(_9.Intersect(bA(by.PreviousNodes),bA(bz)))));};u.ComputeEnterAnim=function(by,bz){return _3.Concat(t.map(function(bA){return E.GetEnterAnim(bA.Attr);},_9.ToArray(_9.Except(by.PreviousNodes,_9.Filter(function(bA){return E.HasEnterAnim(bA.Attr);},bz)))));};u.ComputeExitAnim=function(by,bz){return _3.Concat(t.map(function(bA){return E.GetExitAnim(bA.Attr);},_9.ToArray(_9.Except(bz,_9.Filter(function(bA){return E.HasExitAnim(bA.Attr);},by.PreviousNodes)))));};u.SyncElemNodesNextFrame=function(by,bz){function bA(bB){a.requestAnimationFrame(function(){u.SyncElemNode(by,bz.Top);bB();});}return _4.BatchUpdatesEnabled()?bb.FromContinuations(function(bB,bC,bD){return bA.apply(null,[bB,bC,bD]);}):(u.SyncElemNode(by,bz.Top),bb.Return(null));};u.SyncElemNode=function(by,bz){!by?u.SyncElement(bz):void 0;u.Sync(bz.Children);u.AfterRender(bz);};u.SyncElement=function(by){function bz(bA){function bB(bC){var bD,bE;return bC!=null&&bC.$==0?bB(bC.$0)||bB(bC.$1):bC!=null&&bC.$==2?(bD=bC.$0,bD.Dirty||bB(bD.Current)):bC!=null&&bC.$==6&&(bE=bC.$0,bE.Dirty||t.exists(bz,bE.Holes));}return bB(bA.Children);}E.Sync(by.El,by.Attr);bz(by)?u.DoSyncElement(by):void 0;};u.Sync=function(by){var bz,bA;if(by!=null&&by.$==1)u.SyncElemNode(false,by.$0);else if(by!=null&&by.$==2)u.Sync(by.$0.Current);else if(by==null);else if(by!=null&&by.$==5);else if(by!=null&&by.$==4){bz=by.$0;bz.Dirty?(bz.Text.nodeValue=bz.Value,bz.Dirty=false):void 0;}else if(by!=null&&by.$==6){bA=by.$0;t.iter(function(bB){u.SyncElemNode(false,bB);},bA.Holes);t.iter(function(bB){E.Sync(bB[0],bB[1]);},bA.Attrs);u.AfterRender(bA);}else{u.Sync(by.$0);u.Sync(by.$1);}};u.AfterRender=function(by){var bz;bz=bu.GetOptional(by.Render);bz!=null&&bz.$==1?(bz.$0(by.El),bu.SetOptional(by,"Render",null)):void 0;};u.DoSyncElement=function(by){var bz,bA,bB;function bC(bD,bE){var bF,bG;return bD!=null&&bD.$==1?bD.$0.El:bD!=null&&bD.$==2?(bF=bD.$0,bF.Dirty?(bF.Dirty=false,u.InsertDoc(bz,bF.Current,bE)):bC(bF.Current,bE)):bD==null?bE:bD!=null&&bD.$==4?bD.$0.Text:bD!=null&&bD.$==5?bD.$0:bD!=null&&bD.$==6?(bG=bD.$0,(bG.Dirty?bG.Dirty=false:void 0,t.foldBack(function(bH,bI){return bH==null||bH.constructor===X?bC(bH,bI):bH;},bG.Els,bE))):bC(bD.$0,bC(bD.$1,bE));}bz=by.El;bn.Iter((bA=by.El,function(bD){B.RemoveNode(bA,bD);}),bn.Except(bn.DocChildren(by),bn.Children(by.El,bu.GetOptional(by.Delimiters))));bC(by.Children,(bB=bu.GetOptional(by.Delimiters),bB!=null&&bB.$==1?bB.$0[1]:null));};v.MapTreeReduce=function(by,bz,bA,bB){var bC;function bD(bE,bF){var bG,bH;return bF<=0?bz:bF===1&&(bE>=0&&bE<bC)?by(t.get(bB,bE)):(bH=bF/2>>0,bA(bD(bE,bH),bD(bE+bH,bF-bH)));}bC=t.length(bB);return bD(0,bC);};v.ofSeqNonCopying=function(by){var bz,bA;if(by instanceof a.Array)return by;else if(by instanceof W)return t.ofList(by);else if(by===null)return[];else{bz=[];bA=L.Get(by);try{while(bA.MoveNext())bz.push(bA.Current());return bz;}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}}};v.TreeReduce=function(by,bz,bA){var bB;function bC(bD,bE){var bF,bG;return bE<=0?by:bE===1&&(bD>=0&&bD<bB)?t.get(bA,bD):(bG=bE/2>>0,bz(bC(bD,bG),bC(bD+bG,bE-bG)));}bB=t.length(bA);return bC(0,bB);};w.Const=function(by){var bz;bz=n.New({$:0,$0:by});return function(){return bz;};};w.Map=function(by,bz){return w.CreateLazy(function(){return n.Map(by,bz());});};w.Map2Unit=function(by,bz){return w.CreateLazy(function(){return n.Map2Unit(by(),bz());});};w.Bind=function(by,bz){return w.Join(w.Map(by,bz));};w.CreateLazy=function(by){var bz;bz={c:null,o:by};return function(){var bA,bB;bA=bz.c;return bA===null?(bA=bz.o(),bz.c=bA,(bB=bA.s,bB!=null&&bB.$==0)?bz.o=null:n.WhenObsoleteRun(bA,function(){bz.c=null;}),bA):bA;};};w.Sink=function(by,bz){function bA(){n.WhenRun(bz(),by,function(){bb.scheduler().Fork(bA);});}bb.scheduler().Fork(bA);};w.Join=function(by){return w.CreateLazy(function(){return n.Join(by());});};y.LoadLocalTemplates=function(by){!y.LocalTemplatesLoaded()?(y.set_LocalTemplatesLoaded(true),y.LoadNestedTemplates(a.document.body,"")):void 0;y.LoadedTemplates().set_Item(by,y.LoadedTemplateFile(""));};y.LocalTemplatesLoaded=function(){R.$cctor();return R.LocalTemplatesLoaded;};y.set_LocalTemplatesLoaded=function(by){R.$cctor();R.LocalTemplatesLoaded=by;};y.LoadNestedTemplates=function(by,bz){var bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO;function bA(bP){var bQ,bR;if(!bB.ContainsKey(bP)){bQ=(bR=null,[bC.TryGetValue(bP,{get:function(){return bR;},set:function(bS){bR=bS;}}),bR]);bQ[0]?(bO.Add(bP),bC.Remove(bP),y.PrepareTemplateStrict(bz,{$:1,$0:bP},bQ[1][0],{$:1,$0:bQ[1][1]},{$:1,$0:bA})):bw.warn(bO.Contains(bP)?"Encountered loop when instantiating "+bP:"Local template does not exist: "+bP);}}bB=y.LoadedTemplateFile(bz);bC=new J.New$5();bD=by.querySelectorAll("[ws-template]");for(bE=0,bF=bD.length-1;bE<=bF;bE++){bG=bD[bE];bH=bG.getAttribute("ws-template").toLowerCase();bG.removeAttribute("ws-template");bC.set_Item(bH,[[bG],y.FakeRootSingle(bG)]);}bI=by.querySelectorAll("[ws-children-template]");for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++){bL=bI[bJ];bM=bL.getAttribute("ws-children-template").toLowerCase();bL.removeAttribute("ws-children-template");bC.set_Item(bM,(bN=B.ChildrenArray(bL),[bN,y.FakeRoot(bN)]));}bO=new S.New$3();while(bC.count>0)bA(C.head(bC.get_Keys()));};y.LoadedTemplates=function(){R.$cctor();return R.LoadedTemplates;};y.LoadedTemplateFile=function(by){var bz,bA,bB;bz=(bA=null,[y.LoadedTemplates().TryGetValue(by,{get:function(){return bA;},set:function(bC){bA=bC;}}),bA]);return bz[0]?bz[1]:(bB=new J.New$5(),(y.LoadedTemplates().set_Item(by,bB),bB));};y.FakeRootSingle=function(by){var bz,bA,bB;by.removeAttribute("ws-template");bz=by.getAttribute("ws-replace");bz===null?void 0:(by.removeAttribute("ws-replace"),bA=by.parentNode,r.Equals(bA,null)?void 0:(bB=a.document.createElement(by.tagName),bB.setAttribute("ws-replace",bz),bA.replaceChild(bB,by)));return y.FakeRoot([by]);};y.FakeRoot=function(by){var bz,bA,bB;bz=a.document.createElement("div");for(bA=0,bB=by.length-1;bA<=bB;bA++)bz.appendChild(t.get(by,bA));return bz;};y.PrepareTemplateStrict=function(by,bz,bA,bB,bC){var bD,bE;function bF(bK,bL){var bM,bN,bO,bP,bQ,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca;function bR(cb){}while(true)switch(bK){case 0:if(bL!==null){bM=bL.nextSibling;if(r.Equals(bL.nodeType,H.TEXT_NODE))_0.convertTextNode(bL);else if(r.Equals(bL.nodeType,H.ELEMENT_NODE))bH(bL);bL=bM;}else return null;break;case 1:bS=_1.string(bL.nodeName,{$:1,$0:3},null).toLowerCase();bT=(bN=bS.indexOf("."),bN===-1?[by,bS]:[_1.string(bS,null,{$:1,$0:bN-1}),_1.string(bS,{$:1,$0:bN+1},null)]);bU=bT[1];bV=bT[0];if(bV!==""&&!y.LoadedTemplates().ContainsKey(bV))return _0.failNotLoaded(bU);else{if(bV===""&&bC!=null)bC.$0(bU);bW=y.LoadedTemplates().get_Item(bV);if(!bW.ContainsKey(bU))return _0.failNotLoaded(bU);else{bX=bW.get_Item(bU);bY=bX.cloneNode(true);bZ=new S.New$3();b0=new J.New$5();b1=bL.attributes;for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=b1.item(b2).name.toLowerCase();b0.set_Item(b4,(b5=b1.item(b2).nodeValue,b5===""?b4:b5.toLowerCase()));!bZ.Add(b4)?bw.warn("Hole mapped twice",b4):void 0;}for(b6=0,b7=bL.childNodes.length-1;b6<=b7;b6++){b8=bL.childNodes[b6];r.Equals(b8.nodeType,H.ELEMENT_NODE)?!bZ.Add(b8.nodeName.toLowerCase())?bw.warn("Hole filled twice",bU):void 0:void 0;}b9=bL.childNodes.length===1&&r.Equals(bL.firstChild.nodeType,H.TEXT_NODE);if(b9){bP=_0.fillTextHole(bY,bL.firstChild.textContent,bU);((function(cb){return function(cc){if(cc!=null)cb(cc.$0);};}((bQ=function(cb){return function(cc){return cb.Add(cc);};}(bZ),function(cb){return bR(bQ(cb));})))(bP));}_0.removeHolesExcept(bY,bZ);if(!b9){for(b_=0,b$=bL.childNodes.length-1;b_<=b$;b_++){ca=bL.childNodes[b_];r.Equals(ca.nodeType,H.ELEMENT_NODE)?ca.hasAttributes()?_0.fillInstanceAttrs(bY,ca):bG(bY,ca):void 0;}}_0.mapHoles(bY,b0);_0.fill(bY,bL.parentNode,bL);bL.parentNode.removeChild(bL);return;}}break;}}function bG(bK,bL){var bM,bO,bP;function bN(bQ,bR){var bS,bT,bU;if(bO==="title"&&bL.hasChildNodes()){bS=bv.parseHTML(bL.textContent);bL.removeChild(bL.firstChild);for(bT=0,bU=bS.length-1;bT<=bU;bT++)bL.appendChild(t.get(bS,bT));}else null;bH(bL);return _0.fill(bL,bQ,bR);}bO=bL.nodeName.toLowerCase();B.IterSelector(bK,"[ws-attr-holes]",function(bQ){var bR,bS,bT,bU,bV;bR=_6.SplitChars(bQ.getAttribute("ws-attr-holes"),[" "],1);for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=t.get(bR,bS);bQ.setAttribute(bU,(bV=new a.RegExp("\\${"+bO+"}","ig"),bQ.getAttribute(bU).replace(bV,bL.textContent)));}});bP=bK.querySelector("[ws-hole="+bO+"]");if(r.Equals(bP,null)){bM=bK.querySelector("[ws-replace="+bO+"]");return r.Equals(bM,null)?null:(bN(bM.parentNode,bM),void bM.parentNode.removeChild(bM));}else{while(bP.hasChildNodes())bP.removeChild(bP.lastChild);bP.removeAttribute("ws-hole");return bN(bP,null);}}function bH(bK){if(_6.StartsWith(bK.nodeName.toLowerCase(),"ws-"))bJ(bK);else{_0.convertAttrs(bK);bI(bK.firstChild);}}function bI(bK){return bF(0,bK);}function bJ(bK){return bF(1,bK);}bD=bB==null?y.FakeRoot(bA):bB.$0;bE=(bz==null?"":bz.$0).toLowerCase();y.LoadedTemplateFile(by).set_Item(bE,bD);t.length(bA)>0?(function(bK){var bL,bM,bN,bO;while(true){bL=bK.querySelector("[ws-template]");if(r.Equals(bL,null)){bM=bK.querySelector("[ws-children-template]");if(r.Equals(bM,null))return null;else{bN=bM.getAttribute("ws-children-template");bM.removeAttribute("ws-children-template");y.PrepareTemplateStrict(by,{$:1,$0:bN},B.ChildrenArray(bM),null,null);bK=bK;}}else{bO=bL.getAttribute("ws-template");(y.PrepareSingleTemplate(by,{$:1,$0:bO},bL))(null);bK=bK;}}}(bD),bI(t.get(bA,0))):void 0;};y.PrepareSingleTemplate=function(by,bz,bA){var bB,bC,bD;bB=y.FakeRootSingle(bA);bC=[bA];bD={$:1,$0:bB};return function(bE){y.PrepareTemplateStrict(by,bz,bC,bD,bE);};};y.TextHoleRE=function(){R.$cctor();return R.TextHoleRE;};A.Int=function(){A.set_counter(A.counter()+1);return A.counter();};A.set_counter=function(by){U.$cctor();U.counter=by;};A.counter=function(){U.$cctor();return U.counter;};B.CreateElement=function(by){return B.Doc().createElement(by);};B.CreateText=function(by){return B.Doc().createTextNode(by);};B.SetAttr=function(by,bz,bA){by.setAttribute(bz,bA);};B.Doc=function(){T.$cctor();return T.Doc;};B.ChildrenArray=function(by){var bz,bA,bB;bz=[];for(bA=0,bB=by.childNodes.length-1;bA<=bB;bA++)bz.push(by.childNodes[bA]);return bz;};B.IterSelector=function(by,bz,bA){var bB,bC,bD;bB=by.querySelectorAll(bz);for(bC=0,bD=bB.length-1;bC<=bD;bC++)bA(bB[bC]);};B.InsertAt=function(by,bz,bA){var bB;if(!(bA.parentNode===by&&bz===(bB=bA.nextSibling,r.Equals(bB,null)?null:bB)))by.insertBefore(bA,bz);};B.RemoveNode=function(by,bz){if(bz.parentNode===by)by.removeChild(bz);};C.append=function(by,bz){return{GetEnumerator:function(){var bA,bB;bA=L.Get(by);bB=[true];return new M.New(bA,null,function(bC){var bD;return bC.s.MoveNext()?(bC.c=bC.s.Current(),true):(bD=bC.s,!r.Equals(bD,null)?bD.Dispose():void 0,bC.s=null,bB[0]&&(bB[0]=false,bC.s=L.Get(bz),bC.s.MoveNext()?(bC.c=bC.s.Current(),true):(bC.s.Dispose(),bC.s=null,false)));},function(bC){var bD;bD=bC.s;!r.Equals(bD,null)?bD.Dispose():void 0;});}};};C.iter=function(by,bz){var bA;bA=L.Get(bz);try{while(bA.MoveNext())by(bA.Current());}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}};C.head=function(by){var bz;bz=L.Get(by);try{return bz.MoveNext()?bz.Current():C.insufficient();}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}};C.fold=function(by,bz,bA){var bB,bC;bB=bz;bC=L.Get(bA);try{while(bC.MoveNext())bB=by(bB,bC.Current());return bB;}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}};C.map=function(by,bz){return{GetEnumerator:function(){var bA;bA=L.Get(bz);return new M.New(null,null,function(bB){return bA.MoveNext()&&(bB.c=by(bA.Current()),true);},function(){bA.Dispose();});}};};C.max=function(by){var bz,bA,bB;bz=L.Get(by);try{if(!bz.MoveNext())C.seqEmpty();bA=bz.Current();while(bz.MoveNext()){bB=bz.Current();r.Compare(bB,bA)===1?bA=bB:void 0;}return bA;}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}};C.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};D.Value=function(by){function bz(bA){return{$:1,$0:bA};}return D.CustomValue(by,a.id,function(bA){return bz(a.id(bA));});};D.CustomValue=function(by,bz,bA){return D.CustomVar(by,function(bB,bC){bB.value=bz(bC);},function(bB){return bA(bB.value);});};D.CustomVar=function(by,bz,bA){function bB(bD,bE){return by.UpdateMaybe(function(bF){var bG,bH;bG=bA(bD);return bG!=null&&bG.$==1&&(!r.Equals(bG.$0,bF)&&(bH=[bG,bG.$0],true))?bH[0]:null;});}function bC(bD,bE){var bF,bG;bF=bA(bD);return bF!=null&&bF.$==1&&(r.Equals(bF.$0,bE)&&(bG=bF.$0,true))?null:bz(bD,bE);}return q.Concat([D.Handler("change",function(bD){return function(bE){return bB(bD,bE);};}),D.Handler("input",function(bD){return function(bE){return bB(bD,bE);};}),D.Handler("keypress",function(bD){return function(bE){return bB(bD,bE);};}),D.DynamicCustom(function(bD){return function(bE){return bC(bD,bE);};},by.get_View())]);};D.Handler=function(by,bz){return E.Static(function(bA){bA.addEventListener(by,function(bB){return(bz(bA))(bB);},false);});};D.DynamicCustom=function(by,bz){return E.Dynamic(bz,by);};E.Static=function(by){return new q({$:3,$0:by});};E.Insert=function(by,bz){var bA,bB,bC;function bD(bE){if(!(bE===null))if(bE!=null&&bE.$==1)bA.push(bE.$0);else if(bE!=null&&bE.$==2){bD(bE.$0);bD(bE.$1);}else if(bE!=null&&bE.$==3)bE.$0(by);else if(bE!=null&&bE.$==4)bB.push(bE.$0);}bA=[];bB=[];bD(bz);bC=bA.slice(0);return P.New(by,E.Flags(bz),bC,bB.length===0?null:{$:1,$0:function(bE){C.iter(function(bF){bF(bE);},bB);}});};E.EmptyAttr=function(){Q.$cctor();return Q.EmptyAttr;};E.Flags=function(by){return by!==null&&by.hasOwnProperty("flags")?by.flags:0;};E.AppendTree=function(by,bz){var bA;return by===null?bz:bz===null?by:(bA=new q({$:2,$0:by,$1:bz}),(E.SetFlags(bA,E.Flags(by)|E.Flags(bz)),bA));};E.Updates=function(by){return v.MapTreeReduce(function(bz){return bz.NChanged();},w.Const(),w.Map2Unit,by.DynNodes);};E.SetFlags=function(by,bz){by.flags=bz;};E.Dynamic=function(by,bz){return new q({$:1,$0:new be.New(by,bz)});};E.HasChangeAnim=function(by){var bz;bz=4;return(by.DynFlags&bz)===bz;};E.GetChangeAnim=function(by){return E.GetAnim(by,function(bz,bA){return bz.NGetChangeAnim(bA);});};E.HasEnterAnim=function(by){var bz;bz=1;return(by.DynFlags&bz)===bz;};E.GetEnterAnim=function(by){return E.GetAnim(by,function(bz,bA){return bz.NGetEnterAnim(bA);});};E.HasExitAnim=function(by){var bz;bz=2;return(by.DynFlags&bz)===bz;};E.GetExitAnim=function(by){return E.GetAnim(by,function(bz,bA){return bz.NGetExitAnim(bA);});};E.GetAnim=function(by,bz){return _3.Concat(t.map(function(bA){return bz(bA,by.DynElem);},by.DynNodes));};E.Sync=function(by,bz){t.iter(function(bA){bA.NSync(by);},bz.DynNodes);};w=f.View=bu.Class({},null,w);F.GetFieldValues=function(by){var bz,bA;bz=[];for(var bB in by)bz.push(by[bB]);return bz;};G=f.DocElemNode=bu.Class({Equals:function(by){return this.ElKey===by.ElKey;},GetHashCode:function(){return this.ElKey;}},null,G);G.New=function(by,bz,bA,bB,bC,bD){var bE;return new G((bE={Attr:by,Children:bz,El:bB,ElKey:bC},(bu.SetOptional(bE,"Delimiters",bA),bu.SetOptional(bE,"Render",bD),bE)));};J=I.Dictionary=bu.Class({set_Item:function(by,bz){this.set(by,bz);},ContainsKey:function(by){var bz,bA;bz=this;bA=this.data[this.hash(by)];return bA==null?false:t.exists(function(bB){return bz.equals.apply(null,[(h.KeyValue(bB))[0],by]);},bA);},TryGetValue:function(by,bz){var bA,bB,bC;bA=this;bB=this.data[this.hash(by)];return bB==null?false:(bC=t.tryPick(function(bD){var bE;bE=h.KeyValue(bD);return bA.equals.apply(null,[bE[0],by])?{$:1,$0:bE[1]}:null;},bB),bC!=null&&bC.$==1&&(bz.set(bC.$0),true));},Remove:function(by){return this.remove(by);},get_Keys:function(){return new _2.New(this);},set:function(by,bz){var bA,bB,bC,bD;bA=this;bB=this.hash(by);bC=this.data[bB];bC==null?(this.count=this.count+1,this.data[bB]=new a.Array({K:by,V:bz})):(bD=t.tryFindIndex(function(bE){return bA.equals.apply(null,[(h.KeyValue(bE))[0],by]);},bC),bD==null?(this.count=this.count+1,bC.push({K:by,V:bz})):bC[bD.$0]={K:by,V:bz});},remove:function(by){var bz,bA,bB,bC;bz=this;bA=this.hash(by);bB=this.data[bA];return bB==null?false:(bC=t.filter(function(bD){return!bz.equals.apply(null,[(h.KeyValue(bD))[0],by]);},bB),t.length(bC)<bB.length&&(this.count=this.count-1,this.data[bA]=bC,true));},get_Item:function(by){return this.get(by);},get:function(by){var bz,bA;bz=this;bA=this.data[this.hash(by)];return bA==null?Z.notPresent():t.pick(function(bB){var bC;bC=h.KeyValue(bB);return bz.equals.apply(null,[bC[0],by])?{$:1,$0:bC[1]}:null;},bA);},GetEnumerator:function(){return L.Get0(this);},GetEnumerator0:function(){return L.Get0(t.concat(F.GetFieldValues(this.data)));}},i,J);J.New$5=bu.Ctor(function(){J.New$6.call(this,[],r.Equals,r.Hash);},J);J.New$6=bu.Ctor(function(by,bz,bA){var bB,bC;this.equals=bz;this.hash=bA;this.count=0;this.data=[];bB=L.Get(by);try{while(bB.MoveNext()){bC=bB.Current();this.set(bC.K,bC.V);}}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}},J);n.Obsolete=function(by){var bz,bA,bB,bC,bD;bA=by.s;if(bA==null||(bA!=null&&bA.$==2?(bz=bA.$1,false):bA!=null&&bA.$==3?(bz=bA.$1,false):true))void 0;else{by.s=null;for(bB=0,bC=t.length(bz)-1;bB<=bC;bB++){bD=t.get(bz,bB);typeof bD=="object"?function(bE){n.Obsolete(bE);}(bD):bD();}}};n.New=function(by){return{s:by};};K=f.Elt=bu.Class({},l,K);K.New=function(by,bz,bA){var bB,bC;bB=u.CreateElemNode(by,bz,bA.docNode);bC=Y.Create(bA.updates);return new K.New$1({$:1,$0:bB},w.Map2Unit(E.Updates(bB.Attr),bC.v),by,bC);};K.New$1=bu.Ctor(function(by,bz,bA,bB){l.New.call(this,by,bz);this.docNode$1=by;this.updates$1=bz;this.elt=bA;this.rvUpdates=bB;},K);L.Get=function(by){return by instanceof a.Array?L.ArrayEnumerator(by):r.Equals(typeof by,"string")?L.StringEnumerator(by):by.GetEnumerator();};L.ArrayEnumerator=function(by){return new M.New(0,null,function(bz){var bA;bA=bz.s;return bA<t.length(by)&&(bz.c=t.get(by,bA),bz.s=bA+1,true);},void 0);};L.StringEnumerator=function(by){return new M.New(0,null,function(bz){var bA;bA=bz.s;return bA<by.length&&(bz.c=by[bA],bz.s=bA+1,true);},void 0);};L.Get0=function(by){return by instanceof a.Array?L.ArrayEnumerator(by):r.Equals(typeof by,"string")?L.StringEnumerator(by):"GetEnumerator0"in by?by.GetEnumerator0():by.GetEnumerator();};M=L.T=bu.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},i,M);M.New=bu.Ctor(function(by,bz,bA,bB){this.s=by;this.c=bz;this.n=bA;this.d=bB;},M);P.New=function(by,bz,bA,bB){var bC;bC={DynElem:by,DynFlags:bz,DynNodes:bA};bu.SetOptional(bC,"OnAfterRender",bB);return bC;};Q.$cctor=function(){Q.$cctor=a.ignore;Q.EmptyAttr=null;};R.$cctor=function(){R.$cctor=a.ignore;R.LoadedTemplates=new J.New$5();R.LocalTemplatesLoaded=false;R.TextHoleRE="\\${([^}]+)}";};S=I.HashSet=bu.Class({Add:function(by){return this.add(by);},Contains:function(by){var bz;bz=this.data[this.hash(by)];return bz==null?false:this.arrContains(by,bz);},add:function(by){var bz,bA;bz=this.hash(by);bA=this.data[bz];return bA==null?(this.data[bz]=[by],this.count=this.count+1,true):this.arrContains(by,bA)?false:(bA.push(by),this.count=this.count+1,true);},arrContains:function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=bz.length;while(bA&&bB<bD)if(this.equals.apply(null,[bz[bB],by]))bA=false;else bB=bB+1;return!bA;},IntersectWith:function(by){var bz,bA,bB,bC,bD;bz=new S.New$4(by,this.equals,this.hash);bA=bd.concat(this.data);for(bB=0,bC=bA.length-1;bB<=bC;bB++){bD=bA[bB];!bz.Contains(bD)?this.Remove(bD):void 0;}},get_Count:function(){return this.count;},CopyTo:function(by){var bz,bA,bB,bC;bz=0;bA=bd.concat(this.data);for(bB=0,bC=bA.length-1;bB<=bC;bB++)t.set(by,bB,bA[bB]);},ExceptWith:function(by){var bz;bz=L.Get(by);try{while(bz.MoveNext())this.Remove(bz.Current());}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}},Remove:function(by){var bz;bz=this.data[this.hash(by)];return bz==null?false:this.arrRemove(by,bz)&&(this.count=this.count-1,true);},arrRemove:function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=bz.length;while(bA&&bB<bD)if(this.equals.apply(null,[bz[bB],by])){bz.splice.apply(bz,[bB,1]);bA=false;}else bB=bB+1;return!bA;},GetEnumerator:function(){return L.Get(bd.concat(this.data));},GetEnumerator0:function(){return L.Get(bd.concat(this.data));}},i,S);S.New$3=bu.Ctor(function(){S.New$4.call(this,[],r.Equals,r.Hash);},S);S.New$4=bu.Ctor(function(by,bz,bA){var bB;this.equals=bz;this.hash=bA;this.data=[];this.count=0;bB=L.Get(by);try{while(bB.MoveNext())this.add(bB.Current());}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}},S);S.New$2=bu.Ctor(function(by){S.New$4.call(this,by,r.Equals,r.Hash);},S);T.$cctor=function(){T.$cctor=a.ignore;T.Doc=a.document;};U.$cctor=function(){U.$cctor=a.ignore;U.counter=0;};W=V.T=bu.Class({GetEnumerator:function(){return new M.New(this,null,function(by){var bz;bz=by.s;return bz.$==0?false:(by.c=bz.$0,by.s=bz.$1,true);},void 0);},GetEnumerator0:function(){return L.Get(this);}},null,W);t.ofList=function(by){var bz,bA;bA=[];bz=by;while(!(bz.$==0)){bA.push(V.head(bz));bz=V.tail(bz);}return bA;};t.foldBack=function(by,bz,bA){var bB,bC,bD,bE,bF;bB=bA;bD=bz.length;for(bE=1,bF=bD;bE<=bF;bE++)bB=by(bz[bD-bE],bB);return bB;};t.exists=function(by,bz){var bA,bB,bC,bD;bA=false;bB=0;bD=t.length(bz);while(!bA&&bB<bD)if(by(bz[bB]))bA=true;else bB=bB+1;return bA;};t.tryPick=function(by,bz){var bA,bB,bC;bA=null;bB=0;while(bB<bz.length&&bA==null){bC=by(bz[bB]);bC!=null&&bC.$==1?bA=bC:void 0;bB=bB+1;}return bA;};t.tryFindIndex=function(by,bz){var bA,bB;bA=null;bB=0;while(bB<bz.length&&bA==null){by(bz[bB])?bA={$:1,$0:bB}:void 0;bB=bB+1;}return bA;};t.filter=function(by,bz){var bA,bB,bC;bA=[];for(bB=0,bC=bz.length-1;bB<=bC;bB++)if(by(bz[bB]))bA.push(bz[bB]);return bA;};t.map=function(by,bz){var bA,bB,bC;bA=new a.Array(bz.length);for(bB=0,bC=bz.length-1;bB<=bC;bB++)bA[bB]=by(bz[bB]);return bA;};t.iter=function(by,bz){var bA,bB;for(bA=0,bB=bz.length-1;bA<=bB;bA++)by(bz[bA]);};t.pick=function(by,bz){var bA;bA=t.tryPick(by,bz);return bA==null?h.FailWith("KeyNotFoundException"):bA.$0;};t.concat=function(by){return a.Array.prototype.concat.apply([],t.ofSeq(by));};t.ofSeq=function(by){var bz,bA;if(by instanceof a.Array)return by.slice();else if(by instanceof W)return t.ofList(by);else{bz=[];bA=L.Get(by);try{while(bA.MoveNext())bz.push(bA.Current());return bz;}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}}};t.choose=function(by,bz){var bA,bB,bC,bD;bA=[];for(bB=0,bC=bz.length-1;bB<=bC;bB++){bD=by(bz[bB]);bD==null?void 0:bA.push(bD.$0);}return bA;};t.create=function(by,bz){var bA,bB,bC;bA=new a.Array(by);for(bB=0,bC=by-1;bB<=bC;bB++)bA[bB]=bz;return bA;};t.init=function(by,bz){var bA,bB,bC;by<0?h.FailWith("Negative size given."):null;bA=new a.Array(by);for(bB=0,bC=by-1;bB<=bC;bB++)bA[bB]=bz(bB);return bA;};t.forall=function(by,bz){var bA,bB,bC,bD;bA=true;bB=0;bD=t.length(bz);while(bA&&bB<bD)if(by(bz[bB]))bB=bB+1;else bA=false;return bA;};Y=f.Updates=bu.Class({},null,Y);Y.Create=function(by){var bz;bz=null;bz=Y.New(by,null,function(){var bA;bA=bz.s;return bA===null?(bA=n.Copy(bz.c()),bz.s=bA,n.WhenObsoleteRun(bA,function(){bz.s=null;}),bA):bA;});return bz;};Y.New=function(by,bz,bA){return new Y({c:by,s:bz,v:bA});};Z.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};_0.convertTextNode=function(by){var bz,bA,bB,bC,bD,bE;bz=null;bA=0;bC=by.textContent;bD=new a.RegExp(y.TextHoleRE(),"g");while(bz=bD.exec(bC),bz!==null){by.parentNode.insertBefore(a.document.createTextNode(_1.string(bC,{$:1,$0:bA},{$:1,$0:bD.lastIndex-t.get(bz,0).length-1})),by);bA=bD.lastIndex;bE=a.document.createElement("span");bE.setAttribute("ws-replace",t.get(bz,1).toLowerCase());by.parentNode.insertBefore(bE,by);}bD.lastIndex=0;by.textContent=_1.string(bC,{$:1,$0:bA},null);};_0.failNotLoaded=function(by){bw.warn("Instantiating non-loaded template",by);};_0.fillTextHole=function(by,bz,bA){var bB;bB=by.querySelector("[ws-replace]");return r.Equals(bB,null)?(bw.warn("Filling non-existent text hole",bA),null):(bB.parentNode.replaceChild(new a.Text(bz),bB),{$:1,$0:bB.getAttribute("ws-replace")});};_0.removeHolesExcept=function(by,bz){function bA(bB){B.IterSelector(by,"["+bB+"]",function(bC){if(!bz.Contains(bC.getAttribute(bB)))bC.removeAttribute(bB);});}bA("ws-attr");bA("ws-onafterrender");bA("ws-var");B.IterSelector(by,"[ws-hole]",function(bB){if(!bz.Contains(bB.getAttribute("ws-hole"))){bB.removeAttribute("ws-hole");while(bB.hasChildNodes())bB.removeChild(bB.lastChild);}});B.IterSelector(by,"[ws-replace]",function(bB){if(!bz.Contains(bB.getAttribute("ws-replace")))bB.parentNode.removeChild(bB);});B.IterSelector(by,"[ws-on]",function(bB){bB.setAttribute("ws-on",_6.concat(" ",t.filter(function(bC){return bz.Contains(t.get(_6.SplitChars(bC,[":"],1),1));},_6.SplitChars(bB.getAttribute("ws-on"),[" "],1))));});B.IterSelector(by,"[ws-attr-holes]",function(bB){var bC,bD,bE,bF,bG;bC=_6.SplitChars(bB.getAttribute("ws-attr-holes"),[" "],1);for(bD=0,bE=bC.length-1;bD<=bE;bD++){bF=t.get(bC,bD);bB.setAttribute(bF,(bG=new a.RegExp(y.TextHoleRE(),"g"),bB.getAttribute(bF).replace(bG,function(bH,bI){return bz.Contains(bI)?bH:"";})));}});};_0.fillInstanceAttrs=function(by,bz){var bA,bB,bC,bD,bE;_0.convertAttrs(bz);bA=bz.nodeName.toLowerCase();bB=by.querySelector("[ws-attr="+bA+"]");if(r.Equals(bB,null))bw.warn("Filling non-existent attr hole",bA);else{bB.removeAttribute("ws-attr");for(bC=0,bD=bz.attributes.length-1;bC<=bD;bC++){bE=bz.attributes.item(bC);bE.name==="class"&&bB.hasAttribute("class")?bB.setAttribute("class",bB.getAttribute("class")+" "+bE.nodeValue):bB.setAttribute(bE.name,bE.nodeValue);}}};_0.mapHoles=function(by,bz){function bA(bB){B.IterSelector(by,"["+bB+"]",function(bC){var bD,bE;bD=(bE=null,[bz.TryGetValue(bC.getAttribute(bB).toLowerCase(),{get:function(){return bE;},set:function(bF){bE=bF;}}),bE]);bD[0]?bC.setAttribute(bB,bD[1]):void 0;});}bA("ws-hole");bA("ws-replace");bA("ws-attr");bA("ws-onafterrender");bA("ws-var");B.IterSelector(by,"[ws-on]",function(bB){bB.setAttribute("ws-on",_6.concat(" ",t.map(function(bC){var bD,bE,bF;bD=_6.SplitChars(bC,[":"],1);bE=(bF=null,[bz.TryGetValue(t.get(bD,1),{get:function(){return bF;},set:function(bG){bF=bG;}}),bF]);return bE[0]?t.get(bD,0)+":"+bE[1]:bC;},_6.SplitChars(bB.getAttribute("ws-on"),[" "],1))));});B.IterSelector(by,"[ws-attr-holes]",function(bB){var bC,bD,bE;bC=_6.SplitChars(bB.getAttribute("ws-attr-holes"),[" "],1);for(bD=0,bE=bC.length-1;bD<=bE;bD++)(function(){var bF;function bG(bH,bI){var bJ;bJ=h.KeyValue(bI);return bH.replace(new a.RegExp("\\${"+bJ[0]+"}","ig"),"${"+bJ[1]+"}");}bF=t.get(bC,bD);return bB.setAttribute(bF,(((bu.Curried3(C.fold))(bG))(bB.getAttribute(bF)))(bz));}());});};_0.fill=function(by,bz,bA){while(true)if(by.hasChildNodes())bA=bz.insertBefore(by.lastChild,bA);else return null;};_0.convertAttrs=function(by){var bA,bB,bC,bD,bE,bF,bG,bH;function bz(bI){var bJ;bJ=by.getAttribute(bI);bJ===null?void 0:by.setAttribute(bI,bJ.toLowerCase());}bA=by.attributes;bB=[];bC=[];bD=[];for(bE=0,bF=bA.length-1;bE<=bF;bE++){bG=bA.item(bE);_6.StartsWith(bG.nodeName,"ws-on")&&bG.nodeName!=="ws-onafterrender"&&bG.nodeName!=="ws-on"?(bB.push(bG.nodeName),bC.push(_1.string(bG.nodeName,{$:1,$0:"ws-on".length},null)+":"+bG.nodeValue.toLowerCase())):!_6.StartsWith(bG.nodeName,"ws-")&&(new a.RegExp(y.TextHoleRE())).test(bG.nodeValue)?(bG.nodeValue=(bH=new a.RegExp(y.TextHoleRE(),"g"),bG.nodeValue.replace(bH,function(bI,bJ){return"${"+bJ.toLowerCase()+"}";})),bD.push(bG.nodeName)):void 0;}!(bC.length==0)?by.setAttribute("ws-on",_6.concat(" ",bC)):void 0;!(bD.length==0)?by.setAttribute("ws-attr-holes",_6.concat(" ",bD)):void 0;bz("ws-hole");bz("ws-replace");bz("ws-attr");bz("ws-onafterrender");bz("ws-var");t.iter(function(bI){by.removeAttribute(bI);},bB);};_1.string=function(by,bz,bA){return bz==null?bA!=null&&bA.$==1?by.slice(0,bA.$0+1):"":bA==null?by.slice(bz.$0):by.slice(bz.$0,bA.$0+1);};C.insufficient=function(){return h.FailWith("The input sequence has an insufficient number of elements.");};_2=I.KeyCollection=bu.Class({GetEnumerator$1:function(){return L.Get(C.map(function(by){return by.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},i,_2);_2.New=bu.Ctor(function(by){this.d=by;},_2);_3.get_UseAnimations=function(){return _.UseAnimations();};_3.Play=function(by){var bz;bz=null;return bb.Delay(function(){return bb.Bind(_3.Run(a.ignore,_.Actions(by)),function(){_.Finalize(by);return bb.Return(null);});});};_3.Append=function(by,bz){return{$:0,$0:bc.Append(by.$0,bz.$0)};};_3.Concat=function(by){return{$:0,$0:bc.Concat(C.map(_.List,by))};};_3.Run=function(by,bz){var bA;function bB(bC){function bD(bE,bF){var bG;bG=bF-bE;bz.Compute(bG);by();return bG<=bA?void a.requestAnimationFrame(function(bH){bD(bE,bH);}):bC();}a.requestAnimationFrame(function(bE){bD(bE,bE);});}bA=bz.Duration;return bA===0?bb.Zero():bb.FromContinuations(function(bC,bD,bE){return bB.apply(null,[bC,bD,bE]);});};_3.get_Empty=function(){return{$:0,$0:bc.Empty()};};_4.BatchUpdatesEnabled=function(){$.$cctor();return $.BatchUpdatesEnabled;};_5.StartProcessor=function(by){var bz;function bA(){var bB;bB=null;return bb.Delay(function(){return bb.Bind(by,function(){var bC;bC=bz[0];return bC===1?(bz[0]=0,bb.Zero()):bC===2?(bz[0]=1,bA()):bb.Zero();});});}bz=[0];return function(){var bB;bB=bz[0];bB===0?(bz[0]=1,bb.Start(bA(),null)):bB===1?bz[0]=2:void 0;};};V.head=function(by){return by.$==1?by.$0:V.listEmpty();};V.tail=function(by){return by.$==1?by.$1:V.listEmpty();};V.listEmpty=function(){return h.FailWith("The input list was empty.");};_6.concat=function(by,bz){return t.ofSeq(bz).join(by);};_6.SplitChars=function(by,bz,bA){return _6.Split(by,new a.RegExp("["+_6.RegexEscape(bz.join(""))+"]"),bA);};_6.StartsWith=function(by,bz){return by.substring(0,bz.length)==bz;};_6.RegexEscape=function(by){return by.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_6.Split=function(by,bz,bA){return bA===1?t.filter(function(bB){return bB!=="";},_6.SplitWith(by,bz)):_6.SplitWith(by,bz);};_6.SplitWith=function(by,bz){return by.split(bz);};_8.New=function(by,bz){return{PreviousNodes:by,Top:bz};};_9.get_Empty=function(){return{$:0,$0:new S.New$3()};};_9.FindAll=function(by){var bz;function bA(bC){if(bC!=null&&bC.$==0){bA(bC.$0);bA(bC.$1);}else if(bC!=null&&bC.$==1)bB(bC.$0);else if(bC!=null&&bC.$==2)bA(bC.$0.Current);else if(bC!=null&&bC.$==6)t.iter(bB,bC.$0.Holes);}function bB(bC){bz.push(bC);bA(bC.Children);}bz=[];bA(by);return{$:0,$0:new S.New$2(bz)};};_9.Filter=function(by,bz){return{$:0,$0:bj.Filter(by,bz.$0)};};_9.Intersect=function(by,bz){return{$:0,$0:bj.Intersect(by.$0,bz.$0)};};_9.ToArray=function(by){return bj.ToArray(by.$0);};_9.Except=function(by,bz){return{$:0,$0:bj.Except(by.$0,bz.$0)};};_.UseAnimations=function(){ba.$cctor();return ba.UseAnimations;};_.Actions=function(by){return _.ConcatActions(t.choose(function(bz){return bz.$==1?{$:1,$0:bz.$0}:null;},bc.ToArray(by.$0)));};_.Finalize=function(by){t.iter(function(bz){if(bz.$==0)bz.$0();},bc.ToArray(by.$0));};_.List=function(by){return by.$0;};_.ConcatActions=function(by){var bz,bA,bB,bC;bz=v.ofSeqNonCopying(by);bA=t.length(bz);return bA===0?_.Const():bA===1?t.get(bz,0):(bB=C.max(C.map(function(bD){return bD.Duration;},bz)),(bC=t.map(function(bD){return _.Prolong(bB,bD);},bz),_.Def(bB,function(bD){t.iter(function(bE){bE.Compute(bD);},bC);})));};_.Const=function(by){return _.Def(0,function(){return by;});};_.Prolong=function(by,bz){var bA,bB,bC;bA=bz.Compute;bB=bz.Duration;bC=bq.Create(function(){return bz.Compute(bz.Duration);});return{Compute:function(bD){return bD>=bB?bC.f():bA(bD);},Duration:by};};_.Def=function(by,bz){return{Compute:bz,Duration:by};};$.$cctor=function(){$.$cctor=a.ignore;$.BatchUpdatesEnabled=true;};ba.$cctor=function(){ba.$cctor=a.ignore;ba.CubicInOut=bf.Custom(function(by){var bz;bz=by*by;return 3*bz-2*(bz*by);});ba.UseAnimations=true;};bb.Delay=function(by){return function(bz){try{(by(null))(bz);}catch(bA){bz.k({$:1,$0:bA});}};};bb.Bind=function(by,bz){return bb.checkCancel(function(bA){by(bg.New(function(bB){var bC;if(bB.$==0){bC=bB.$0;bb.scheduler().Fork(function(){try{(bz(bC))(bA);}catch(bD){bA.k({$:1,$0:bD});}});}else bb.scheduler().Fork(function(){bA.k(bB);});},bA.ct));});};bb.Zero=function(){bh.$cctor();return bh.Zero;};bb.Start=function(by,bz){var bA,bB;bA=(bB=(bb.defCTS())[0],bz==null?bB:bz.$0);bb.scheduler().Fork(function(){if(!bA.c)by(bg.New(function(bC){if(bC.$==1)bb.UncaughtAsyncError(bC.$0);},bA));});};bb.Return=function(by){return function(bz){bz.k({$:0,$0:by});};};bb.checkCancel=function(by){return function(bz){if(bz.ct.c)bb.cancel(bz);else by(bz);};};bb.defCTS=function(){bh.$cctor();return bh.defCTS;};bb.UncaughtAsyncError=function(by){bw.log("WebSharper: Uncaught asynchronous exception",by);};bb.FromContinuations=function(by){return function(bz){var bA;function bB(bC){if(bA[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bA[0]=true;bb.scheduler().Fork(bC);}}bA=[false];by(function(bC){bB(function(){bz.k({$:0,$0:bC});});},function(bC){bB(function(){bz.k({$:1,$0:bC});});},function(bC){bB(function(){bz.k({$:2,$0:bC});});});};};bb.cancel=function(by){by.k({$:2,$0:new bo.New(by.ct)});};bb.scheduler=function(){bh.$cctor();return bh.scheduler;};bc.Append=function(by,bz){return by.$==0?bz:bz.$==0?by:{$:2,$0:by,$1:bz};};bc.Concat=function(by){var bz;bz=v.ofSeqNonCopying(by);return v.TreeReduce(bc.Empty(),bc.Append,bz);};bc.ToArray=function(by){var bz;function bA(bB){if(bB.$==1)bz.push(bB.$0);else if(bB.$==2){bA(bB.$0);bA(bB.$1);}else if(bB.$==3)t.iter(function(bC){bz.push(bC);},bB.$0);}bz=[];bA(by);return bz.slice(0);};bc.Empty=function(){bp.$cctor();return bp.Empty;};bd.concat=function(by){var bz,bA;bz=[];for(var bB in by)bz.push.apply(bz,by[bB]);return bz;};be=f.DynamicAttrNode=bu.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(by){return _3.get_Empty();},NGetEnterAnim:function(by){return _3.get_Empty();},NGetExitAnim:function(by){return _3.get_Empty();},NSync:function(by){if(this.dirty){(this.push(by))(this.value);this.dirty=false;}}},i,be);be.New=bu.Ctor(function(by,bz){var bA;bA=this;this.push=bz;this.value=void 0;this.dirty=false;this.updates=w.Map(function(bB){bA.value=bB;bA.dirty=true;},by);},be);bf=f.Easing=bu.Class({},i,bf);bf.Custom=function(by){return new bf.New(by);};bf.New=bu.Ctor(function(by){this.transformTime=by;},bf);bg.New=function(by,bz){return{k:by,ct:bz};};bh.$cctor=function(){bh.$cctor=a.ignore;bh.noneCT=bi.New(false,[]);bh.scheduler=new bl.New();bh.defCTS=[new bm.New()];bh.Zero=bb.Return();bh.GetCT=function(by){by.k({$:0,$0:by.ct});};};bi.New=function(by,bz){return{c:by,r:bz};};bj.Filter=function(by,bz){return new S.New$2(t.filter(by,bj.ToArray(bz)));};bj.Intersect=function(by,bz){var bA;bA=new S.New$2(bj.ToArray(by));bA.IntersectWith(bj.ToArray(bz));return bA;};bj.ToArray=function(by){var bz;bz=t.create(by.get_Count(),void 0);by.CopyTo(bz);return bz;};bj.Except=function(by,bz){var bA;bA=new S.New$2(bj.ToArray(bz));bA.ExceptWith(bj.ToArray(by));return bA;};bk.Clear=function(by){by.splice(0,t.length(by));};bl=bb.Scheduler=bu.Class({Fork:function(by){var bz;bz=this;this.robin.push(by);this.idle?(this.idle=false,a.setTimeout(function(){bz.tick();},0)):void 0;},tick:function(){var by,bz,bA;bz=this;bA=bx.now();by=true;while(by)if(this.robin.length===0){this.idle=true;by=false;}else{(this.robin.shift())();bx.now()-bA>40?(a.setTimeout(function(){bz.tick();},0),by=false):void 0;}}},i,bl);bl.New=bu.Ctor(function(){this.idle=true;this.robin=[];},bl);bm=b.CancellationTokenSource=bu.Class({},i,bm);bm.New=bu.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bm);bn.DocChildren=function(by){var bz;function bA(bB){if(bB!=null&&bB.$==2)bA(bB.$0.Current);else if(bB!=null&&bB.$==1)bz.push(bB.$0.El);else if(bB==null);else if(bB!=null&&bB.$==5)bz.push(bB.$0);else if(bB!=null&&bB.$==4)bz.push(bB.$0.Text);else if(bB!=null&&bB.$==6)t.iter(function(bC){if(bC==null||bC.constructor===X)bA(bC);else bz.push(bC);},bB.$0.Els);else{bA(bB.$0);bA(bB.$1);}}bz=[];bA(by.Children);return{$:0,$0:v.ofSeqNonCopying(bz)};};bn.Children=function(by,bz){var bA,bB,bC;if(bz!=null&&bz.$==1){bC=[];bA=bz.$0[0].nextSibling;while(bA!==bz.$0[1]){bC.push(bA);bA=bA.nextSibling;}return{$:0,$0:bC};}else return{$:0,$0:t.init(by.childNodes.length,(bB=by.childNodes,function(bD){return bB[bD];}))};};bn.Except=function(by,bz){var bA;bA=by.$0;return{$:0,$0:t.filter(function(bB){return t.forall(function(bC){return!(bB===bC);},bA);},bz.$0)};};bn.Iter=function(by,bz){t.iter(by,bz.$0);};bo=b.OperationCanceledException=bu.Class({},null,bo);bo.New=bu.Ctor(function(by){bo.New$1.call(this,"The operation was canceled.",null,by);},bo);bo.New$1=bu.Ctor(function(by,bz,bA){this.message=by;this.inner=bz;this.ct=bA;},bo);bp.$cctor=function(){bp.$cctor=a.ignore;bp.Empty={$:0};};bq.Create=function(by){return bs.New(false,by,bq.forceLazy);};bq.forceLazy=function(){var by;by=this.v();this.c=true;this.v=by;this.f=bq.cachedLazy;return by;};bq.cachedLazy=function(){return this.v;};bs.New=function(by,bz,bA){return{c:by,v:bz,f:bA};};bu.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
