function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz;a=self;b=a.WebSharper=a.WebSharper||{};c=b.Remarkable=b.Remarkable||{};d=c.RenderingTest=c.RenderingTest||{};e=d.Client=d.Client||{};f=b.UI=b.UI||{};g=f.Var=f.Var||{};h=b.Operators=b.Operators||{};i=b.Obj=b.Obj||{};j=f.HtmlModule=f.HtmlModule||{};k=j.attr=j.attr||{};l=f.Doc=f.Doc||{};m=f.ConcreteVar=f.ConcreteVar||{};n=f.Snap=f.Snap||{};o=b.JavaScript=b.JavaScript||{};p=o.Pervasives=o.Pervasives||{};q=f.AttrProxy=f.AttrProxy||{};r=f.View=f.View||{};s=f.Array=f.Array||{};t=b.Unchecked=b.Unchecked||{};u=a.EventTarget;v=b.Arrays=b.Arrays||{};w=f.Docs=f.Docs||{};x=f.Client=f.Client||{};y=x.Templates=x.Templates||{};z=f.Abbrev=f.Abbrev||{};A=z.Fresh=z.Fresh||{};B=f.DomUtility=f.DomUtility||{};C=b.Seq=b.Seq||{};D=f.AttrModule=f.AttrModule||{};E=f.Attrs=f.Attrs||{};F=o.JS=o.JS||{};G=f.DocElemNode=f.DocElemNode||{};H=a.Node;I=b.Collections=b.Collections||{};J=I.Dictionary=I.Dictionary||{};K=f.Elt=f.Elt||{};L=b.Enumerator=b.Enumerator||{};M=L.T=L.T||{};N=a.CharacterData;O=x.Attrs=x.Attrs||{};P=O.Dyn=O.Dyn||{};Q=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};R=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};S=I.HashSet=I.HashSet||{};T=a.WindowOrWorkerGlobalScope;U=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};V=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};W=f.Updates=f.Updates||{};X=b.List=b.List||{};Y=X.T=X.T||{};Z=a.Object;_0=I.DictionaryUtil=I.DictionaryUtil||{};_1=y.Prepare=y.Prepare||{};_2=b.Slice=b.Slice||{};_3=I.KeyCollection=I.KeyCollection||{};_4=f.An=f.An||{};_5=x.Settings=x.Settings||{};_6=z.Mailbox=z.Mailbox||{};_7=b.Strings=b.Strings||{};_8=x.Docs=x.Docs||{};_9=_8.RunState=_8.RunState||{};_=_8.NodeSet=_8.NodeSet||{};$=f.Anims=f.Anims||{};ba=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bb=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bc=b.Concurrency=b.Concurrency||{};bd=f.AppendList=f.AppendList||{};be=I.HashSetUtil=I.HashSetUtil||{};bf=f.DynamicAttrNode=f.DynamicAttrNode||{};bg=f.Easing=f.Easing||{};bh=bc.AsyncBody=bc.AsyncBody||{};bi=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bj=bc.CT=bc.CT||{};bk=z.HashSet=z.HashSet||{};bl=b.Queue=b.Queue||{};bm=bc.Scheduler=bc.Scheduler||{};bn=b.CancellationTokenSource=b.CancellationTokenSource||{};bo=_8.DomNodes=_8.DomNodes||{};bp=a.Error;bq=b.OperationCanceledException=b.OperationCanceledException||{};br=b.Lazy=b.Lazy||{};bs=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bt=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bu=bt.LazyRecord=bt.LazyRecord||{};bv=a.IntelliFactory;bw=bv&&bv.Runtime;bx=a.jQuery;by=a.console;bz=a.Date;e.Main=function(){var bA,bB,bC;function bD(bE){return bA.render(bE);}bA=new a.Remarkable({html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:true,linkTarget:"",typographer:false,quotes:"'\ufffd\ufffd\ufffd\ufffd'"});bB=g.Create$1("");bC=l.Element("div",[],[l.Element("h1",[],[l.TextNode("WebSharper.Remarkable extension sample page")]),l.Element("p",[],[l.TextNode("Type markdown text here:")]),l.InputArea([q.Create("class","input"),q.Create("rows","20")],bB),l.Element("hr",[],[]),l.Element("h4",[],[l.TextNode("Result")]),l.Element("div",[q.Create("class","output")],[l.BindView(function(bE){return l.Verbatim(bD(bE));},bB.get_View())])]);y.LoadLocalTemplates("");l.RunById("main",bC);};g.Create$1=function(bA){return new m.New(false,n.New({$:2,$0:bA,$1:[]}),bA);};h.FailWith=function(bA){throw new bp(bA);};h.KeyValue=function(bA){return[bA.K,bA.V];};i=b.Obj=bw.Class({Equals:function(bA){return this===bA;},GetHashCode:function(){return -1;}},null,i);i.New=bw.Ctor(function(){},i);k=j.attr=bw.Class({},i,k);g=f.Var=bw.Class({},i,g);g.New=bw.Ctor(function(){i.New.call(this);},g);l=f.Doc=bw.Class({},i,l);l.Verbatim=function(bA){var bB;return l.Mk(s.MapTreeReduce(function(bC){return t.Equals(bC.nodeType,H.TEXT_NODE)?{$:5,$0:bC}:{$:1,$0:w.CreateElemNode(bC,E.EmptyAttr(),null)};},null,function(bC,bD){return{$:0,$0:bC,$1:bD};},(bB=bx.parseHTML(bA),t.Equals(bB,null)?[]:bB)),r.Const());};l.Element=function(bA,bB,bC){var bD,bE;bD=q.Concat(bB);bE=l.Concat(bC);return K.New(B.CreateElement(bA),bD,bE);};l.TextNode=function(bA){return l.Mk({$:5,$0:B.CreateText(bA)},r.Const());};l.InputArea=function(bA,bB){return l.InputInternal("textarea",function(){return C.append(bA,[D.Value(bB)]);});};l.Mk=function(bA,bB){return new l.New(bA,bB);};l.RunById=function(bA,bB){var bC;bC=B.Doc().getElementById(bA);t.Equals(bC,null)?h.FailWith("invalid id: "+bA):l.Run(bC,bB);};l.Concat=function(bA){var bB;bB=s.ofSeqNonCopying(bA);return s.TreeReduce(l.get_Empty(),l.Append,bB);};l.InputInternal=function(bA,bB){var bC;bC=B.CreateElement(bA);return K.New(bC,q.Concat(bB(bC)),l.get_Empty());};l.BindView=function(bA,bB){return l.EmbedView(r.Map(bA,bB));};l.Run=function(bA,bB){w.LinkElement(bA,bB.docNode);l.RunInPlace(false,bA,bB);};l.Append=function(bA,bB){return l.Mk({$:0,$0:bA.docNode,$1:bB.docNode},r.Map2Unit(bA.updates,bB.updates));};l.get_Empty=function(){return l.Mk(null,r.Const());};l.EmbedView=function(bA){var bB;bB=w.CreateEmbedNode();return l.Mk({$:2,$0:bB},r.Map(a.ignore,r.Bind(function(bC){w.UpdateEmbedNode(bB,bC.docNode);return bC.updates;},bA)));};l.RunInPlace=function(bA,bB,bC){var bD;bD=w.CreateRunState(bB,bC.docNode);r.Sink(_4.get_UseAnimations()||_5.BatchUpdatesEnabled()?_6.StartProcessor(w.PerformAnimatedUpdate(bA,bD,bC.docNode)):function(){w.PerformSyncUpdate(bA,bD,bC.docNode);},bC.updates);};l.New=bw.Ctor(function(bA,bB){i.New.call(this);this.docNode=bA;this.updates=bB;},l);m=f.ConcreteVar=bw.Class({get_View:function(){return this.view;},UpdateMaybe:function(bA){var bB;bB=bA(this.Get());bB!=null&&bB.$==1?this.Set(bB.$0):void 0;},Get:function(){return this.current;},Set:function(bA){if(this.isConst)(function(bB){return bB("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bB){by.log(bB);}));else{n.Obsolete(this.snap);this.current=bA;this.snap=n.New({$:2,$0:bA,$1:[]});}}},g,m);m.New=bw.Ctor(function(bA,bB,bC){var bD;bD=this;g.New.call(this);this.isConst=bA;this.current=bC;this.snap=bB;this.view=function(){return bD.snap;};this.id=A.Int();},m);n.Map=function(bA,bB){var bC,bD;bC=bB.s;return bC!=null&&bC.$==0?n.New({$:0,$0:bA(bC.$0)}):(bD=n.New({$:3,$0:[],$1:[]}),(n.When(bB,function(bE){n.MarkDone(bD,bB,bA(bE));},bD),bD));};n.Copy=function(bA){var bB,bC,bD;bB=bA.s;return bB==null?bA:bB!=null&&bB.$==2?(bC=n.New({$:2,$0:bB.$0,$1:[]}),(n.WhenObsolete(bA,bC),bC)):bB!=null&&bB.$==3?(bD=n.New({$:3,$0:[],$1:[]}),(n.When(bA,function(bE){n.MarkDone(bD,bA,bE);},bD),bD)):bA;};n.WhenObsoleteRun=function(bA,bB){var bC;bC=bA.s;bC==null?bB():bC!=null&&bC.$==2?bC.$1.push(bB):bC!=null&&bC.$==3?bC.$1.push(bB):void 0;};n.Map2Unit=function(bA,bB){var bC,bD,bE;function bF(){var bG,bH,bI;if(!(bG=bE.s,bG!=null&&bG.$==0||bG!=null&&bG.$==2)){bH=n.ValueAndForever(bA);bI=n.ValueAndForever(bB);bH!=null&&bH.$==1?bI!=null&&bI.$==1?bH.$0[1]&&bI.$0[1]?n.MarkForever(bE,null):n.MarkReady(bE,null):void 0:void 0;}}bC=bA.s;bD=bB.s;return bC!=null&&bC.$==0?bD!=null&&bD.$==0?n.New({$:0,$0:null}):bB:bD!=null&&bD.$==0?bA:(bE=n.New({$:3,$0:[],$1:[]}),(n.When(bA,bF,bE),n.When(bB,bF,bE),bE));};n.When=function(bA,bB,bC){var bD;bD=bA.s;bD==null?n.Obsolete(bC):bD!=null&&bD.$==2?(n.EnqueueSafe(bD.$1,bC),bB(bD.$0)):bD!=null&&bD.$==3?(bD.$0.push(bB),n.EnqueueSafe(bD.$1,bC)):bB(bD.$0);};n.MarkDone=function(bA,bB,bC){var bD;if(bD=bB.s,bD!=null&&bD.$==0)n.MarkForever(bA,bC);else n.MarkReady(bA,bC);};n.WhenRun=function(bA,bB,bC){var bD;bD=bA.s;bD==null?bC():bD!=null&&bD.$==2?(bD.$1.push(bC),bB(bD.$0)):bD!=null&&bD.$==3?(bD.$0.push(bB),bD.$1.push(bC)):bB(bD.$0);};n.WhenObsolete=function(bA,bB){var bC;bC=bA.s;bC==null?n.Obsolete(bB):bC!=null&&bC.$==2?n.EnqueueSafe(bC.$1,bB):bC!=null&&bC.$==3?n.EnqueueSafe(bC.$1,bB):void 0;};n.ValueAndForever=function(bA){var bB;bB=bA.s;return bB!=null&&bB.$==0?{$:1,$0:[bB.$0,true]}:bB!=null&&bB.$==2?{$:1,$0:[bB.$0,false]}:null;};n.MarkForever=function(bA,bB){var bC,bD,bE,bF;bC=bA.s;if(bC!=null&&bC.$==3){bA.s={$:0,$0:bB};bD=bC.$0;for(bE=0,bF=v.length(bD)-1;bE<=bF;bE++)(v.get(bD,bE))(bB);}else void 0;};n.MarkReady=function(bA,bB){var bC,bD,bE,bF;bC=bA.s;if(bC!=null&&bC.$==3){bA.s={$:2,$0:bB,$1:bC.$1};bD=bC.$0;for(bE=0,bF=v.length(bD)-1;bE<=bF;bE++)(v.get(bD,bE))(bB);}else void 0;};n.Join=function(bA){var bB;bB=n.New({$:3,$0:[],$1:[]});n.When(bA,function(bC){var bD;bD=bC();n.When(bD,function(bE){var bF,bG;if((bF=bD.s,bF!=null&&bF.$==0)&&(bG=bA.s,bG!=null&&bG.$==0))n.MarkForever(bB,bE);else n.MarkReady(bB,bE);},bB);},bB);return bB;};n.EnqueueSafe=function(bA,bB){var bC,bD,bE,bF;bA.push(bB);if(bA.length%20===0){bC=bA.slice(0);bl.Clear(bA);for(bD=0,bE=v.length(bC)-1;bD<=bE;bD++){bF=v.get(bC,bD);typeof bF=="object"?function(bG){if(bG.s)bA.push(bG);}(bF):function(bG){bA.push(bG);}(bF);}}else void 0;};p.NewFromSeq=function(bA){var bB,bC,bD;bB={};bC=L.Get(bA);try{while(bC.MoveNext()){bD=bC.Current();bB[bD[0]]=bD[1];}}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}return bB;};q=f.AttrProxy=bw.Class({},null,q);q.Create=function(bA,bB){return E.Static(function(bC){B.SetAttr(bC,bA,bB);});};q.Concat=function(bA){var bB;bB=s.ofSeqNonCopying(bA);return s.TreeReduce(E.EmptyAttr(),q.Append,bB);};q.Append=function(bA,bB){return E.AppendTree(bA,bB);};r.Const=function(bA){var bB;bB=n.New({$:0,$0:bA});return function(){return bB;};};r.Map=function(bA,bB){return r.CreateLazy(function(){return n.Map(bA,bB());});};r.Map2Unit=function(bA,bB){return r.CreateLazy(function(){return n.Map2Unit(bA(),bB());});};r.Bind=function(bA,bB){return r.Join(r.Map(bA,bB));};r.CreateLazy=function(bA){var bB;bB={c:null,o:bA};return function(){var bC,bD;bC=bB.c;return bC===null?(bC=bB.o(),bB.c=bC,(bD=bC.s,bD!=null&&bD.$==0)?bB.o=null:n.WhenObsoleteRun(bC,function(){bB.c=null;}),bC):bC;};};r.Sink=function(bA,bB){function bC(){n.WhenRun(bB(),bA,function(){bc.scheduler().Fork(bC);});}bc.scheduler().Fork(bC);};r.Join=function(bA){return r.CreateLazy(function(){return n.Join(bA());});};s.MapTreeReduce=function(bA,bB,bC,bD){var bE;function bF(bG,bH){var bI,bJ;return bH<=0?bB:bH===1&&(bG>=0&&bG<bE)?bA(v.get(bD,bG)):(bJ=bH/2>>0,bC(bF(bG,bJ),bF(bG+bJ,bH-bJ)));}bE=v.length(bD);return bF(0,bE);};s.ofSeqNonCopying=function(bA){var bB,bC;if(bA instanceof a.Array)return bA;else if(bA instanceof Y)return v.ofList(bA);else if(bA===null)return[];else{bB=[];bC=L.Get(bA);try{while(bC.MoveNext())bB.push(bC.Current());return bB;}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}}};s.TreeReduce=function(bA,bB,bC){var bD;function bE(bF,bG){var bH,bI;return bG<=0?bA:bG===1&&(bF>=0&&bF<bD)?v.get(bC,bF):(bI=bG/2>>0,bB(bE(bF,bI),bE(bF+bI,bG-bI)));}bD=v.length(bC);return bE(0,bD);};t.Equals=function(bA,bB){var bC,bD,bE,bF;if(bA===bB)return true;else{bC=typeof bA;if(bC=="object"){if(bA===null||bA===void 0||bB===null||bB===void 0)return false;else if("Equals"in bA)return bA.Equals(bB);else if(bA instanceof a.Array&&bB instanceof a.Array)return t.arrayEquals(bA,bB);else if(bA instanceof a.Date&&bB instanceof a.Date)return t.dateEquals(bA,bB);else{bD=[true];for(var bG in bA)if(function(bH){bD[0]=!bA.hasOwnProperty(bH)||bB.hasOwnProperty(bH)&&t.Equals(bA[bH],bB[bH]);return!bD[0];}(bG))break;if(bD[0]){for(var bH in bB)if(function(bI){bD[0]=!bB.hasOwnProperty(bI)||bA.hasOwnProperty(bI);return!bD[0];}(bH))break;}return bD[0];}}else return bC=="function"&&("$Func"in bA?bA.$Func===bB.$Func&&bA.$Target===bB.$Target:"$Invokes"in bA&&"$Invokes"in bB&&t.arrayEquals(bA.$Invokes,bB.$Invokes));}};t.arrayEquals=function(bA,bB){var bC,bD;if(v.length(bA)===v.length(bB)){bC=true;bD=0;while(bC&&bD<v.length(bA)){!t.Equals(v.get(bA,bD),v.get(bB,bD))?bC=false:void 0;bD=bD+1;}return bC;}else return false;};t.dateEquals=function(bA,bB){return bA.getTime()===bB.getTime();};t.Hash=function(bA){var bB;bB=typeof bA;return bB=="function"?0:bB=="boolean"?bA?1:0:bB=="number"?bA:bB=="string"?t.hashString(bA):bB=="object"?bA==null?0:bA instanceof a.Array?t.hashArray(bA):t.hashObject(bA):0;};t.hashString=function(bA){var bB,bC,bD;if(bA===null)return 0;else{bB=5381;for(bC=0,bD=bA.length-1;bC<=bD;bC++)bB=t.hashMix(bB,bA[bC].charCodeAt());return bB;}};t.hashArray=function(bA){var bB,bC,bD;bB=-34948909;for(bC=0,bD=v.length(bA)-1;bC<=bD;bC++)bB=t.hashMix(bB,t.Hash(v.get(bA,bC)));return bB;};t.hashObject=function(bA){var bB,bC;if("GetHashCode"in bA)return bA.GetHashCode();else{bB=[0];for(var bD in bA)if(function(bE){bB[0]=t.hashMix(t.hashMix(bB[0],t.hashString(bE)),t.Hash(bA[bE]));return false;}(bD))break;return bB[0];}};t.hashMix=function(bA,bB){return(bA<<5)+bA+bB;};t.Compare=function(bA,bB){var bC,bD,bE,bF,bG,bH;if(bA===bB)return 0;else{bD=typeof bA;switch(bD=="function"?1:bD=="boolean"?2:bD=="number"?2:bD=="string"?2:bD=="object"?3:0){case 0:return typeof bB=="undefined"?0:-1;break;case 1:return h.FailWith("Cannot compare function values.");break;case 2:return bA<bB?-1:1;break;case 3:if(bA===null)bE=-1;else if(bB===null)bE=1;else if("CompareTo"in bA)bE=bA.CompareTo(bB);else if("CompareTo0"in bA)bE=bA.CompareTo0(bB);else if(bA instanceof a.Array&&bB instanceof a.Array)bE=t.compareArrays(bA,bB);else if(bA instanceof a.Date&&bB instanceof a.Date)bE=t.compareDates(bA,bB);else{bF=[0];for(var bI in bA)if(function(bJ){return!bA.hasOwnProperty(bJ)?false:!bB.hasOwnProperty(bJ)?(bF[0]=1,true):(bF[0]=t.Compare(bA[bJ],bB[bJ]),bF[0]!==0);}(bI))break;if(bF[0]===0){for(var bJ in bB)if(function(bK){return!bB.hasOwnProperty(bK)?false:!bA.hasOwnProperty(bK)&&(bF[0]=-1,true);}(bJ))break;}bE=bF[0];}return bE;break;}}};t.compareArrays=function(bA,bB){var bC,bD;if(v.length(bA)<v.length(bB))return -1;else if(v.length(bA)>v.length(bB))return 1;else{bC=0;bD=0;while(bC===0&&bD<v.length(bA)){bC=t.Compare(v.get(bA,bD),v.get(bB,bD));bD=bD+1;}return bC;}};t.compareDates=function(bA,bB){return t.Compare(bA.getTime(),bB.getTime());};v.get=function(bA,bB){v.checkBounds(bA,bB);return bA[bB];};v.length=function(bA){return bA.dims===2?bA.length*bA.length:bA.length;};v.checkBounds=function(bA,bB){if(bB<0||bB>=bA.length)h.FailWith("Index was outside the bounds of the array.");};v.set=function(bA,bB,bC){v.checkBounds(bA,bB);bA[bB]=bC;};w.CreateElemNode=function(bA,bB,bC){var bD;w.LinkElement(bA,bC);bD=E.Insert(bA,bB);return G.New(bD,bC,null,bA,A.Int(),bw.GetOptional(bD.OnAfterRender));};w.LinkElement=function(bA,bB){w.InsertDoc(bA,bB,null);};w.InsertDoc=function(bA,bB,bC){var bD;return bB!=null&&bB.$==1?w.InsertNode(bA,bB.$0.El,bC):bB!=null&&bB.$==2?(bD=bB.$0,(bD.Dirty=false,w.InsertDoc(bA,bD.Current,bC))):bB==null?bC:bB!=null&&bB.$==4?w.InsertNode(bA,bB.$0.Text,bC):bB!=null&&bB.$==5?w.InsertNode(bA,bB.$0,bC):bB!=null&&bB.$==6?v.foldBack(function(bE,bF){return bE==null||bE.constructor===Z?w.InsertDoc(bA,bE,bF):w.InsertNode(bA,bE,bF);},bB.$0.Els,bC):w.InsertDoc(bA,bB.$0,w.InsertDoc(bA,bB.$1,bC));};w.CreateEmbedNode=function(){return{Current:null,Dirty:false};};w.UpdateEmbedNode=function(bA,bB){bA.Current=bB;bA.Dirty=true;};w.InsertNode=function(bA,bB,bC){B.InsertAt(bA,bC,bB);return bB;};w.CreateRunState=function(bA,bB){return _9.New(_.get_Empty(),w.CreateElemNode(bA,E.EmptyAttr(),bB));};w.PerformAnimatedUpdate=function(bA,bB,bC){var bD;return _4.get_UseAnimations()?(bD=null,bc.Delay(function(){var bE,bF,bG;bE=_.FindAll(bC);bF=w.ComputeChangeAnim(bB,bE);bG=w.ComputeEnterAnim(bB,bE);return bc.Bind(_4.Play(_4.Append(bF,w.ComputeExitAnim(bB,bE))),function(){return bc.Bind(w.SyncElemNodesNextFrame(bA,bB),function(){return bc.Bind(_4.Play(bG),function(){bB.PreviousNodes=bE;return bc.Return(null);});});});})):w.SyncElemNodesNextFrame(bA,bB);};w.PerformSyncUpdate=function(bA,bB,bC){var bD;bD=_.FindAll(bC);w.SyncElemNode(bA,bB.Top);bB.PreviousNodes=bD;};w.SyncElemNodesNextFrame=function(bA,bB){function bC(bD){a.requestAnimationFrame(function(){w.SyncElemNode(bA,bB.Top);bD();});}return _5.BatchUpdatesEnabled()?bc.FromContinuations(function(bD,bE,bF){return bC.apply(null,[bD,bE,bF]);}):(w.SyncElemNode(bA,bB.Top),bc.Return(null));};w.ComputeExitAnim=function(bA,bB){return _4.Concat(v.map(function(bC){return E.GetExitAnim(bC.Attr);},_.ToArray(_.Except(bB,_.Filter(function(bC){return E.HasExitAnim(bC.Attr);},bA.PreviousNodes)))));};w.ComputeEnterAnim=function(bA,bB){return _4.Concat(v.map(function(bC){return E.GetEnterAnim(bC.Attr);},_.ToArray(_.Except(bA.PreviousNodes,_.Filter(function(bC){return E.HasEnterAnim(bC.Attr);},bB)))));};w.ComputeChangeAnim=function(bA,bB){var bC;function bD(bE){return E.HasChangeAnim(bE.Attr);}bC=function(bE){return _.Filter(bD,bE);};return _4.Concat(v.map(function(bE){return E.GetChangeAnim(bE.Attr);},_.ToArray(_.Intersect(bC(bA.PreviousNodes),bC(bB)))));};w.SyncElemNode=function(bA,bB){!bA?w.SyncElement(bB):void 0;w.Sync(bB.Children);w.AfterRender(bB);};w.SyncElement=function(bA){function bB(bC){function bD(bE){var bF,bG;return bE!=null&&bE.$==0?bD(bE.$0)||bD(bE.$1):bE!=null&&bE.$==2?(bF=bE.$0,bF.Dirty||bD(bF.Current)):bE!=null&&bE.$==6&&(bG=bE.$0,bG.Dirty||v.exists(bB,bG.Holes));}return bD(bC.Children);}E.Sync(bA.El,bA.Attr);bB(bA)?w.DoSyncElement(bA):void 0;};w.Sync=function(bA){var bB,bC;if(bA!=null&&bA.$==1)w.SyncElemNode(false,bA.$0);else if(bA!=null&&bA.$==2)w.Sync(bA.$0.Current);else if(bA==null);else if(bA!=null&&bA.$==5);else if(bA!=null&&bA.$==4){bB=bA.$0;bB.Dirty?(bB.Text.nodeValue=bB.Value,bB.Dirty=false):void 0;}else if(bA!=null&&bA.$==6){bC=bA.$0;v.iter(function(bD){w.SyncElemNode(false,bD);},bC.Holes);v.iter(function(bD){E.Sync(bD[0],bD[1]);},bC.Attrs);w.AfterRender(bC);}else{w.Sync(bA.$0);w.Sync(bA.$1);}};w.AfterRender=function(bA){var bB;bB=bw.GetOptional(bA.Render);bB!=null&&bB.$==1?(bB.$0(bA.El),bw.SetOptional(bA,"Render",null)):void 0;};w.DoSyncElement=function(bA){var bB,bC,bD;function bE(bF,bG){var bH,bI;return bF!=null&&bF.$==1?bF.$0.El:bF!=null&&bF.$==2?(bH=bF.$0,bH.Dirty?(bH.Dirty=false,w.InsertDoc(bB,bH.Current,bG)):bE(bH.Current,bG)):bF==null?bG:bF!=null&&bF.$==4?bF.$0.Text:bF!=null&&bF.$==5?bF.$0:bF!=null&&bF.$==6?(bI=bF.$0,(bI.Dirty?bI.Dirty=false:void 0,v.foldBack(function(bJ,bK){return bJ==null||bJ.constructor===Z?bE(bJ,bK):bJ;},bI.Els,bG))):bE(bF.$0,bE(bF.$1,bG));}bB=bA.El;bo.Iter((bC=bA.El,function(bF){B.RemoveNode(bC,bF);}),bo.Except(bo.DocChildren(bA),bo.Children(bA.El,bw.GetOptional(bA.Delimiters))));bE(bA.Children,(bD=bw.GetOptional(bA.Delimiters),bD!=null&&bD.$==1?bD.$0[1]:null));};y.LoadLocalTemplates=function(bA){!y.LocalTemplatesLoaded()?(y.set_LocalTemplatesLoaded(true),y.LoadNestedTemplates(self.document.body,"")):void 0;y.LoadedTemplates().set_Item(bA,y.LoadedTemplateFile(""));};y.LocalTemplatesLoaded=function(){R.$cctor();return R.LocalTemplatesLoaded;};y.set_LocalTemplatesLoaded=function(bA){R.$cctor();R.LocalTemplatesLoaded=bA;};y.LoadNestedTemplates=function(bA,bB){var bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ;function bC(bR){var bS,bT;if(!bD.ContainsKey(bR)){bS=(bT=null,[bE.TryGetValue(bR,{get:function(){return bT;},set:function(bU){bT=bU;}}),bT]);bS[0]?(bQ.Add(bR),bE.Remove(bR),y.PrepareTemplateStrict(bB,{$:1,$0:bR},bS[1][0],{$:1,$0:bS[1][1]},{$:1,$0:bC})):by.warn(bQ.Contains(bR)?"Encountered loop when instantiating "+bR:"Local template does not exist: "+bR);}}bD=y.LoadedTemplateFile(bB);bE=new J.New$5();bF=bA.querySelectorAll("[ws-template]");for(bG=0,bH=bF.length-1;bG<=bH;bG++){bI=bF[bG];bJ=bI.getAttribute("ws-template").toLowerCase();bI.removeAttribute("ws-template");bE.set_Item(bJ,[[bI],y.FakeRootSingle(bI)]);}bK=bA.querySelectorAll("[ws-children-template]");for(bL=0,bM=bK.length-1;bL<=bM;bL++){bN=bK[bL];bO=bN.getAttribute("ws-children-template").toLowerCase();bN.removeAttribute("ws-children-template");bE.set_Item(bO,(bP=B.ChildrenArray(bN),[bP,y.FakeRoot(bP)]));}bQ=new S.New$3();while(bE.count>0)bC(C.head(bE.get_Keys()));};y.LoadedTemplates=function(){R.$cctor();return R.LoadedTemplates;};y.LoadedTemplateFile=function(bA){var bB,bC,bD;bB=(bC=null,[y.LoadedTemplates().TryGetValue(bA,{get:function(){return bC;},set:function(bE){bC=bE;}}),bC]);return bB[0]?bB[1]:(bD=new J.New$5(),(y.LoadedTemplates().set_Item(bA,bD),bD));};y.FakeRootSingle=function(bA){var bB,bC,bD;bA.removeAttribute("ws-template");bB=bA.getAttribute("ws-replace");bB===null?void 0:(bA.removeAttribute("ws-replace"),bC=bA.parentNode,t.Equals(bC,null)?void 0:(bD=self.document.createElement(bA.tagName),bD.setAttribute("ws-replace",bB),bC.replaceChild(bD,bA)));return y.FakeRoot([bA]);};y.FakeRoot=function(bA){var bB,bC,bD;bB=self.document.createElement("div");for(bC=0,bD=bA.length-1;bC<=bD;bC++)bB.appendChild(v.get(bA,bC));return bB;};y.PrepareTemplateStrict=function(bA,bB,bC,bD,bE){var bF,bG;function bH(bM,bN){var bO,bP,bQ,bR,bS,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc;function bT(cd){}while(true)switch(bM){case 0:if(bN!==null){bO=bN.nextSibling;if(t.Equals(bN.nodeType,H.TEXT_NODE))_1.convertTextNode(bN);else if(t.Equals(bN.nodeType,H.ELEMENT_NODE))bJ(bN);bN=bO;}else return null;break;case 1:bU=_2.string(bN.nodeName,{$:1,$0:3},null).toLowerCase();bV=(bP=bU.indexOf("."),bP===-1?[bA,bU]:[_2.string(bU,null,{$:1,$0:bP-1}),_2.string(bU,{$:1,$0:bP+1},null)]);bW=bV[1];bX=bV[0];if(bX!==""&&!y.LoadedTemplates().ContainsKey(bX))return _1.failNotLoaded(bW);else{if(bX===""&&bE!=null)bE.$0(bW);bY=y.LoadedTemplates().get_Item(bX);if(!bY.ContainsKey(bW))return _1.failNotLoaded(bW);else{bZ=bY.get_Item(bW);b0=bZ.cloneNode(true);b1=new S.New$3();b2=new J.New$5();b3=bN.attributes;for(b4=0,b5=b3.length-1;b4<=b5;b4++){b6=b3.item(b4).name.toLowerCase();b2.set_Item(b6,(b7=b3.item(b4).nodeValue,b7===""?b6:b7.toLowerCase()));!b1.Add(b6)?by.warn("Hole mapped twice",b6):void 0;}for(b8=0,b9=bN.childNodes.length-1;b8<=b9;b8++){b_=bN.childNodes[b8];t.Equals(b_.nodeType,H.ELEMENT_NODE)?!b1.Add(b_.nodeName.toLowerCase())?by.warn("Hole filled twice",bW):void 0:void 0;}b$=bN.childNodes.length===1&&t.Equals(bN.firstChild.nodeType,H.TEXT_NODE);if(b$){bR=_1.fillTextHole(b0,bN.firstChild.textContent,bW);((function(cd){return function(ce){if(ce!=null)cd(ce.$0);};}((bS=function(cd){return function(ce){return cd.Add(ce);};}(b1),function(cd){return bT(bS(cd));})))(bR));}_1.removeHolesExcept(b0,b1);if(!b$){for(ca=0,cb=bN.childNodes.length-1;ca<=cb;ca++){cc=bN.childNodes[ca];t.Equals(cc.nodeType,H.ELEMENT_NODE)?cc.hasAttributes()?_1.fillInstanceAttrs(b0,cc):bI(b0,cc):void 0;}}_1.mapHoles(b0,b2);_1.fill(b0,bN.parentNode,bN);bN.parentNode.removeChild(bN);return;}}break;}}function bI(bM,bN){var bO,bQ,bR;function bP(bS,bT){var bU,bV,bW;if(bQ==="title"&&bN.hasChildNodes()){bU=bx.parseHTML(bN.textContent);bN.removeChild(bN.firstChild);for(bV=0,bW=bU.length-1;bV<=bW;bV++)bN.appendChild(v.get(bU,bV));}else null;bJ(bN);return _1.fill(bN,bS,bT);}bQ=bN.nodeName.toLowerCase();B.IterSelector(bM,"[ws-attr-holes]",function(bS){var bT,bU,bV,bW,bX;bT=_7.SplitChars(bS.getAttribute("ws-attr-holes"),[" "],1);for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=v.get(bT,bU);bS.setAttribute(bW,(bX=new a.RegExp("\\${"+bQ+"}","ig"),bS.getAttribute(bW).replace(bX,bN.textContent)));}});bR=bM.querySelector("[ws-hole="+bQ+"]");if(t.Equals(bR,null)){bO=bM.querySelector("[ws-replace="+bQ+"]");return t.Equals(bO,null)?null:(bP(bO.parentNode,bO),void bO.parentNode.removeChild(bO));}else{while(bR.hasChildNodes())bR.removeChild(bR.lastChild);bR.removeAttribute("ws-hole");return bP(bR,null);}}function bJ(bM){if(_7.StartsWith(bM.nodeName.toLowerCase(),"ws-"))bL(bM);else{_1.convertAttrs(bM);bK(bM.firstChild);}}function bK(bM){return bH(0,bM);}function bL(bM){return bH(1,bM);}bF=bD==null?y.FakeRoot(bC):bD.$0;bG=(bB==null?"":bB.$0).toLowerCase();y.LoadedTemplateFile(bA).set_Item(bG,bF);v.length(bC)>0?(function(bM){var bN,bO,bP,bQ;while(true){bN=bM.querySelector("[ws-template]");if(t.Equals(bN,null)){bO=bM.querySelector("[ws-children-template]");if(t.Equals(bO,null))return null;else{bP=bO.getAttribute("ws-children-template");bO.removeAttribute("ws-children-template");y.PrepareTemplateStrict(bA,{$:1,$0:bP},B.ChildrenArray(bO),null,null);bM=bM;}}else{bQ=bN.getAttribute("ws-template");(y.PrepareSingleTemplate(bA,{$:1,$0:bQ},bN))(null);bM=bM;}}}(bF),bK(v.get(bC,0))):void 0;};y.PrepareSingleTemplate=function(bA,bB,bC){var bD,bE,bF;bD=y.FakeRootSingle(bC);bE=[bC];bF={$:1,$0:bD};return function(bG){y.PrepareTemplateStrict(bA,bB,bE,bF,bG);};};y.TextHoleRE=function(){R.$cctor();return R.TextHoleRE;};A.Int=function(){A.set_counter(A.counter()+1);return A.counter();};A.set_counter=function(bA){V.$cctor();V.counter=bA;};A.counter=function(){V.$cctor();return V.counter;};B.CreateElement=function(bA){return B.Doc().createElement(bA);};B.CreateText=function(bA){return B.Doc().createTextNode(bA);};B.SetAttr=function(bA,bB,bC){bA.setAttribute(bB,bC);};B.Doc=function(){U.$cctor();return U.Doc;};B.ChildrenArray=function(bA){var bB,bC,bD;bB=[];for(bC=0,bD=bA.childNodes.length-1;bC<=bD;bC++)bB.push(bA.childNodes[bC]);return bB;};B.IterSelector=function(bA,bB,bC){var bD,bE,bF;bD=bA.querySelectorAll(bB);for(bE=0,bF=bD.length-1;bE<=bF;bE++)bC(bD[bE]);};B.InsertAt=function(bA,bB,bC){var bD;if(!(bC.parentNode===bA&&bB===(bD=bC.nextSibling,t.Equals(bD,null)?null:bD)))bA.insertBefore(bC,bB);};B.RemoveNode=function(bA,bB){if(bB.parentNode===bA)bA.removeChild(bB);};C.append=function(bA,bB){return{GetEnumerator:function(){var bC,bD;bC=L.Get(bA);bD=[true];return new M.New(bC,null,function(bE){var bF;return bE.s.MoveNext()?(bE.c=bE.s.Current(),true):(bF=bE.s,!t.Equals(bF,null)?bF.Dispose():void 0,bE.s=null,bD[0]&&(bD[0]=false,bE.s=L.Get(bB),bE.s.MoveNext()?(bE.c=bE.s.Current(),true):(bE.s.Dispose(),bE.s=null,false)));},function(bE){var bF;bF=bE.s;!t.Equals(bF,null)?bF.Dispose():void 0;});}};};C.iter=function(bA,bB){var bC;bC=L.Get(bB);try{while(bC.MoveNext())bA(bC.Current());}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}};C.head=function(bA){var bB;bB=L.Get(bA);try{return bB.MoveNext()?bB.Current():C.insufficient();}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}};C.fold=function(bA,bB,bC){var bD,bE;bD=bB;bE=L.Get(bC);try{while(bE.MoveNext())bD=bA(bD,bE.Current());return bD;}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}};C.map=function(bA,bB){return{GetEnumerator:function(){var bC;bC=L.Get(bB);return new M.New(null,null,function(bD){return bC.MoveNext()&&(bD.c=bA(bC.Current()),true);},function(){bC.Dispose();});}};};C.max=function(bA){var bB,bC,bD;bB=L.Get(bA);try{if(!bB.MoveNext())C.seqEmpty();bC=bB.Current();while(bB.MoveNext()){bD=bB.Current();t.Compare(bD,bC)===1?bC=bD:void 0;}return bC;}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}};C.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};D.Value=function(bA){function bB(bC){return{$:1,$0:bC};}return D.CustomValue(bA,a.id,function(bC){return bB(a.id(bC));});};D.CustomValue=function(bA,bB,bC){return D.CustomVar(bA,function(bD,bE){bD.value=bB(bE);},function(bD){return bC(bD.value);});};D.CustomVar=function(bA,bB,bC){function bD(bF,bG){return bA.UpdateMaybe(function(bH){var bI,bJ;bI=bC(bF);return bI!=null&&bI.$==1&&(!t.Equals(bI.$0,bH)&&(bJ=[bI,bI.$0],true))?bJ[0]:null;});}function bE(bF,bG){var bH,bI;bH=bC(bF);return bH!=null&&bH.$==1&&(t.Equals(bH.$0,bG)&&(bI=bH.$0,true))?null:bB(bF,bG);}return q.Concat([D.Handler("change",function(bF){return function(bG){return bD(bF,bG);};}),D.Handler("input",function(bF){return function(bG){return bD(bF,bG);};}),D.Handler("keypress",function(bF){return function(bG){return bD(bF,bG);};}),D.DynamicCustom(function(bF){return function(bG){return bE(bF,bG);};},bA.get_View())]);};D.Handler=function(bA,bB){return E.Static(function(bC){bC.addEventListener(bA,function(bD){return(bB(bC))(bD);},false);});};D.DynamicCustom=function(bA,bB){return E.Dynamic(bB,bA);};E.Static=function(bA){return new q({$:3,$0:bA});};E.Insert=function(bA,bB){var bC,bD,bE;function bF(bG){if(!(bG===null))if(bG!=null&&bG.$==1)bC.push(bG.$0);else if(bG!=null&&bG.$==2){bF(bG.$0);bF(bG.$1);}else if(bG!=null&&bG.$==3)bG.$0(bA);else if(bG!=null&&bG.$==4)bD.push(bG.$0);}bC=[];bD=[];bF(bB);bE=bC.slice(0);return P.New(bA,E.Flags(bB),bE,bD.length===0?null:{$:1,$0:function(bG){C.iter(function(bH){bH(bG);},bD);}});};E.EmptyAttr=function(){Q.$cctor();return Q.EmptyAttr;};E.Flags=function(bA){return bA!==null&&bA.hasOwnProperty("flags")?bA.flags:0;};E.Updates=function(bA){return s.MapTreeReduce(function(bB){return bB.NChanged();},r.Const(),r.Map2Unit,bA.DynNodes);};E.AppendTree=function(bA,bB){var bC;return bA===null?bB:bB===null?bA:(bC=new q({$:2,$0:bA,$1:bB}),(E.SetFlags(bC,E.Flags(bA)|E.Flags(bB)),bC));};E.SetFlags=function(bA,bB){bA.flags=bB;};E.Dynamic=function(bA,bB){return new q({$:1,$0:new bf.New(bA,bB)});};E.HasExitAnim=function(bA){var bB;bB=2;return(bA.DynFlags&bB)===bB;};E.GetExitAnim=function(bA){return E.GetAnim(bA,function(bB,bC){return bB.NGetExitAnim(bC);});};E.HasEnterAnim=function(bA){var bB;bB=1;return(bA.DynFlags&bB)===bB;};E.GetEnterAnim=function(bA){return E.GetAnim(bA,function(bB,bC){return bB.NGetEnterAnim(bC);});};E.HasChangeAnim=function(bA){var bB;bB=4;return(bA.DynFlags&bB)===bB;};E.GetChangeAnim=function(bA){return E.GetAnim(bA,function(bB,bC){return bB.NGetChangeAnim(bC);});};E.GetAnim=function(bA,bB){return _4.Concat(v.map(function(bC){return bB(bC,bA.DynElem);},bA.DynNodes));};E.Sync=function(bA,bB){v.iter(function(bC){bC.NSync(bA);},bB.DynNodes);};r=f.View=bw.Class({},null,r);F.GetFieldValues=function(bA){var bB,bC;bB=[];for(var bD in bA)bB.push(bA[bD]);return bB;};G=f.DocElemNode=bw.Class({Equals:function(bA){return this.ElKey===bA.ElKey;},GetHashCode:function(){return this.ElKey;}},null,G);G.New=function(bA,bB,bC,bD,bE,bF){var bG;return new G((bG={Attr:bA,Children:bB,El:bD,ElKey:bE},(bw.SetOptional(bG,"Delimiters",bC),bw.SetOptional(bG,"Render",bF),bG)));};J=I.Dictionary=bw.Class({set_Item:function(bA,bB){this.set(bA,bB);},ContainsKey:function(bA){var bB,bC;bB=this;bC=this.data[this.hash(bA)];return bC==null?false:v.exists(function(bD){return bB.equals.apply(null,[(h.KeyValue(bD))[0],bA]);},bC);},TryGetValue:function(bA,bB){var bC,bD,bE;bC=this;bD=this.data[this.hash(bA)];return bD==null?false:(bE=v.tryPick(function(bF){var bG;bG=h.KeyValue(bF);return bC.equals.apply(null,[bG[0],bA])?{$:1,$0:bG[1]}:null;},bD),bE!=null&&bE.$==1&&(bB.set(bE.$0),true));},Remove:function(bA){return this.remove(bA);},get_Keys:function(){return new _3.New(this);},set:function(bA,bB){var bC,bD,bE,bF;bC=this;bD=this.hash(bA);bE=this.data[bD];bE==null?(this.count=this.count+1,this.data[bD]=new a.Array({K:bA,V:bB})):(bF=v.tryFindIndex(function(bG){return bC.equals.apply(null,[(h.KeyValue(bG))[0],bA]);},bE),bF==null?(this.count=this.count+1,bE.push({K:bA,V:bB})):bE[bF.$0]={K:bA,V:bB});},remove:function(bA){var bB,bC,bD,bE;bB=this;bC=this.hash(bA);bD=this.data[bC];return bD==null?false:(bE=v.filter(function(bF){return!bB.equals.apply(null,[(h.KeyValue(bF))[0],bA]);},bD),v.length(bE)<bD.length&&(this.count=this.count-1,this.data[bC]=bE,true));},get_Item:function(bA){return this.get(bA);},get:function(bA){var bB,bC;bB=this;bC=this.data[this.hash(bA)];return bC==null?_0.notPresent():v.pick(function(bD){var bE;bE=h.KeyValue(bD);return bB.equals.apply(null,[bE[0],bA])?{$:1,$0:bE[1]}:null;},bC);},GetEnumerator:function(){return L.Get0(this);},GetEnumerator0:function(){return L.Get0(v.concat(F.GetFieldValues(this.data)));}},i,J);J.New$5=bw.Ctor(function(){J.New$6.call(this,[],t.Equals,t.Hash);},J);J.New$6=bw.Ctor(function(bA,bB,bC){var bD,bE;i.New.call(this);this.equals=bB;this.hash=bC;this.count=0;this.data=[];bD=L.Get(bA);try{while(bD.MoveNext()){bE=bD.Current();this.set(bE.K,bE.V);}}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}},J);n.Obsolete=function(bA){var bB,bC,bD,bE,bF;bC=bA.s;if(bC==null||(bC!=null&&bC.$==2?(bB=bC.$1,false):bC!=null&&bC.$==3?(bB=bC.$1,false):true))void 0;else{bA.s=null;for(bD=0,bE=v.length(bB)-1;bD<=bE;bD++){bF=v.get(bB,bD);typeof bF=="object"?function(bG){n.Obsolete(bG);}(bF):bF();}}};n.New=function(bA){return{s:bA};};K=f.Elt=bw.Class({},l,K);K.New=function(bA,bB,bC){var bD,bE;bD=w.CreateElemNode(bA,bB,bC.docNode);bE=W.Create(bC.updates);return new K.New$1({$:1,$0:bD},r.Map2Unit(E.Updates(bD.Attr),bE.v),bA,bE);};K.New$1=bw.Ctor(function(bA,bB,bC,bD){l.New.call(this,bA,bB);this.docNode$1=bA;this.updates$1=bB;this.elt=bC;this.rvUpdates=bD;},K);L.Get=function(bA){return bA instanceof a.Array?L.ArrayEnumerator(bA):t.Equals(typeof bA,"string")?L.StringEnumerator(bA):bA.GetEnumerator();};L.ArrayEnumerator=function(bA){return new M.New(0,null,function(bB){var bC;bC=bB.s;return bC<v.length(bA)&&(bB.c=v.get(bA,bC),bB.s=bC+1,true);},void 0);};L.StringEnumerator=function(bA){return new M.New(0,null,function(bB){var bC;bC=bB.s;return bC<bA.length&&(bB.c=bA[bC],bB.s=bC+1,true);},void 0);};L.Get0=function(bA){return bA instanceof a.Array?L.ArrayEnumerator(bA):t.Equals(typeof bA,"string")?L.StringEnumerator(bA):"GetEnumerator0"in bA?bA.GetEnumerator0():bA.GetEnumerator();};M=L.T=bw.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},i,M);M.New=bw.Ctor(function(bA,bB,bC,bD){i.New.call(this);this.s=bA;this.c=bB;this.n=bC;this.d=bD;},M);P.New=function(bA,bB,bC,bD){var bE;bE={DynElem:bA,DynFlags:bB,DynNodes:bC};bw.SetOptional(bE,"OnAfterRender",bD);return bE;};Q.$cctor=function(){Q.$cctor=a.ignore;Q.EmptyAttr=null;};R.$cctor=function(){R.$cctor=a.ignore;R.LoadedTemplates=new J.New$5();R.LocalTemplatesLoaded=false;R.TextHoleRE="\\${([^}]+)}";};S=I.HashSet=bw.Class({Add:function(bA){return this.add(bA);},Contains:function(bA){var bB;bB=this.data[this.hash(bA)];return bB==null?false:this.arrContains(bA,bB);},add:function(bA){var bB,bC;bB=this.hash(bA);bC=this.data[bB];return bC==null?(this.data[bB]=[bA],this.count=this.count+1,true):this.arrContains(bA,bC)?false:(bC.push(bA),this.count=this.count+1,true);},arrContains:function(bA,bB){var bC,bD,bE,bF;bC=true;bD=0;bF=bB.length;while(bC&&bD<bF)if(this.equals.apply(null,[bB[bD],bA]))bC=false;else bD=bD+1;return!bC;},ExceptWith:function(bA){var bB;bB=L.Get(bA);try{while(bB.MoveNext())this.Remove(bB.Current());}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bA){var bB,bC,bD,bE;bB=0;bC=be.concat(this.data);for(bD=0,bE=bC.length-1;bD<=bE;bD++)v.set(bA,bD,bC[bD]);},IntersectWith:function(bA){var bB,bC,bD,bE,bF;bB=new S.New$4(bA,this.equals,this.hash);bC=be.concat(this.data);for(bD=0,bE=bC.length-1;bD<=bE;bD++){bF=bC[bD];!bB.Contains(bF)?this.Remove(bF):void 0;}},Remove:function(bA){var bB;bB=this.data[this.hash(bA)];return bB==null?false:this.arrRemove(bA,bB)&&(this.count=this.count-1,true);},arrRemove:function(bA,bB){var bC,bD,bE,bF;bC=true;bD=0;bF=bB.length;while(bC&&bD<bF)if(this.equals.apply(null,[bB[bD],bA])){bB.splice.apply(bB,[bD,1]);bC=false;}else bD=bD+1;return!bC;},GetEnumerator:function(){return L.Get(be.concat(this.data));},GetEnumerator0:function(){return L.Get(be.concat(this.data));}},i,S);S.New$3=bw.Ctor(function(){S.New$4.call(this,[],t.Equals,t.Hash);},S);S.New$4=bw.Ctor(function(bA,bB,bC){var bD;i.New.call(this);this.equals=bB;this.hash=bC;this.data=[];this.count=0;bD=L.Get(bA);try{while(bD.MoveNext())this.add(bD.Current());}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}},S);S.New$2=bw.Ctor(function(bA){S.New$4.call(this,bA,t.Equals,t.Hash);},S);U.$cctor=function(){U.$cctor=a.ignore;U.Doc=self.document;};V.$cctor=function(){V.$cctor=a.ignore;V.counter=0;};W=f.Updates=bw.Class({},null,W);W.Create=function(bA){var bB;bB=null;bB=W.New(bA,null,function(){var bC;bC=bB.s;return bC===null?(bC=n.Copy(bB.c()),bB.s=bC,n.WhenObsoleteRun(bC,function(){bB.s=null;}),bC):bC;});return bB;};W.New=function(bA,bB,bC){return new W({c:bA,s:bB,v:bC});};Y=X.T=bw.Class({GetEnumerator:function(){return new M.New(this,null,function(bA){var bB;bB=bA.s;return bB.$==0?false:(bA.c=bB.$0,bA.s=bB.$1,true);},void 0);},GetEnumerator0:function(){return L.Get(this);}},null,Y);v.ofList=function(bA){var bB,bC;bC=[];bB=bA;while(!(bB.$==0)){bC.push(X.head(bB));bB=X.tail(bB);}return bC;};v.foldBack=function(bA,bB,bC){var bD,bE,bF,bG,bH;bD=bC;bF=bB.length;for(bG=1,bH=bF;bG<=bH;bG++)bD=bA(bB[bF-bG],bD);return bD;};v.exists=function(bA,bB){var bC,bD,bE,bF;bC=false;bD=0;bF=v.length(bB);while(!bC&&bD<bF)if(bA(bB[bD]))bC=true;else bD=bD+1;return bC;};v.tryPick=function(bA,bB){var bC,bD,bE;bC=null;bD=0;while(bD<bB.length&&bC==null){bE=bA(bB[bD]);bE!=null&&bE.$==1?bC=bE:void 0;bD=bD+1;}return bC;};v.tryFindIndex=function(bA,bB){var bC,bD;bC=null;bD=0;while(bD<bB.length&&bC==null){bA(bB[bD])?bC={$:1,$0:bD}:void 0;bD=bD+1;}return bC;};v.filter=function(bA,bB){var bC,bD,bE;bC=[];for(bD=0,bE=bB.length-1;bD<=bE;bD++)if(bA(bB[bD]))bC.push(bB[bD]);return bC;};v.map=function(bA,bB){var bC,bD,bE;bC=new a.Array(bB.length);for(bD=0,bE=bB.length-1;bD<=bE;bD++)bC[bD]=bA(bB[bD]);return bC;};v.iter=function(bA,bB){var bC,bD;for(bC=0,bD=bB.length-1;bC<=bD;bC++)bA(bB[bC]);};v.pick=function(bA,bB){var bC;bC=v.tryPick(bA,bB);return bC==null?h.FailWith("KeyNotFoundException"):bC.$0;};v.concat=function(bA){return a.Array.prototype.concat.apply([],v.ofSeq(bA));};v.ofSeq=function(bA){var bB,bC;if(bA instanceof a.Array)return bA.slice();else if(bA instanceof Y)return v.ofList(bA);else{bB=[];bC=L.Get(bA);try{while(bC.MoveNext())bB.push(bC.Current());return bB;}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}}};v.choose=function(bA,bB){var bC,bD,bE,bF;bC=[];for(bD=0,bE=bB.length-1;bD<=bE;bD++){bF=bA(bB[bD]);bF==null?void 0:bC.push(bF.$0);}return bC;};v.create=function(bA,bB){var bC,bD,bE;bC=new a.Array(bA);for(bD=0,bE=bA-1;bD<=bE;bD++)bC[bD]=bB;return bC;};v.init=function(bA,bB){var bC,bD,bE;bA<0?h.FailWith("Negative size given."):null;bC=new a.Array(bA);for(bD=0,bE=bA-1;bD<=bE;bD++)bC[bD]=bB(bD);return bC;};v.forall=function(bA,bB){var bC,bD,bE,bF;bC=true;bD=0;bF=v.length(bB);while(bC&&bD<bF)if(bA(bB[bD]))bD=bD+1;else bC=false;return bC;};_0.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};_1.convertTextNode=function(bA){var bB,bC,bD,bE,bF,bG;bB=null;bC=0;bE=bA.textContent;bF=new a.RegExp(y.TextHoleRE(),"g");while(bB=bF.exec(bE),bB!==null){bA.parentNode.insertBefore(self.document.createTextNode(_2.string(bE,{$:1,$0:bC},{$:1,$0:bF.lastIndex-v.get(bB,0).length-1})),bA);bC=bF.lastIndex;bG=self.document.createElement("span");bG.setAttribute("ws-replace",v.get(bB,1).toLowerCase());bA.parentNode.insertBefore(bG,bA);}bF.lastIndex=0;bA.textContent=_2.string(bE,{$:1,$0:bC},null);};_1.failNotLoaded=function(bA){by.warn("Instantiating non-loaded template",bA);};_1.fillTextHole=function(bA,bB,bC){var bD;bD=bA.querySelector("[ws-replace]");return t.Equals(bD,null)?(by.warn("Filling non-existent text hole",bC),null):(bD.parentNode.replaceChild(new a.Text(bB),bD),{$:1,$0:bD.getAttribute("ws-replace")});};_1.removeHolesExcept=function(bA,bB){function bC(bD){B.IterSelector(bA,"["+bD+"]",function(bE){if(!bB.Contains(bE.getAttribute(bD)))bE.removeAttribute(bD);});}bC("ws-attr");bC("ws-onafterrender");bC("ws-var");B.IterSelector(bA,"[ws-hole]",function(bD){if(!bB.Contains(bD.getAttribute("ws-hole"))){bD.removeAttribute("ws-hole");while(bD.hasChildNodes())bD.removeChild(bD.lastChild);}});B.IterSelector(bA,"[ws-replace]",function(bD){if(!bB.Contains(bD.getAttribute("ws-replace")))bD.parentNode.removeChild(bD);});B.IterSelector(bA,"[ws-on]",function(bD){bD.setAttribute("ws-on",_7.concat(" ",v.filter(function(bE){return bB.Contains(v.get(_7.SplitChars(bE,[":"],1),1));},_7.SplitChars(bD.getAttribute("ws-on"),[" "],1))));});B.IterSelector(bA,"[ws-attr-holes]",function(bD){var bE,bF,bG,bH,bI;bE=_7.SplitChars(bD.getAttribute("ws-attr-holes"),[" "],1);for(bF=0,bG=bE.length-1;bF<=bG;bF++){bH=v.get(bE,bF);bD.setAttribute(bH,(bI=new a.RegExp(y.TextHoleRE(),"g"),bD.getAttribute(bH).replace(bI,function(bJ,bK){return bB.Contains(bK)?bJ:"";})));}});};_1.fillInstanceAttrs=function(bA,bB){var bC,bD,bE,bF,bG;_1.convertAttrs(bB);bC=bB.nodeName.toLowerCase();bD=bA.querySelector("[ws-attr="+bC+"]");if(t.Equals(bD,null))by.warn("Filling non-existent attr hole",bC);else{bD.removeAttribute("ws-attr");for(bE=0,bF=bB.attributes.length-1;bE<=bF;bE++){bG=bB.attributes.item(bE);bG.name==="class"&&bD.hasAttribute("class")?bD.setAttribute("class",bD.getAttribute("class")+" "+bG.nodeValue):bD.setAttribute(bG.name,bG.nodeValue);}}};_1.mapHoles=function(bA,bB){function bC(bD){B.IterSelector(bA,"["+bD+"]",function(bE){var bF,bG;bF=(bG=null,[bB.TryGetValue(bE.getAttribute(bD).toLowerCase(),{get:function(){return bG;},set:function(bH){bG=bH;}}),bG]);bF[0]?bE.setAttribute(bD,bF[1]):void 0;});}bC("ws-hole");bC("ws-replace");bC("ws-attr");bC("ws-onafterrender");bC("ws-var");B.IterSelector(bA,"[ws-on]",function(bD){bD.setAttribute("ws-on",_7.concat(" ",v.map(function(bE){var bF,bG,bH;bF=_7.SplitChars(bE,[":"],1);bG=(bH=null,[bB.TryGetValue(v.get(bF,1),{get:function(){return bH;},set:function(bI){bH=bI;}}),bH]);return bG[0]?v.get(bF,0)+":"+bG[1]:bE;},_7.SplitChars(bD.getAttribute("ws-on"),[" "],1))));});B.IterSelector(bA,"[ws-attr-holes]",function(bD){var bE,bF,bG;bE=_7.SplitChars(bD.getAttribute("ws-attr-holes"),[" "],1);for(bF=0,bG=bE.length-1;bF<=bG;bF++)(function(){var bH;function bI(bJ,bK){var bL;bL=h.KeyValue(bK);return bJ.replace(new a.RegExp("\\${"+bL[0]+"}","ig"),"${"+bL[1]+"}");}bH=v.get(bE,bF);return bD.setAttribute(bH,(((bw.Curried3(C.fold))(bI))(bD.getAttribute(bH)))(bB));}());});};_1.fill=function(bA,bB,bC){while(true)if(bA.hasChildNodes())bC=bB.insertBefore(bA.lastChild,bC);else return null;};_1.convertAttrs=function(bA){var bC,bD,bE,bF,bG,bH,bI,bJ;function bB(bK){var bL;bL=bA.getAttribute(bK);bL===null?void 0:bA.setAttribute(bK,bL.toLowerCase());}bC=bA.attributes;bD=[];bE=[];bF=[];for(bG=0,bH=bC.length-1;bG<=bH;bG++){bI=bC.item(bG);_7.StartsWith(bI.nodeName,"ws-on")&&bI.nodeName!=="ws-onafterrender"&&bI.nodeName!=="ws-on"?(bD.push(bI.nodeName),bE.push(_2.string(bI.nodeName,{$:1,$0:"ws-on".length},null)+":"+bI.nodeValue.toLowerCase())):!_7.StartsWith(bI.nodeName,"ws-")&&(new a.RegExp(y.TextHoleRE())).test(bI.nodeValue)?(bI.nodeValue=(bJ=new a.RegExp(y.TextHoleRE(),"g"),bI.nodeValue.replace(bJ,function(bK,bL){return"${"+bL.toLowerCase()+"}";})),bF.push(bI.nodeName)):void 0;}!(bE.length==0)?bA.setAttribute("ws-on",_7.concat(" ",bE)):void 0;!(bF.length==0)?bA.setAttribute("ws-attr-holes",_7.concat(" ",bF)):void 0;bB("ws-hole");bB("ws-replace");bB("ws-attr");bB("ws-onafterrender");bB("ws-var");v.iter(function(bK){bA.removeAttribute(bK);},bD);};_2.string=function(bA,bB,bC){return bB==null?bC!=null&&bC.$==1?bA.slice(0,bC.$0+1):"":bC==null?bA.slice(bB.$0):bA.slice(bB.$0,bC.$0+1);};C.insufficient=function(){return h.FailWith("The input sequence has an insufficient number of elements.");};_3=I.KeyCollection=bw.Class({GetEnumerator$1:function(){return L.Get(C.map(function(bA){return bA.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},i,_3);_3.New=bw.Ctor(function(bA){i.New.call(this);this.d=bA;},_3);_4.get_UseAnimations=function(){return $.UseAnimations();};_4.Play=function(bA){var bB;bB=null;return bc.Delay(function(){return bc.Bind(_4.Run(a.ignore,$.Actions(bA)),function(){$.Finalize(bA);return bc.Return(null);});});};_4.Append=function(bA,bB){return{$:0,$0:bd.Append(bA.$0,bB.$0)};};_4.Run=function(bA,bB){var bC;function bD(bE){function bF(bG,bH){var bI;bI=bH-bG;bB.Compute(bI);bA();return bI<=bC?void a.requestAnimationFrame(function(bJ){bF(bG,bJ);}):bE();}a.requestAnimationFrame(function(bG){bF(bG,bG);});}bC=bB.Duration;return bC===0?bc.Zero():bc.FromContinuations(function(bE,bF,bG){return bD.apply(null,[bE,bF,bG]);});};_4.Concat=function(bA){return{$:0,$0:bd.Concat(C.map($.List,bA))};};_4.get_Empty=function(){return{$:0,$0:bd.Empty()};};_5.BatchUpdatesEnabled=function(){ba.$cctor();return ba.BatchUpdatesEnabled;};_6.StartProcessor=function(bA){var bB;function bC(){var bD;bD=null;return bc.Delay(function(){return bc.Bind(bA,function(){var bE;bE=bB[0];return bE===1?(bB[0]=0,bc.Zero()):bE===2?(bB[0]=1,bC()):bc.Zero();});});}bB=[0];return function(){var bD;bD=bB[0];bD===0?(bB[0]=1,bc.Start(bC(),null)):bD===1?bB[0]=2:void 0;};};X.head=function(bA){return bA.$==1?bA.$0:X.listEmpty();};X.tail=function(bA){return bA.$==1?bA.$1:X.listEmpty();};X.listEmpty=function(){return h.FailWith("The input list was empty.");};_7.concat=function(bA,bB){return v.ofSeq(bB).join(bA);};_7.SplitChars=function(bA,bB,bC){return _7.Split(bA,new a.RegExp("["+_7.RegexEscape(bB.join(""))+"]"),bC);};_7.StartsWith=function(bA,bB){return bA.substring(0,bB.length)==bB;};_7.Split=function(bA,bB,bC){return bC===1?v.filter(function(bD){return bD!=="";},_7.SplitWith(bA,bB)):_7.SplitWith(bA,bB);};_7.RegexEscape=function(bA){return bA.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_7.SplitWith=function(bA,bB){return bA.split(bB);};_9.New=function(bA,bB){return{PreviousNodes:bA,Top:bB};};_.get_Empty=function(){return{$:0,$0:new S.New$3()};};_.FindAll=function(bA){var bB;function bC(bE){if(bE!=null&&bE.$==0){bC(bE.$0);bC(bE.$1);}else if(bE!=null&&bE.$==1)bD(bE.$0);else if(bE!=null&&bE.$==2)bC(bE.$0.Current);else if(bE!=null&&bE.$==6)v.iter(bD,bE.$0.Holes);}function bD(bE){bB.push(bE);bC(bE.Children);}bB=[];bC(bA);return{$:0,$0:new S.New$2(bB)};};_.Filter=function(bA,bB){return{$:0,$0:bk.Filter(bA,bB.$0)};};_.Except=function(bA,bB){return{$:0,$0:bk.Except(bA.$0,bB.$0)};};_.ToArray=function(bA){return bk.ToArray(bA.$0);};_.Intersect=function(bA,bB){return{$:0,$0:bk.Intersect(bA.$0,bB.$0)};};$.UseAnimations=function(){bb.$cctor();return bb.UseAnimations;};$.Actions=function(bA){return $.ConcatActions(v.choose(function(bB){return bB.$==1?{$:1,$0:bB.$0}:null;},bd.ToArray(bA.$0)));};$.Finalize=function(bA){v.iter(function(bB){if(bB.$==0)bB.$0();},bd.ToArray(bA.$0));};$.ConcatActions=function(bA){var bB,bC,bD,bE;bB=s.ofSeqNonCopying(bA);bC=v.length(bB);return bC===0?$.Const():bC===1?v.get(bB,0):(bD=C.max(C.map(function(bF){return bF.Duration;},bB)),(bE=v.map(function(bF){return $.Prolong(bD,bF);},bB),$.Def(bD,function(bF){v.iter(function(bG){bG.Compute(bF);},bE);})));};$.List=function(bA){return bA.$0;};$.Const=function(bA){return $.Def(0,function(){return bA;});};$.Def=function(bA,bB){return{Compute:bB,Duration:bA};};$.Prolong=function(bA,bB){var bC,bD,bE;bC=bB.Compute;bD=bB.Duration;bE=br.Create(function(){return bB.Compute(bB.Duration);});return{Compute:function(bF){return bF>=bD?bE.f():bC(bF);},Duration:bA};};ba.$cctor=function(){ba.$cctor=a.ignore;ba.BatchUpdatesEnabled=true;};bb.$cctor=function(){bb.$cctor=a.ignore;bb.CubicInOut=bg.Custom(function(bA){var bB;bB=bA*bA;return 3*bB-2*(bB*bA);});bb.UseAnimations=true;};bc.Delay=function(bA){return function(bB){try{(bA(null))(bB);}catch(bC){bB.k({$:1,$0:bC});}};};bc.Bind=function(bA,bB){return bc.checkCancel(function(bC){bA(bh.New(function(bD){var bE;if(bD.$==0){bE=bD.$0;bc.scheduler().Fork(function(){try{(bB(bE))(bC);}catch(bF){bC.k({$:1,$0:bF});}});}else bc.scheduler().Fork(function(){bC.k(bD);});},bC.ct));});};bc.Zero=function(){bi.$cctor();return bi.Zero;};bc.Start=function(bA,bB){var bC,bD;bC=(bD=(bc.defCTS())[0],bB==null?bD:bB.$0);bc.scheduler().Fork(function(){if(!bC.c)bA(bh.New(function(bE){if(bE.$==1)bc.UncaughtAsyncError(bE.$0);},bC));});};bc.Return=function(bA){return function(bB){bB.k({$:0,$0:bA});};};bc.checkCancel=function(bA){return function(bB){if(bB.ct.c)bc.cancel(bB);else bA(bB);};};bc.defCTS=function(){bi.$cctor();return bi.defCTS;};bc.UncaughtAsyncError=function(bA){by.log("WebSharper: Uncaught asynchronous exception",bA);};bc.FromContinuations=function(bA){return function(bB){var bC;function bD(bE){if(bC[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bC[0]=true;bc.scheduler().Fork(bE);}}bC=[false];bA(function(bE){bD(function(){bB.k({$:0,$0:bE});});},function(bE){bD(function(){bB.k({$:1,$0:bE});});},function(bE){bD(function(){bB.k({$:2,$0:bE});});});};};bc.cancel=function(bA){bA.k({$:2,$0:new bq.New(bA.ct)});};bc.scheduler=function(){bi.$cctor();return bi.scheduler;};bd.Append=function(bA,bB){return bA.$==0?bB:bB.$==0?bA:{$:2,$0:bA,$1:bB};};bd.ToArray=function(bA){var bB;function bC(bD){if(bD.$==1)bB.push(bD.$0);else if(bD.$==2){bC(bD.$0);bC(bD.$1);}else if(bD.$==3)v.iter(function(bE){bB.push(bE);},bD.$0);}bB=[];bC(bA);return bB.slice(0);};bd.Concat=function(bA){var bB;bB=s.ofSeqNonCopying(bA);return s.TreeReduce(bd.Empty(),bd.Append,bB);};bd.Empty=function(){bs.$cctor();return bs.Empty;};be.concat=function(bA){var bB,bC;bB=[];for(var bD in bA)bB.push.apply(bB,bA[bD]);return bB;};bf=f.DynamicAttrNode=bw.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bA){return _4.get_Empty();},NGetEnterAnim:function(bA){return _4.get_Empty();},NGetChangeAnim:function(bA){return _4.get_Empty();},NSync:function(bA){if(this.dirty){(this.push(bA))(this.value);this.dirty=false;}}},i,bf);bf.New=bw.Ctor(function(bA,bB){var bC;bC=this;i.New.call(this);this.push=bB;this.value=void 0;this.dirty=false;this.updates=r.Map(function(bD){bC.value=bD;bC.dirty=true;},bA);},bf);bg=f.Easing=bw.Class({},i,bg);bg.Custom=function(bA){return new bg.New(bA);};bg.New=bw.Ctor(function(bA){i.New.call(this);this.transformTime=bA;},bg);bh.New=function(bA,bB){return{k:bA,ct:bB};};bi.$cctor=function(){bi.$cctor=a.ignore;bi.noneCT=bj.New(false,[]);bi.scheduler=new bm.New();bi.defCTS=[new bn.New()];bi.Zero=bc.Return();bi.GetCT=function(bA){bA.k({$:0,$0:bA.ct});};};bj.New=function(bA,bB){return{c:bA,r:bB};};bk.Filter=function(bA,bB){return new S.New$2(v.filter(bA,bk.ToArray(bB)));};bk.Except=function(bA,bB){var bC;bC=new S.New$2(bk.ToArray(bB));bC.ExceptWith(bk.ToArray(bA));return bC;};bk.ToArray=function(bA){var bB;bB=v.create(bA.get_Count(),void 0);bA.CopyTo(bB);return bB;};bk.Intersect=function(bA,bB){var bC;bC=new S.New$2(bk.ToArray(bA));bC.IntersectWith(bk.ToArray(bB));return bC;};bl.Clear=function(bA){bA.splice(0,v.length(bA));};bm=bc.Scheduler=bw.Class({Fork:function(bA){var bB;bB=this;this.robin.push(bA);this.idle?(this.idle=false,a.setTimeout(function(){bB.tick();},0)):void 0;},tick:function(){var bA,bB,bC;bB=this;bC=bz.now();bA=true;while(bA)if(this.robin.length===0){this.idle=true;bA=false;}else{(this.robin.shift())();bz.now()-bC>40?(a.setTimeout(function(){bB.tick();},0),bA=false):void 0;}}},i,bm);bm.New=bw.Ctor(function(){i.New.call(this);this.idle=true;this.robin=[];},bm);bn=b.CancellationTokenSource=bw.Class({},i,bn);bn.New=bw.Ctor(function(){i.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bn);bo.Children=function(bA,bB){var bC,bD,bE;if(bB!=null&&bB.$==1){bE=[];bC=bB.$0[0].nextSibling;while(bC!==bB.$0[1]){bE.push(bC);bC=bC.nextSibling;}return{$:0,$0:bE};}else return{$:0,$0:v.init(bA.childNodes.length,(bD=bA.childNodes,function(bF){return bD[bF];}))};};bo.Except=function(bA,bB){var bC;bC=bA.$0;return{$:0,$0:v.filter(function(bD){return v.forall(function(bE){return!(bD===bE);},bC);},bB.$0)};};bo.Iter=function(bA,bB){v.iter(bA,bB.$0);};bo.DocChildren=function(bA){var bB;function bC(bD){if(bD!=null&&bD.$==2)bC(bD.$0.Current);else if(bD!=null&&bD.$==1)bB.push(bD.$0.El);else if(bD==null);else if(bD!=null&&bD.$==5)bB.push(bD.$0);else if(bD!=null&&bD.$==4)bB.push(bD.$0.Text);else if(bD!=null&&bD.$==6)v.iter(function(bE){if(bE==null||bE.constructor===Z)bC(bE);else bB.push(bE);},bD.$0.Els);else{bC(bD.$0);bC(bD.$1);}}bB=[];bC(bA.Children);return{$:0,$0:s.ofSeqNonCopying(bB)};};bq=b.OperationCanceledException=bw.Class({},bp,bq);bq.New=bw.Ctor(function(bA){bq.New$1.call(this,"The operation was canceled.",null,bA);},bq);bq.New$1=bw.Ctor(function(bA,bB,bC){this.message=bA;this.inner=bB;Z.setPrototypeOf(this,bq.prototype);this.ct=bC;},bq);br.Create=function(bA){return bu.New(false,bA,br.forceLazy);};br.forceLazy=function(){var bA;bA=this.v();this.c=true;this.v=bA;this.f=br.cachedLazy;return bA;};br.cachedLazy=function(){return this.v;};bs.$cctor=function(){bs.$cctor=a.ignore;bs.Empty={$:0};};bu.New=function(bA,bB,bC){return{c:bA,v:bB,f:bC};};bw.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
