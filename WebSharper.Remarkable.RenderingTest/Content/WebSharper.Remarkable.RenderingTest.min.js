function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Remarkable=b.Remarkable||{};d=c.RenderingTest=c.RenderingTest||{};e=d.Client=d.Client||{};f=b.UI=b.UI||{};g=f.Var=f.Var||{};h=b.Operators=b.Operators||{};i=b.Obj=b.Obj||{};j=f.HtmlModule=f.HtmlModule||{};k=j.attr=j.attr||{};l=f.Doc=f.Doc||{};m=f.ConcreteVar=f.ConcreteVar||{};n=f.Snap=f.Snap||{};o=f.AttrProxy=f.AttrProxy||{};p=b.JavaScript=b.JavaScript||{};q=p.Pervasives=p.Pervasives||{};r=f.Abbrev=f.Abbrev||{};s=r.Fresh=r.Fresh||{};t=f.DomUtility=f.DomUtility||{};u=b.Seq=b.Seq||{};v=f.AttrModule=f.AttrModule||{};w=f.Attrs=f.Attrs||{};x=f.View=f.View||{};y=b.Unchecked=b.Unchecked||{};z=a.EventTarget;A=b.Arrays=b.Arrays||{};B=f.Docs=f.Docs||{};C=f.Array=f.Array||{};D=a.Node;E=f.Elt=f.Elt||{};F=b.Enumerator=b.Enumerator||{};G=F.T=F.T||{};H=f.DocElemNode=f.DocElemNode||{};I=a.CharacterData;J=p.JSModule=p.JSModule||{};K=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};L=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};M=b.List=b.List||{};N=M.T=M.T||{};O=a.Object;P=f.Updates=f.Updates||{};Q=f.Client=f.Client||{};R=Q.Attrs=Q.Attrs||{};S=R.Dyn=R.Dyn||{};T=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};U=f.An=f.An||{};V=Q.Settings=Q.Settings||{};W=r.Mailbox=r.Mailbox||{};X=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};Y=b.Collections=b.Collections||{};Z=Y.Dictionary=Y.Dictionary||{};_0=Q.Docs=Q.Docs||{};_1=_0.RunState=_0.RunState||{};_2=_0.NodeSet=_0.NodeSet||{};_3=f.Anims=f.Anims||{};_4=Y.HashSet=Y.HashSet||{};_5=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};_6=b.Concurrency=b.Concurrency||{};_7=f.AppendList=f.AppendList||{};_8=f.DynamicAttrNode=f.DynamicAttrNode||{};_9=Y.DictionaryUtil=Y.DictionaryUtil||{};_=b.Slice=b.Slice||{};$=b.Strings=b.Strings||{};ba=f.Easing=f.Easing||{};bb=_6.AsyncBody=_6.AsyncBody||{};bc=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bd=_6.CT=_6.CT||{};be=r.HashSet=r.HashSet||{};bf=b.Queue=b.Queue||{};bg=_6.Scheduler=_6.Scheduler||{};bh=b.CancellationTokenSource=b.CancellationTokenSource||{};bi=_0.DomNodes=_0.DomNodes||{};bj=b.OperationCanceledException=b.OperationCanceledException||{};bk=Y.HashSetUtil=Y.HashSetUtil||{};bl=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bm=b.Lazy=b.Lazy||{};bn=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bo=bn.LazyRecord=bn.LazyRecord||{};bp=a.IntelliFactory;bq=bp&&bp.Runtime;br=a.jQuery;bs=a.console;bt=a.Date;e.Main=function(){var bu,bv;function bw(bx){return bu.render(bx);}bu=new a.Remarkable({html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:true,linkTarget:"",typographer:false,quotes:"'\ufffd\ufffd\ufffd\ufffd'"});bv=g.Create$1("");l.RunById("main",l.Element("div",[],[l.Element("h1",[],[l.TextNode("WebSharper.Remarkable extension sample page")]),l.Element("p",[],[l.TextNode("Type markdown text here:")]),l.InputArea([o.Create("class","input"),o.Create("rows","20")],bv),l.Element("hr",[],[]),l.Element("h4",[],[l.TextNode("Result")]),l.Element("div",[o.Create("class","output")],[l.BindView(function(bx){return l.Verbatim(bw(bx));},bv.get_View())])]));};g.Create$1=function(bu){return new m.New(false,n.New({$:2,$0:bu,$1:[]}),bu);};h.FailWith=function(bu){throw a.Error(bu);};h.KeyValue=function(bu){return[bu.K,bu.V];};i=b.Obj=bq.Class({Equals:function(bu){return this===bu;},GetHashCode:function(){return -1;}},null,i);k=j.attr=bq.Class({},i,k);g=f.Var=bq.Class({},i,g);g.New=bq.Ctor(function(){},g);l=f.Doc=bq.Class({},i,l);l.Element=function(bu,bv,bw){var bx,by;bx=o.Concat(bv);by=l.Concat(bw);return E.New(t.CreateElement(bu),bx,by);};l.InputArea=function(bu,bv){return l.InputInternal("textarea",function(){return u.append(bu,[v.Value(bv)]);});};l.Verbatim=function(bu){var bv;return l.Mk(C.MapTreeReduce(function(bw){return y.Equals(bw.nodeType,D.TEXT_NODE)?{$:5,$0:bw}:{$:1,$0:B.CreateElemNode(bw,w.EmptyAttr(),null)};},null,function(bw,bx){return{$:0,$0:bw,$1:bx};},(bv=br.parseHTML(bu),y.Equals(bv,null)?[]:bv)),x.Const());};l.RunById=function(bu,bv){var bw;bw=t.Doc().getElementById(bu);y.Equals(bw,null)?h.FailWith("invalid id: "+bu):l.Run(bw,bv);};l.Concat=function(bu){var bv;bv=C.ofSeqNonCopying(bu);return C.TreeReduce(l.Empty(),l.Append,bv);};l.TextNode=function(bu){return l.Mk({$:5,$0:t.CreateText(bu)},x.Const());};l.InputInternal=function(bu,bv){var bw;bw=t.CreateElement(bu);return E.New(bw,o.Concat(bv(bw)),l.Empty());};l.BindView=function(bu,bv){return l.EmbedView(x.Map(bu,bv));};l.Mk=function(bu,bv){return new l.New(bu,bv);};l.Run=function(bu,bv){l.LoadLocalTemplates$1();B.LinkElement(bu,bv.docNode);l.RunInPlace(false,bu,bv);};l.Empty=function(){return l.Mk(null,x.Const());};l.Append=function(bu,bv){return l.Mk({$:0,$0:bu.docNode,$1:bv.docNode},x.Map2Unit(bu.updates,bv.updates));};l.EmbedView=function(bu){var bv;bv=B.CreateEmbedNode();return l.Mk({$:2,$0:bv},x.Map(a.ignore,x.Bind(function(bw){B.UpdateEmbedNode(bv,bw.docNode);return bw.updates;},bu)));};l.LoadLocalTemplates$1=function(){if(!B.LocalTemplatesLoaded()){B.set_LocalTemplatesLoaded(true);l.LoadLocalTemplates("");}};l.RunInPlace=function(bu,bv,bw){var bx;bx=B.CreateRunState(bv,bw.docNode);x.Sink(U.get_UseAnimations()||V.BatchUpdatesEnabled()?W.StartProcessor(B.PerformAnimatedUpdate(bu,bx,bw.docNode)):function(){B.PerformSyncUpdate(bu,bx,bw.docNode);},bw.updates);};l.LoadLocalTemplates=function(bu){var bv;bv=B.LoadedTemplateFile("");bv.count>0?B.LoadedTemplates().set_Item(bu,bv):(function(){var bw,bx,by,bz;while(true){bw=a.document.querySelector("[ws-template]");if(y.Equals(bw,null)){bx=a.document.querySelector("[ws-children-template]");if(y.Equals(bx,null))return null;else{by=bx.getAttribute("ws-children-template");bx.removeAttribute("ws-children-template");l.PrepareTemplate(bu,{$:1,$0:by},function(bA){return function(){return t.ChildrenArray(bA);};}(bx));}}else{bz=bw.getAttribute("ws-template");l.PrepareSingleTemplate(bu,{$:1,$0:bz},bw);}}}(),B.LoadedTemplates().set_Item("",B.LoadedTemplateFile(bu)));};l.PrepareTemplate=function(bu,bv,bw){var bx,by,bz,bA,bB;if(!B.LoadedTemplateFile(bu).ContainsKey(bv==null?"":bv.$0)){bx=bw();for(by=0,bz=bx.length-1;by<=bz;by++){bA=A.get(bx,by);bB=bA.parentNode;y.Equals(bB,null)?void 0:bB.removeChild(bA);}l.PrepareTemplateStrict(bu,bv,bx,null);}};l.PrepareSingleTemplate=function(bu,bv,bw){var bx,by,bz;bw.removeAttribute("ws-template");bx=bw.getAttribute("ws-replace");bx===null?void 0:(bw.removeAttribute("ws-replace"),by=bw.parentNode,y.Equals(by,null)?void 0:(bz=a.document.createElement(bw.tagName),bz.setAttribute("ws-replace",bx),by.replaceChild(bz,bw)));l.PrepareTemplateStrict(bu,bv,[bw],null);};l.PrepareTemplateStrict=function(bu,bv,bw,bx){var by,bz;function bA(bM){var bO,bP,bQ,bR,bS,bT,bU,bV;function bN(bW){var bX;bX=bM.getAttribute(bW);bX===null?void 0:bM.setAttribute(bW,bX.toLowerCase());}bO=bM.attributes;bP=[];bQ=[];bR=[];for(bS=0,bT=bO.length-1;bS<=bT;bS++){bU=bO.item(bS);$.StartsWith(bU.nodeName,"ws-on")&&bU.nodeName!=="ws-onafterrender"&&bU.nodeName!=="ws-on"?(bP.push(bU.nodeName),bQ.push(_.string(bU.nodeName,{$:1,$0:"ws-on".length},null)+":"+bU.nodeValue.toLowerCase())):!$.StartsWith(bU.nodeName,"ws-")&&(new a.RegExp(B.TextHoleRE())).test(bU.nodeValue)?(bU.nodeValue=(bV=new a.RegExp(B.TextHoleRE(),"g"),bU.nodeValue.replace(bV,function(bW,bX){return"${"+bX.toLowerCase()+"}";})),bR.push(bU.nodeName)):void 0;}!(bQ.length==0)?bM.setAttribute("ws-on",$.concat(" ",bQ)):void 0;!(bR.length==0)?bM.setAttribute("ws-attr-holes",$.concat(" ",bR)):void 0;bN("ws-hole");bN("ws-replace");bN("ws-attr");bN("ws-onafterrender");bN("ws-var");A.iter(function(bW){bM.removeAttribute(bW);},bP);}function bB(bM){var bN,bO,bP,bQ,bR,bS;bN=null;bO=0;bQ=bM.textContent;bR=new a.RegExp(B.TextHoleRE(),"g");while(bN=bR.exec(bQ),bN!==null){bM.parentNode.insertBefore(a.document.createTextNode(_.string(bQ,{$:1,$0:bO},{$:1,$0:bR.lastIndex-A.get(bN,0).length-1})),bM);bO=bR.lastIndex;bS=a.document.createElement("span");bS.setAttribute("ws-replace",A.get(bN,1).toLowerCase());bM.parentNode.insertBefore(bS,bM);}bR.lastIndex=0;bM.textContent=_.string(bQ,{$:1,$0:bO},null);}function bC(bM,bN){function bO(bP){t.IterSelector(bM,"["+bP+"]",function(bQ){var bR,bS;bR=(bS=null,[bN.TryGetValue(bQ.getAttribute(bP).toLowerCase(),{get:function(){return bS;},set:function(bT){bS=bT;}}),bS]);bR[0]?bQ.setAttribute(bP,bR[1]):void 0;});}bO("ws-hole");bO("ws-replace");bO("ws-attr");bO("ws-onafterrender");bO("ws-var");t.IterSelector(bM,"[ws-on]",function(bP){bP.setAttribute("ws-on",$.concat(" ",A.map(function(bQ){var bR,bS,bT;bR=$.SplitChars(bQ,[":"],1);bS=(bT=null,[bN.TryGetValue(A.get(bR,1),{get:function(){return bT;},set:function(bU){bT=bU;}}),bT]);return bS[0]?A.get(bR,0)+":"+bS[1]:bQ;},$.SplitChars(bP.getAttribute("ws-on"),[" "],1))));});return t.IterSelector(bM,"[ws-attr-holes]",function(bP){var bQ,bR,bS;bQ=$.SplitChars(bP.getAttribute("ws-attr-holes"),[" "],1);for(bR=0,bS=bQ.length-1;bR<=bS;bR++)(function(){var bT;function bU(bV,bW){var bX;bX=h.KeyValue(bW);return bV.replace(new a.RegExp("\\${"+bX[0]+"}","ig"),"${"+bX[1]+"}");}bT=A.get(bQ,bR);return bP.setAttribute(bT,(((bq.Curried3(u.fold))(bU))(bP.getAttribute(bT)))(bN));}());});}function bD(bM,bN){var bO,bP,bQ,bR,bS;bA(bN);bO=bN.nodeName.toLowerCase();bP=bM.querySelector("[ws-attr="+bO+"]");if(y.Equals(bP,null))return bs.warn("Filling non-existent attr hole",bO);else{bP.removeAttribute("ws-attr");for(bQ=0,bR=bN.attributes.length-1;bQ<=bR;bQ++){bS=bN.attributes.item(bQ);bS.name==="class"&&bP.hasAttribute("class")?bP.setAttribute("class",bP.getAttribute("class")+" "+bS.nodeValue):bP.setAttribute(bS.name,bS.nodeValue);}return;}}function bE(bM,bN){function bO(bP){t.IterSelector(bM,"["+bP+"]",function(bQ){if(!bN.Contains(bQ.getAttribute(bP)))bQ.removeAttribute(bP);});}bO("ws-attr");bO("ws-onafterrender");bO("ws-var");t.IterSelector(bM,"[ws-hole]",function(bP){if(!bN.Contains(bP.getAttribute("ws-hole"))){bP.removeAttribute("ws-hole");while(bP.hasChildNodes())bP.removeChild(bP.lastChild);}});t.IterSelector(bM,"[ws-replace]",function(bP){if(!bN.Contains(bP.getAttribute("ws-replace")))bP.parentNode.removeChild(bP);});t.IterSelector(bM,"[ws-on]",function(bP){bP.setAttribute("ws-on",$.concat(" ",A.filter(function(bQ){return bN.Contains(A.get($.SplitChars(bQ,[":"],1),1));},$.SplitChars(bP.getAttribute("ws-on"),[" "],1))));});return t.IterSelector(bM,"[ws-attr-holes]",function(bP){var bQ,bR,bS,bT,bU;bQ=$.SplitChars(bP.getAttribute("ws-attr-holes"),[" "],1);for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=A.get(bQ,bR);bP.setAttribute(bT,(bU=new a.RegExp(B.TextHoleRE(),"g"),bP.getAttribute(bT).replace(bU,function(bV,bW){return bN.Contains(bW)?bV:"";})));}});}function bF(bM,bN){var bO;bO=bM.querySelector("[ws-replace]");return y.Equals(bO,null)?(bs.warn("Filling non-existent text hole",bv),null):(bO.parentNode.replaceChild(new a.Text(bN),bO),{$:1,$0:bO.getAttribute("ws-replace")});}function bG(bM,bN,bO){while(true)if(bM.hasChildNodes())bO=bN.insertBefore(bM.lastChild,bO);else return null;}function bH(bM,bN,bO){var bP,bQ,bR,bS,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd;function bT(ce){}while(true)switch(bM){case 0:bU=_.string(bN.nodeName,{$:1,$0:3},null).toLowerCase();bV=(bP=bU.indexOf("."),bP===-1?[bu,bU]:[_.string(bU,null,{$:1,$0:bP-1}),_.string(bU,{$:1,$0:bP+1},null)]);bW=bV[1];bX=bV[0];if(!B.LoadedTemplates().ContainsKey(bX))return bs.warn("Instantiating non-loaded template",bW);else{bY=B.LoadedTemplates().get_Item(bX);if(!bY.ContainsKey(bW))return bs.warn("Instantiating non-loaded template",bW);else{bZ=bY.get_Item(bW);b0=bZ.cloneNode(true);b1=new _4.New$3();b2=new Z.New$5();b3=bN.attributes;for(b4=0,b5=b3.length-1;b4<=b5;b4++){b6=b3.item(b4).name.toLowerCase();b2.set_Item(b6,(b7=b3.item(b4).nodeValue,b7===""?b6:b7.toLowerCase()));!b1.Add(b6)?bs.warn("Hole mapped twice",b6):void 0;}for(b8=0,b9=bN.childNodes.length-1;b8<=b9;b8++){b_=bN.childNodes[b8];y.Equals(b_.nodeType,D.ELEMENT_NODE)?!b1.Add(b_.nodeName.toLowerCase())?bs.warn("Hole filled twice",bW):void 0:void 0;}b$=bN.childNodes.length===1&&y.Equals(bN.firstChild.nodeType,D.TEXT_NODE);if(b$){bR=bF(b0,bN.firstChild.textContent);((function(ce){return function(cf){if(cf!=null)ce(cf.$0);};}((bS=function(ce){return function(cf){return ce.Add(cf);};}(b1),function(ce){return bT(bS(ce));})))(bR));}bE(b0,b1);if(!b$){for(ca=0,cb=bN.childNodes.length-1;ca<=cb;ca++){cc=bN.childNodes[ca];y.Equals(cc.nodeType,D.ELEMENT_NODE)?cc.hasAttributes()?bD(b0,cc):bI(b0,cc):void 0;}}bC(b0,b2);(((function(ce){function cf(cg,ch){return bG(ce,cg,ch);}return function(cg){return function(ch){return cf(cg,ch);};};}(b0))(bN.parentNode))(bN));bN.parentNode.removeChild(bN);return;}}break;case 1:if(bO!==null){cd=bO.nextSibling;if(y.Equals(bO.nodeType,D.TEXT_NODE))bB(bO);else if(y.Equals(bO.nodeType,D.ELEMENT_NODE))bK(bO);bO=cd;}else return null;break;}}function bI(bM,bN){var bO,bQ,bR;function bP(bS,bT){var bU,bV,bW;if(bQ==="title"&&bN.hasChildNodes()){bU=br.parseHTML(bN.textContent);bN.removeChild(bN.firstChild);for(bV=0,bW=bU.length-1;bV<=bW;bV++)bN.appendChild(A.get(bU,bV));}else null;bK(bN);return bG(bN,bS,bT);}bQ=bN.nodeName.toLowerCase();t.IterSelector(bM,"[ws-attr-holes]",function(bS){var bT,bU,bV,bW,bX;bT=$.SplitChars(bS.getAttribute("ws-attr-holes"),[" "],1);for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=A.get(bT,bU);bS.setAttribute(bW,(bX=new a.RegExp("\\${"+bQ+"}","ig"),bS.getAttribute(bW).replace(bX,bN.textContent)));}});bR=bM.querySelector("[ws-hole="+bQ+"]");if(y.Equals(bR,null)){bO=bM.querySelector("[ws-replace="+bQ+"]");return y.Equals(bO,null)?null:(bP(bO.parentNode,bO),void bO.parentNode.removeChild(bO));}else{while(bR.hasChildNodes())bR.removeChild(bR.lastChild);bR.removeAttribute("ws-hole");return bP(bR,null);}}function bJ(bM){return bH(0,bM);}function bK(bM){var bN,bO;if($.StartsWith(bM.nodeName.toLowerCase(),"ws-")&&!bM.hasAttribute("ws-template"))bJ(bM);else{bA(bM);bN=bM.getAttribute("ws-template");if(bN===null){bO=bM.getAttribute("ws-children-template");if(bO===null)bL(bM,bM.firstChild);else{bM.removeAttribute("ws-children-template");l.PrepareTemplate(bu,{$:1,$0:bO},function(){return t.ChildrenArray(bM);});while(bM.hasChildNodes())bM.removeChild(bM.lastChild);}}else l.PrepareSingleTemplate(bu,{$:1,$0:bN},bM);}}function bL(bM,bN){return bH(1,bM,bN);}by=bx!=null&&bx.$==1?bx.$0:l.FakeRoot(bw);bz=(bv==null?"":bv.$0).toLowerCase();B.LoadedTemplateFile(bu).set_Item(bz,by);A.length(bw)>0?bL(by,A.get(bw,0)):void 0;};l.FakeRoot=function(bu){var bv,bw,bx;bv=a.document.createElement("div");for(bw=0,bx=bu.length-1;bw<=bx;bw++)bv.appendChild(A.get(bu,bw));return bv;};l.New=bq.Ctor(function(bu,bv){this.docNode=bu;this.updates=bv;},l);m=f.ConcreteVar=bq.Class({get_View:function(){return this.view;},UpdateMaybe:function(bu){var bv;bv=bu(this.Get());bv!=null&&bv.$==1?this.Set(bv.$0):void 0;},Get:function(){return this.current;},Set:function(bu){if(this.isConst)(function(bv){return bv("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bv){bs.log(bv);}));else{n.Obsolete(this.snap);this.current=bu;this.snap=n.New({$:2,$0:bu,$1:[]});}}},g,m);m.New=bq.Ctor(function(bu,bv,bw){var bx;bx=this;g.New.call(this);this.isConst=bu;this.current=bw;this.snap=bv;this.view=function(){return bx.snap;};this.id=s.Int();},m);n.Map=function(bu,bv){var bw,bx;bw=bv.s;return bw!=null&&bw.$==0?n.New({$:0,$0:bu(bw.$0)}):(bx=n.New({$:3,$0:[],$1:[]}),(n.When(bv,function(by){n.MarkDone(bx,bv,bu(by));},bx),bx));};n.Map2Unit=function(bu,bv){var bw,bx,by;function bz(){var bA,bB,bC;if(!(bA=by.s,bA!=null&&bA.$==0||bA!=null&&bA.$==2)){bB=n.ValueAndForever(bu);bC=n.ValueAndForever(bv);bB!=null&&bB.$==1?bC!=null&&bC.$==1?bB.$0[1]&&bC.$0[1]?n.MarkForever(by,null):n.MarkReady(by,null):void 0:void 0;}}bw=bu.s;bx=bv.s;return bw!=null&&bw.$==0?bx!=null&&bx.$==0?n.New({$:0,$0:null}):bv:bx!=null&&bx.$==0?bu:(by=n.New({$:3,$0:[],$1:[]}),(n.When(bu,bz,by),n.When(bv,bz,by),by));};n.Copy=function(bu){var bv,bw,bx;bv=bu.s;return bv==null?bu:bv!=null&&bv.$==2?(bw=n.New({$:2,$0:bv.$0,$1:[]}),(n.WhenObsolete(bu,bw),bw)):bv!=null&&bv.$==3?(bx=n.New({$:3,$0:[],$1:[]}),(n.When(bu,function(by){n.MarkDone(bx,bu,by);},bx),bx)):bu;};n.WhenObsoleteRun=function(bu,bv){var bw;bw=bu.s;bw==null?bv():bw!=null&&bw.$==2?bw.$1.push(bv):bw!=null&&bw.$==3?bw.$1.push(bv):void 0;};n.When=function(bu,bv,bw){var bx;bx=bu.s;bx==null?n.Obsolete(bw):bx!=null&&bx.$==2?(n.EnqueueSafe(bx.$1,bw),bv(bx.$0)):bx!=null&&bx.$==3?(bx.$0.push(bv),n.EnqueueSafe(bx.$1,bw)):bv(bx.$0);};n.MarkDone=function(bu,bv,bw){var bx;if(bx=bv.s,bx!=null&&bx.$==0)n.MarkForever(bu,bw);else n.MarkReady(bu,bw);};n.WhenRun=function(bu,bv,bw){var bx;bx=bu.s;bx==null?bw():bx!=null&&bx.$==2?(bx.$1.push(bw),bv(bx.$0)):bx!=null&&bx.$==3?(bx.$0.push(bv),bx.$1.push(bw)):bv(bx.$0);};n.ValueAndForever=function(bu){var bv;bv=bu.s;return bv!=null&&bv.$==0?{$:1,$0:[bv.$0,true]}:bv!=null&&bv.$==2?{$:1,$0:[bv.$0,false]}:null;};n.MarkForever=function(bu,bv){var bw,bx,by,bz;bw=bu.s;if(bw!=null&&bw.$==3){bu.s={$:0,$0:bv};bx=bw.$0;for(by=0,bz=A.length(bx)-1;by<=bz;by++)(A.get(bx,by))(bv);}else void 0;};n.MarkReady=function(bu,bv){var bw,bx,by,bz;bw=bu.s;if(bw!=null&&bw.$==3){bu.s={$:2,$0:bv,$1:bw.$1};bx=bw.$0;for(by=0,bz=A.length(bx)-1;by<=bz;by++)(A.get(bx,by))(bv);}else void 0;};n.WhenObsolete=function(bu,bv){var bw;bw=bu.s;bw==null?n.Obsolete(bv):bw!=null&&bw.$==2?n.EnqueueSafe(bw.$1,bv):bw!=null&&bw.$==3?n.EnqueueSafe(bw.$1,bv):void 0;};n.Join=function(bu){var bv;bv=n.New({$:3,$0:[],$1:[]});n.When(bu,function(bw){var bx;bx=bw();n.When(bx,function(by){var bz,bA;if((bz=bx.s,bz!=null&&bz.$==0)&&(bA=bu.s,bA!=null&&bA.$==0))n.MarkForever(bv,by);else n.MarkReady(bv,by);},bv);},bv);return bv;};n.EnqueueSafe=function(bu,bv){var bw,bx,by,bz;bu.push(bv);if(bu.length%20===0){bw=bu.slice(0);bf.Clear(bu);for(bx=0,by=A.length(bw)-1;bx<=by;bx++){bz=A.get(bw,bx);typeof bz=="object"?function(bA){if(bA.s)bu.push(bA);}(bz):function(bA){bu.push(bA);}(bz);}}else void 0;};o=f.AttrProxy=bq.Class({},null,o);o.Create=function(bu,bv){return w.Static(function(bw){t.SetAttr(bw,bu,bv);});};o.Concat=function(bu){var bv;bv=C.ofSeqNonCopying(bu);return C.TreeReduce(w.EmptyAttr(),o.Append,bv);};o.Append=function(bu,bv){return w.AppendTree(bu,bv);};q.NewFromSeq=function(bu){var bv,bw,bx;bv={};bw=F.Get(bu);try{while(bw.MoveNext()){bx=bw.Current();bv[bx[0]]=bx[1];}}finally{if("Dispose"in bw)bw.Dispose();}return bv;};s.Int=function(){s.set_counter(s.counter()+1);return s.counter();};s.set_counter=function(bu){L.$cctor();L.counter=bu;};s.counter=function(){L.$cctor();return L.counter;};t.CreateElement=function(bu){return t.Doc().createElement(bu);};t.SetAttr=function(bu,bv,bw){bu.setAttribute(bv,bw);};t.Doc=function(){K.$cctor();return K.Doc;};t.CreateText=function(bu){return t.Doc().createTextNode(bu);};t.ChildrenArray=function(bu){var bv,bw,bx;bv=[];for(bw=0,bx=bu.childNodes.length-1;bw<=bx;bw++)bv.push(bu.childNodes[bw]);return bv;};t.InsertAt=function(bu,bv,bw){var bx;if(!(bw.parentNode===bu&&bv===(bx=bw.nextSibling,y.Equals(bx,null)?null:bx)))bu.insertBefore(bw,bv);};t.IterSelector=function(bu,bv,bw){var bx,by,bz;bx=bu.querySelectorAll(bv);for(by=0,bz=bx.length-1;by<=bz;by++)bw(bx[by]);};t.RemoveNode=function(bu,bv){if(bv.parentNode===bu)bu.removeChild(bv);};u.append=function(bu,bv){return{GetEnumerator:function(){var bw,bx;bw=F.Get(bu);bx=[true];return new G.New(bw,null,function(by){var bz;return by.s.MoveNext()?(by.c=by.s.Current(),true):(bz=by.s,!y.Equals(bz,null)?bz.Dispose():void 0,by.s=null,bx[0]&&(bx[0]=false,by.s=F.Get(bv),by.s.MoveNext()?(by.c=by.s.Current(),true):(by.s.Dispose(),by.s=null,false)));},function(by){var bz;bz=by.s;!y.Equals(bz,null)?bz.Dispose():void 0;});}};};u.iter=function(bu,bv){var bw;bw=F.Get(bv);try{while(bw.MoveNext())bu(bw.Current());}finally{if("Dispose"in bw)bw.Dispose();}};u.fold=function(bu,bv,bw){var bx,by;bx=bv;by=F.Get(bw);try{while(by.MoveNext())bx=bu(bx,by.Current());return bx;}finally{if("Dispose"in by)by.Dispose();}};u.map=function(bu,bv){return{GetEnumerator:function(){var bw;bw=F.Get(bv);return new G.New(null,null,function(bx){return bw.MoveNext()&&(bx.c=bu(bw.Current()),true);},function(){bw.Dispose();});}};};u.max=function(bu){var bv,bw,bx;bv=F.Get(bu);try{if(!bv.MoveNext())u.seqEmpty();bw=bv.Current();while(bv.MoveNext()){bx=bv.Current();y.Compare(bx,bw)===1?bw=bx:void 0;}return bw;}finally{if("Dispose"in bv)bv.Dispose();}};u.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};v.Value=function(bu){function bv(bw){return{$:1,$0:bw};}return v.CustomValue(bu,a.id,function(bw){return bv(a.id(bw));});};v.CustomValue=function(bu,bv,bw){return v.CustomVar(bu,function(bx,by){bx.value=bv(by);},function(bx){return bw(bx.value);});};v.CustomVar=function(bu,bv,bw){function bx(bz,bA){return bu.UpdateMaybe(function(bB){var bC,bD;bC=bw(bz);return bC!=null&&bC.$==1&&(!y.Equals(bC.$0,bB)&&(bD=[bC,bC.$0],true))?bD[0]:null;});}function by(bz,bA){var bB,bC;bB=bw(bz);return bB!=null&&bB.$==1&&(y.Equals(bB.$0,bA)&&(bC=bB.$0,true))?null:bv(bz,bA);}return o.Concat([v.Handler("change",function(bz){return function(bA){return bx(bz,bA);};}),v.Handler("input",function(bz){return function(bA){return bx(bz,bA);};}),v.Handler("keypress",function(bz){return function(bA){return bx(bz,bA);};}),v.DynamicCustom(function(bz){return function(bA){return by(bz,bA);};},bu.get_View())]);};v.Handler=function(bu,bv){return w.Static(function(bw){bw.addEventListener(bu,function(bx){return(bv(bw))(bx);},false);});};v.DynamicCustom=function(bu,bv){return w.Dynamic(bv,bu);};w.Static=function(bu){return new o({$:3,$0:bu});};w.Insert=function(bu,bv){var bw,bx,by;function bz(bA){if(!(bA===null))if(bA!=null&&bA.$==1)bw.push(bA.$0);else if(bA!=null&&bA.$==2){bz(bA.$0);bz(bA.$1);}else if(bA!=null&&bA.$==3)bA.$0(bu);else if(bA!=null&&bA.$==4)bx.push(bA.$0);}bw=[];bx=[];bz(bv);by=bw.slice(0);return S.New(bu,w.Flags(bv),by,bx.length===0?null:{$:1,$0:function(bA){u.iter(function(bB){bB(bA);},bx);}});};w.EmptyAttr=function(){T.$cctor();return T.EmptyAttr;};w.AppendTree=function(bu,bv){var bw;return bu===null?bv:bv===null?bu:(bw=new o({$:2,$0:bu,$1:bv}),(w.SetFlags(bw,w.Flags(bu)|w.Flags(bv)),bw));};w.Updates=function(bu){return C.MapTreeReduce(function(bv){return bv.NChanged();},x.Const(),x.Map2Unit,bu.DynNodes);};w.Flags=function(bu){return bu!==null&&bu.hasOwnProperty("flags")?bu.flags:0;};w.SetFlags=function(bu,bv){bu.flags=bv;};w.Dynamic=function(bu,bv){return new o({$:1,$0:new _8.New(bu,bv)});};w.HasChangeAnim=function(bu){var bv;bv=4;return(bu.DynFlags&bv)===bv;};w.GetChangeAnim=function(bu){return w.GetAnim(bu,function(bv,bw){return bv.NGetChangeAnim(bw);});};w.HasEnterAnim=function(bu){var bv;bv=1;return(bu.DynFlags&bv)===bv;};w.GetEnterAnim=function(bu){return w.GetAnim(bu,function(bv,bw){return bv.NGetEnterAnim(bw);});};w.HasExitAnim=function(bu){var bv;bv=2;return(bu.DynFlags&bv)===bv;};w.GetExitAnim=function(bu){return w.GetAnim(bu,function(bv,bw){return bv.NGetExitAnim(bw);});};w.GetAnim=function(bu,bv){return U.Concat(A.map(function(bw){return bv(bw,bu.DynElem);},bu.DynNodes));};w.Sync=function(bu,bv){A.iter(function(bw){bw.NSync(bu);},bv.DynNodes);};x=f.View=bq.Class({},null,x);y.Equals=function(bu,bv){var bw,bx,by,bz;if(bu===bv)return true;else{bw=typeof bu;if(bw=="object"){if(bu===null||bu===void 0||bv===null||bv===void 0)return false;else if("Equals"in bu)return bu.Equals(bv);else if(bu instanceof a.Array&&bv instanceof a.Array)return y.arrayEquals(bu,bv);else if(bu instanceof a.Date&&bv instanceof a.Date)return y.dateEquals(bu,bv);else{bx=[true];for(var bA in bu)if(function(bB){bx[0]=!bu.hasOwnProperty(bB)||bv.hasOwnProperty(bB)&&y.Equals(bu[bB],bv[bB]);return!bx[0];}(bA))break;if(bx[0]){for(var bB in bv)if(function(bC){bx[0]=!bv.hasOwnProperty(bC)||bu.hasOwnProperty(bC);return!bx[0];}(bB))break;}return bx[0];}}else return bw=="function"&&("$Func"in bu?bu.$Func===bv.$Func&&bu.$Target===bv.$Target:"$Invokes"in bu&&"$Invokes"in bv&&y.arrayEquals(bu.$Invokes,bv.$Invokes));}};y.arrayEquals=function(bu,bv){var bw,bx;if(A.length(bu)===A.length(bv)){bw=true;bx=0;while(bw&&bx<A.length(bu)){!y.Equals(A.get(bu,bx),A.get(bv,bx))?bw=false:void 0;bx=bx+1;}return bw;}else return false;};y.dateEquals=function(bu,bv){return bu.getTime()===bv.getTime();};y.Hash=function(bu){var bv;bv=typeof bu;return bv=="function"?0:bv=="boolean"?bu?1:0:bv=="number"?bu:bv=="string"?y.hashString(bu):bv=="object"?bu==null?0:bu instanceof a.Array?y.hashArray(bu):y.hashObject(bu):0;};y.hashString=function(bu){var bv,bw,bx;if(bu===null)return 0;else{bv=5381;for(bw=0,bx=bu.length-1;bw<=bx;bw++)bv=y.hashMix(bv,bu[bw].charCodeAt());return bv;}};y.hashArray=function(bu){var bv,bw,bx;bv=-34948909;for(bw=0,bx=A.length(bu)-1;bw<=bx;bw++)bv=y.hashMix(bv,y.Hash(A.get(bu,bw)));return bv;};y.hashObject=function(bu){var bv,bw;if("GetHashCode"in bu)return bu.GetHashCode();else{bv=[0];for(var bx in bu)if(function(by){bv[0]=y.hashMix(y.hashMix(bv[0],y.hashString(by)),y.Hash(bu[by]));return false;}(bx))break;return bv[0];}};y.Compare=function(bu,bv){var bw,bx,by,bz,bA,bB;if(bu===bv)return 0;else{bx=typeof bu;switch(bx=="function"?1:bx=="boolean"?2:bx=="number"?2:bx=="string"?2:bx=="object"?3:0){case 0:return typeof bv=="undefined"?0:-1;break;case 1:return h.FailWith("Cannot compare function values.");break;case 2:return bu<bv?-1:1;break;case 3:if(bu===null)by=-1;else if(bv===null)by=1;else if("CompareTo"in bu)by=bu.CompareTo(bv);else if("CompareTo0"in bu)by=bu.CompareTo0(bv);else if(bu instanceof a.Array&&bv instanceof a.Array)by=y.compareArrays(bu,bv);else if(bu instanceof a.Date&&bv instanceof a.Date)by=y.compareDates(bu,bv);else{bz=[0];for(var bC in bu)if(function(bD){return!bu.hasOwnProperty(bD)?false:!bv.hasOwnProperty(bD)?(bz[0]=1,true):(bz[0]=y.Compare(bu[bD],bv[bD]),bz[0]!==0);}(bC))break;if(bz[0]===0){for(var bD in bv)if(function(bE){return!bv.hasOwnProperty(bE)?false:!bu.hasOwnProperty(bE)&&(bz[0]=-1,true);}(bD))break;}by=bz[0];}return by;break;}}};y.hashMix=function(bu,bv){return(bu<<5)+bu+bv;};y.compareArrays=function(bu,bv){var bw,bx;if(A.length(bu)<A.length(bv))return -1;else if(A.length(bu)>A.length(bv))return 1;else{bw=0;bx=0;while(bw===0&&bx<A.length(bu)){bw=y.Compare(A.get(bu,bx),A.get(bv,bx));bx=bx+1;}return bw;}};y.compareDates=function(bu,bv){return y.Compare(bu.getTime(),bv.getTime());};A.get=function(bu,bv){A.checkBounds(bu,bv);return bu[bv];};A.length=function(bu){return bu.dims===2?bu.length*bu.length:bu.length;};A.checkBounds=function(bu,bv){if(bv<0||bv>=bu.length)h.FailWith("Index was outside the bounds of the array.");};A.set=function(bu,bv,bw){A.checkBounds(bu,bv);bu[bv]=bw;};B.CreateElemNode=function(bu,bv,bw){var bx;B.LinkElement(bu,bw);bx=w.Insert(bu,bv);return H.New(bx,bw,null,bu,s.Int(),bq.GetOptional(bx.OnAfterRender));};B.LinkElement=function(bu,bv){B.InsertDoc(bu,bv,null);};B.CreateEmbedNode=function(){return{Current:null,Dirty:false};};B.UpdateEmbedNode=function(bu,bv){bu.Current=bv;bu.Dirty=true;};B.InsertDoc=function(bu,bv,bw){var bx;return bv!=null&&bv.$==1?B.InsertNode(bu,bv.$0.El,bw):bv!=null&&bv.$==2?(bx=bv.$0,(bx.Dirty=false,B.InsertDoc(bu,bx.Current,bw))):bv==null?bw:bv!=null&&bv.$==4?B.InsertNode(bu,bv.$0.Text,bw):bv!=null&&bv.$==5?B.InsertNode(bu,bv.$0,bw):bv!=null&&bv.$==6?A.foldBack(function(by,bz){return by.constructor===O?B.InsertDoc(bu,by,bz):B.InsertNode(bu,by,bz);},bv.$0.Els,bw):B.InsertDoc(bu,bv.$0,B.InsertDoc(bu,bv.$1,bw));};B.LocalTemplatesLoaded=function(){X.$cctor();return X.LocalTemplatesLoaded;};B.set_LocalTemplatesLoaded=function(bu){X.$cctor();X.LocalTemplatesLoaded=bu;};B.CreateRunState=function(bu,bv){return _1.New(_2.get_Empty(),B.CreateElemNode(bu,w.EmptyAttr(),bv));};B.PerformAnimatedUpdate=function(bu,bv,bw){var bx;return U.get_UseAnimations()?(bx=null,_6.Delay(function(){var by,bz,bA;by=_2.FindAll(bw);bz=B.ComputeChangeAnim(bv,by);bA=B.ComputeEnterAnim(bv,by);return _6.Bind(U.Play(U.Append(bz,B.ComputeExitAnim(bv,by))),function(){return _6.Bind(B.SyncElemNodesNextFrame(bu,bv),function(){return _6.Bind(U.Play(bA),function(){bv.PreviousNodes=by;return _6.Return(null);});});});})):B.SyncElemNodesNextFrame(bu,bv);};B.PerformSyncUpdate=function(bu,bv,bw){var bx;bx=_2.FindAll(bw);B.SyncElemNode(bu,bv.Top);bv.PreviousNodes=bx;};B.InsertNode=function(bu,bv,bw){t.InsertAt(bu,bw,bv);return bv;};B.LoadedTemplateFile=function(bu){var bv,bw,bx;bv=(bw=null,[B.LoadedTemplates().TryGetValue(bu,{get:function(){return bw;},set:function(by){bw=by;}}),bw]);return bv[0]?bv[1]:(bx=new Z.New$5(),(B.LoadedTemplates().set_Item(bu,bx),bx));};B.LoadedTemplates=function(){X.$cctor();return X.LoadedTemplates;};B.ComputeChangeAnim=function(bu,bv){var bw;function bx(by){return w.HasChangeAnim(by.Attr);}bw=function(by){return _2.Filter(bx,by);};return U.Concat(A.map(function(by){return w.GetChangeAnim(by.Attr);},_2.ToArray(_2.Intersect(bw(bu.PreviousNodes),bw(bv)))));};B.ComputeEnterAnim=function(bu,bv){return U.Concat(A.map(function(bw){return w.GetEnterAnim(bw.Attr);},_2.ToArray(_2.Except(bu.PreviousNodes,_2.Filter(function(bw){return w.HasEnterAnim(bw.Attr);},bv)))));};B.ComputeExitAnim=function(bu,bv){return U.Concat(A.map(function(bw){return w.GetExitAnim(bw.Attr);},_2.ToArray(_2.Except(bv,_2.Filter(function(bw){return w.HasExitAnim(bw.Attr);},bu.PreviousNodes)))));};B.SyncElemNodesNextFrame=function(bu,bv){function bw(bx){a.requestAnimationFrame(function(){B.SyncElemNode(bu,bv.Top);bx();});}return V.BatchUpdatesEnabled()?_6.FromContinuations(function(bx,by,bz){return bw.apply(null,[bx,by,bz]);}):(B.SyncElemNode(bu,bv.Top),_6.Return(null));};B.SyncElemNode=function(bu,bv){!bu?B.SyncElement(bv):void 0;B.Sync(bv.Children);B.AfterRender(bv);};B.SyncElement=function(bu){function bv(bw){function bx(by){var bz,bA;return by!=null&&by.$==0?bx(by.$0)||bx(by.$1):by!=null&&by.$==2?(bz=by.$0,bz.Dirty||bx(bz.Current)):by!=null&&by.$==6&&(bA=by.$0,bA.Dirty||A.exists(bv,bA.Holes));}return bx(bw.Children);}w.Sync(bu.El,bu.Attr);bv(bu)?B.DoSyncElement(bu):void 0;};B.Sync=function(bu){var bv,bw;if(bu!=null&&bu.$==1)B.SyncElemNode(false,bu.$0);else if(bu!=null&&bu.$==2)B.Sync(bu.$0.Current);else if(bu==null);else if(bu!=null&&bu.$==5);else if(bu!=null&&bu.$==4){bv=bu.$0;bv.Dirty?(bv.Text.nodeValue=bv.Value,bv.Dirty=false):void 0;}else if(bu!=null&&bu.$==6){bw=bu.$0;A.iter(function(bx){B.SyncElemNode(false,bx);},bw.Holes);A.iter(function(bx){w.Sync(bx[0],bx[1]);},bw.Attrs);B.AfterRender(bw);}else{B.Sync(bu.$0);B.Sync(bu.$1);}};B.AfterRender=function(bu){var bv;bv=bq.GetOptional(bu.Render);bv!=null&&bv.$==1?(bv.$0(bu.El),bq.SetOptional(bu,"Render",null)):void 0;};B.TextHoleRE=function(){X.$cctor();return X.TextHoleRE;};B.DoSyncElement=function(bu){var bv,bw,bx;function by(bz,bA){var bB,bC;return bz!=null&&bz.$==1?bz.$0.El:bz!=null&&bz.$==2?(bB=bz.$0,bB.Dirty?(bB.Dirty=false,B.InsertDoc(bv,bB.Current,bA)):by(bB.Current,bA)):bz==null?bA:bz!=null&&bz.$==4?bz.$0.Text:bz!=null&&bz.$==5?bz.$0:bz!=null&&bz.$==6?(bC=bz.$0,(bC.Dirty?bC.Dirty=false:void 0,A.foldBack(function(bD,bE){return bD.constructor===O?by(bD,bE):bD;},bC.Els,bA))):by(bz.$0,by(bz.$1,bA));}bv=bu.El;bi.Iter((bw=bu.El,function(bz){t.RemoveNode(bw,bz);}),bi.Except(bi.DocChildren(bu),bi.Children(bu.El,bq.GetOptional(bu.Delimiters))));by(bu.Children,(bx=bq.GetOptional(bu.Delimiters),bx!=null&&bx.$==1?bx.$0[1]:null));};C.MapTreeReduce=function(bu,bv,bw,bx){var by;function bz(bA,bB){var bC,bD;return bB<=0?bv:bB===1&&(bA>=0&&bA<by)?bu(A.get(bx,bA)):(bD=bB/2>>0,bw(bz(bA,bD),bz(bA+bD,bB-bD)));}by=A.length(bx);return bz(0,by);};C.ofSeqNonCopying=function(bu){var bv,bw;if(bu instanceof a.Array)return bu;else if(bu instanceof N)return A.ofList(bu);else if(bu===null)return[];else{bv=[];bw=F.Get(bu);try{while(bw.MoveNext())bv.push(bw.Current());return bv;}finally{if("Dispose"in bw)bw.Dispose();}}};C.TreeReduce=function(bu,bv,bw){var bx;function by(bz,bA){var bB,bC;return bA<=0?bu:bA===1&&(bz>=0&&bz<bx)?A.get(bw,bz):(bC=bA/2>>0,bv(by(bz,bC),by(bz+bC,bA-bC)));}bx=A.length(bw);return by(0,bx);};x.Const=function(bu){var bv;bv=n.New({$:0,$0:bu});return function(){return bv;};};x.Map=function(bu,bv){return x.CreateLazy(function(){return n.Map(bu,bv());});};x.Map2Unit=function(bu,bv){return x.CreateLazy(function(){return n.Map2Unit(bu(),bv());});};x.Bind=function(bu,bv){return x.Join(x.Map(bu,bv));};x.CreateLazy=function(bu){var bv;bv={c:null,o:bu};return function(){var bw,bx;bw=bv.c;return bw===null?(bw=bv.o(),bv.c=bw,(bx=bw.s,bx!=null&&bx.$==0)?bv.o=null:n.WhenObsoleteRun(bw,function(){bv.c=null;}),bw):bw;};};x.Sink=function(bu,bv){function bw(){n.WhenRun(bv(),bu,function(){_6.scheduler().Fork(bw);});}_6.scheduler().Fork(bw);};x.Join=function(bu){return x.CreateLazy(function(){return n.Join(bu());});};n.Obsolete=function(bu){var bv,bw,bx,by,bz;bw=bu.s;if(bw==null||(bw!=null&&bw.$==2?(bv=bw.$1,false):bw!=null&&bw.$==3?(bv=bw.$1,false):true))void 0;else{bu.s=null;for(bx=0,by=A.length(bv)-1;bx<=by;bx++){bz=A.get(bv,bx);typeof bz=="object"?function(bA){n.Obsolete(bA);}(bz):bz();}}};n.New=function(bu){return{s:bu};};E=f.Elt=bq.Class({},l,E);E.New=function(bu,bv,bw){var bx,by;bx=B.CreateElemNode(bu,bv,bw.docNode);by=P.Create(bw.updates);return new E.New$1({$:1,$0:bx},x.Map2Unit(w.Updates(bx.Attr),by.v),bu,by);};E.New$1=bq.Ctor(function(bu,bv,bw,bx){l.New.call(this,bu,bv);this.docNode$1=bu;this.updates$1=bv;this.elt=bw;this.rvUpdates=bx;},E);F.Get=function(bu){return bu instanceof a.Array?F.ArrayEnumerator(bu):y.Equals(typeof bu,"string")?F.StringEnumerator(bu):bu.GetEnumerator();};F.ArrayEnumerator=function(bu){return new G.New(0,null,function(bv){var bw;bw=bv.s;return bw<A.length(bu)&&(bv.c=A.get(bu,bw),bv.s=bw+1,true);},void 0);};F.StringEnumerator=function(bu){return new G.New(0,null,function(bv){var bw;bw=bv.s;return bw<bu.length&&(bv.c=bu[bw],bv.s=bw+1,true);},void 0);};F.Get0=function(bu){return bu instanceof a.Array?F.ArrayEnumerator(bu):y.Equals(typeof bu,"string")?F.StringEnumerator(bu):"GetEnumerator0"in bu?bu.GetEnumerator0():bu.GetEnumerator();};G=F.T=bq.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},i,G);G.New=bq.Ctor(function(bu,bv,bw,bx){this.s=bu;this.c=bv;this.n=bw;this.d=bx;},G);H=f.DocElemNode=bq.Class({Equals:function(bu){return this.ElKey===bu.ElKey;},GetHashCode:function(){return this.ElKey;}},null,H);H.New=function(bu,bv,bw,bx,by,bz){var bA;return new H((bA={Attr:bu,Children:bv,El:bx,ElKey:by},(bq.SetOptional(bA,"Delimiters",bw),bq.SetOptional(bA,"Render",bz),bA)));};J.GetFieldValues=function(bu){var bv,bw;bv=[];for(var bx in bu)bv.push(bu[bx]);return bv;};K.$cctor=function(){K.$cctor=a.ignore;K.Doc=a.document;};L.$cctor=function(){L.$cctor=a.ignore;L.counter=0;};N=M.T=bq.Class({GetEnumerator:function(){return new G.New(this,null,function(bu){var bv;bv=bu.s;return bv.$==0?false:(bu.c=bv.$0,bu.s=bv.$1,true);},void 0);},GetEnumerator0:function(){return F.Get(this);}},null,N);A.ofList=function(bu){var bv,bw;bw=[];bv=bu;while(!(bv.$==0)){bw.push(M.head(bv));bv=M.tail(bv);}return bw;};A.foldBack=function(bu,bv,bw){var bx,by,bz,bA,bB;bx=bw;bz=bv.length;for(bA=1,bB=bz;bA<=bB;bA++)bx=bu(bv[bz-bA],bx);return bx;};A.iter=function(bu,bv){var bw,bx;for(bw=0,bx=bv.length-1;bw<=bx;bw++)bu(bv[bw]);};A.map=function(bu,bv){var bw,bx,by;bw=new a.Array(bv.length);for(bx=0,by=bv.length-1;bx<=by;bx++)bw[bx]=bu(bv[bx]);return bw;};A.tryPick=function(bu,bv){var bw,bx,by;bw=null;bx=0;while(bx<bv.length&&bw==null){by=bu(bv[bx]);by!=null&&by.$==1?bw=by:void 0;bx=bx+1;}return bw;};A.tryFindIndex=function(bu,bv){var bw,bx;bw=null;bx=0;while(bx<bv.length&&bw==null){bu(bv[bx])?bw={$:1,$0:bx}:void 0;bx=bx+1;}return bw;};A.exists=function(bu,bv){var bw,bx,by,bz;bw=false;bx=0;bz=A.length(bv);while(!bw&&bx<bz)if(bu(bv[bx]))bw=true;else bx=bx+1;return bw;};A.filter=function(bu,bv){var bw,bx,by;bw=[];for(bx=0,by=bv.length-1;bx<=by;bx++)if(bu(bv[bx]))bw.push(bv[bx]);return bw;};A.choose=function(bu,bv){var bw,bx,by,bz;bw=[];for(bx=0,by=bv.length-1;bx<=by;bx++){bz=bu(bv[bx]);bz==null?void 0:bw.push(bz.$0);}return bw;};A.create=function(bu,bv){var bw,bx,by;bw=new a.Array(bu);for(bx=0,by=bu-1;bx<=by;bx++)bw[bx]=bv;return bw;};A.concat=function(bu){return a.Array.prototype.concat.apply([],A.ofSeq(bu));};A.ofSeq=function(bu){var bv,bw;if(bu instanceof a.Array)return bu.slice();else if(bu instanceof N)return A.ofList(bu);else{bv=[];bw=F.Get(bu);try{while(bw.MoveNext())bv.push(bw.Current());return bv;}finally{if("Dispose"in bw)bw.Dispose();}}};A.pick=function(bu,bv){var bw;bw=A.tryPick(bu,bv);return bw==null?h.FailWith("KeyNotFoundException"):bw.$0;};A.init=function(bu,bv){var bw,bx,by;bu<0?h.FailWith("Negative size given."):null;bw=new a.Array(bu);for(bx=0,by=bu-1;bx<=by;bx++)bw[bx]=bv(bx);return bw;};A.forall=function(bu,bv){var bw,bx,by,bz;bw=true;bx=0;bz=A.length(bv);while(bw&&bx<bz)if(bu(bv[bx]))bx=bx+1;else bw=false;return bw;};P=f.Updates=bq.Class({},null,P);P.Create=function(bu){var bv;bv=null;bv=P.New(bu,null,function(){var bw;bw=bv.s;return bw===null?(bw=n.Copy(bv.c()),bv.s=bw,n.WhenObsoleteRun(bw,function(){bv.s=null;}),bw):bw;});return bv;};P.New=function(bu,bv,bw){return new P({c:bu,s:bv,v:bw});};S.New=function(bu,bv,bw,bx){var by;by={DynElem:bu,DynFlags:bv,DynNodes:bw};bq.SetOptional(by,"OnAfterRender",bx);return by;};T.$cctor=function(){T.$cctor=a.ignore;T.EmptyAttr=null;};U.get_UseAnimations=function(){return _3.UseAnimations();};U.Play=function(bu){var bv;bv=null;return _6.Delay(function(){return _6.Bind(U.Run(a.ignore,_3.Actions(bu)),function(){_3.Finalize(bu);return _6.Return(null);});});};U.Append=function(bu,bv){return{$:0,$0:_7.Append(bu.$0,bv.$0)};};U.Concat=function(bu){return{$:0,$0:_7.Concat(u.map(_3.List,bu))};};U.Run=function(bu,bv){var bw;function bx(by){function bz(bA,bB){var bC;bC=bB-bA;bv.Compute(bC);bu();return bC<=bw?void a.requestAnimationFrame(function(bD){bz(bA,bD);}):by();}a.requestAnimationFrame(function(bA){bz(bA,bA);});}bw=bv.Duration;return bw===0?_6.Zero():_6.FromContinuations(function(by,bz,bA){return bx.apply(null,[by,bz,bA]);});};U.get_Empty=function(){return{$:0,$0:_7.Empty()};};V.BatchUpdatesEnabled=function(){X.$cctor();return X.BatchUpdatesEnabled;};W.StartProcessor=function(bu){var bv;function bw(){var bx;bx=null;return _6.Delay(function(){return _6.Bind(bu,function(){var by;by=bv[0];return by===1?(bv[0]=0,_6.Zero()):by===2?(bv[0]=1,bw()):_6.Zero();});});}bv=[0];return function(){var bx;bx=bv[0];bx===0?(bv[0]=1,_6.Start(bw(),null)):bx===1?bv[0]=2:void 0;};};M.head=function(bu){return bu.$==1?bu.$0:M.listEmpty();};M.tail=function(bu){return bu.$==1?bu.$1:M.listEmpty();};M.listEmpty=function(){return h.FailWith("The input list was empty.");};X.$cctor=function(){X.$cctor=a.ignore;X.BatchUpdatesEnabled=true;X.LoadedTemplates=new Z.New$5();X.LocalTemplatesLoaded=false;X.TextHoleRE="\\${([^}]+)}";};Z=Y.Dictionary=bq.Class({set_Item:function(bu,bv){this.set(bu,bv);},TryGetValue:function(bu,bv){var bw,bx,by;bw=this;bx=this.data[this.hash(bu)];return bx&&(by=A.tryPick(function(bz){var bA;bA=h.KeyValue(bz);return bw.equals.apply(null,[bA[0],bu])?{$:1,$0:bA[1]}:null;},bx),by!=null&&by.$==1&&(bv.set(by.$0),true));},set:function(bu,bv){var bw,bx,by,bz;bw=this;bx=this.hash(bu);by=this.data[bx];by?(bz=A.tryFindIndex(function(bA){return bw.equals.apply(null,[(h.KeyValue(bA))[0],bu]);},by),bz==null?(this.count=this.count+1,by.push({K:bu,V:bv})):by[bz.$0]={K:bu,V:bv}):(this.count=this.count+1,this.data[bx]=new a.Array({K:bu,V:bv}));},ContainsKey:function(bu){var bv,bw;bv=this;bw=this.data[this.hash(bu)];return bw&&A.exists(function(bx){return bv.equals.apply(null,[(h.KeyValue(bx))[0],bu]);},bw);},get_Item:function(bu){return this.get(bu);},get:function(bu){var bv,bw;bv=this;bw=this.data[this.hash(bu)];return bw?A.pick(function(bx){var by;by=h.KeyValue(bx);return bv.equals.apply(null,[by[0],bu])?{$:1,$0:by[1]}:null;},bw):_9.notPresent();},GetEnumerator:function(){return F.Get0(this);},GetEnumerator0:function(){return F.Get0(A.concat(J.GetFieldValues(this.data)));}},i,Z);Z.New$5=bq.Ctor(function(){Z.New$6.call(this,[],y.Equals,y.Hash);},Z);Z.New$6=bq.Ctor(function(bu,bv,bw){var bx,by;this.equals=bv;this.hash=bw;this.count=0;this.data=[];bx=F.Get(bu);try{while(bx.MoveNext()){by=bx.Current();this.set(by.K,by.V);}}finally{if("Dispose"in bx)bx.Dispose();}},Z);_1.New=function(bu,bv){return{PreviousNodes:bu,Top:bv};};_2.get_Empty=function(){return{$:0,$0:new _4.New$3()};};_2.FindAll=function(bu){var bv;function bw(by){if(by!=null&&by.$==0){bw(by.$0);bw(by.$1);}else if(by!=null&&by.$==1)bx(by.$0);else if(by!=null&&by.$==2)bw(by.$0.Current);else if(by!=null&&by.$==6)A.iter(bx,by.$0.Holes);}function bx(by){bv.push(by);bw(by.Children);}bv=[];bw(bu);return{$:0,$0:new _4.New$2(bv)};};_2.Filter=function(bu,bv){return{$:0,$0:be.Filter(bu,bv.$0)};};_2.Intersect=function(bu,bv){return{$:0,$0:be.Intersect(bu.$0,bv.$0)};};_2.ToArray=function(bu){return be.ToArray(bu.$0);};_2.Except=function(bu,bv){return{$:0,$0:be.Except(bu.$0,bv.$0)};};_3.UseAnimations=function(){_5.$cctor();return _5.UseAnimations;};_3.Actions=function(bu){return _3.ConcatActions(A.choose(function(bv){return bv.$==1?{$:1,$0:bv.$0}:null;},_7.ToArray(bu.$0)));};_3.Finalize=function(bu){A.iter(function(bv){if(bv.$==0)bv.$0();},_7.ToArray(bu.$0));};_3.List=function(bu){return bu.$0;};_3.ConcatActions=function(bu){var bv,bw,bx,by;bv=C.ofSeqNonCopying(bu);bw=A.length(bv);return bw===0?_3.Const():bw===1?A.get(bv,0):(bx=u.max(u.map(function(bz){return bz.Duration;},bv)),(by=A.map(function(bz){return _3.Prolong(bx,bz);},bv),_3.Def(bx,function(bz){A.iter(function(bA){bA.Compute(bz);},by);})));};_3.Const=function(bu){return _3.Def(0,function(){return bu;});};_3.Prolong=function(bu,bv){var bw,bx,by;bw=bv.Compute;bx=bv.Duration;by=bm.Create(function(){return bv.Compute(bv.Duration);});return{Compute:function(bz){return bz>=bx?by.f():bw(bz);},Duration:bu};};_3.Def=function(bu,bv){return{Compute:bv,Duration:bu};};_4=Y.HashSet=bq.Class({Contains:function(bu){var bv;bv=this.data[this.hash(bu)];return bv==null?false:this.arrContains(bu,bv);},Add:function(bu){return this.add(bu);},arrContains:function(bu,bv){var bw,bx,by,bz;bw=true;bx=0;bz=bv.length;while(bw&&bx<bz)if(this.equals.apply(null,[bv[bx],bu]))bw=false;else bx=bx+1;return!bw;},add:function(bu){var bv,bw;bv=this.hash(bu);bw=this.data[bv];return bw==null?(this.data[bv]=[bu],this.count=this.count+1,true):this.arrContains(bu,bw)?false:(bw.push(bu),this.count=this.count+1,true);},IntersectWith:function(bu){var bv,bw,bx,by,bz;bv=new _4.New$4(bu,this.equals,this.hash);bw=bk.concat(this.data);for(bx=0,by=bw.length-1;bx<=by;bx++){bz=bw[bx];!bv.Contains(bz)?this.Remove(bz):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bu){var bv,bw,bx,by;bv=0;bw=bk.concat(this.data);for(bx=0,by=bw.length-1;bx<=by;bx++)A.set(bu,bx,bw[bx]);},ExceptWith:function(bu){var bv;bv=F.Get(bu);try{while(bv.MoveNext())this.Remove(bv.Current());}finally{if("Dispose"in bv)bv.Dispose();}},Remove:function(bu){var bv;bv=this.data[this.hash(bu)];return bv==null?false:this.arrRemove(bu,bv)&&(this.count=this.count-1,true);},arrRemove:function(bu,bv){var bw,bx,by,bz;bw=true;bx=0;bz=bv.length;while(bw&&bx<bz)if(this.equals.apply(null,[bv[bx],bu])){bv.splice.apply(bv,[bx,1]);bw=false;}else bx=bx+1;return!bw;},GetEnumerator:function(){return F.Get(bk.concat(this.data));},GetEnumerator0:function(){return F.Get(bk.concat(this.data));}},i,_4);_4.New$3=bq.Ctor(function(){_4.New$4.call(this,[],y.Equals,y.Hash);},_4);_4.New$2=bq.Ctor(function(bu){_4.New$4.call(this,bu,y.Equals,y.Hash);},_4);_4.New$4=bq.Ctor(function(bu,bv,bw){var bx;this.equals=bv;this.hash=bw;this.data=[];this.count=0;bx=F.Get(bu);try{while(bx.MoveNext())this.add(bx.Current());}finally{if("Dispose"in bx)bx.Dispose();}},_4);_5.$cctor=function(){_5.$cctor=a.ignore;_5.CubicInOut=ba.Custom(function(bu){var bv;bv=bu*bu;return 3*bv-2*(bv*bu);});_5.UseAnimations=true;};_6.Delay=function(bu){return function(bv){try{(bu(null))(bv);}catch(bw){bv.k({$:1,$0:bw});}};};_6.Bind=function(bu,bv){return _6.checkCancel(function(bw){bu(bb.New(function(bx){var by;if(bx.$==0){by=bx.$0;_6.scheduler().Fork(function(){try{(bv(by))(bw);}catch(bz){bw.k({$:1,$0:bz});}});}else _6.scheduler().Fork(function(){bw.k(bx);});},bw.ct));});};_6.Zero=function(){bc.$cctor();return bc.Zero;};_6.Start=function(bu,bv){var bw,bx;bw=(bx=(_6.defCTS())[0],bv==null?bx:bv.$0);_6.scheduler().Fork(function(){if(!bw.c)bu(bb.New(function(by){if(by.$==1)_6.UncaughtAsyncError(by.$0);},bw));});};_6.Return=function(bu){return function(bv){bv.k({$:0,$0:bu});};};_6.checkCancel=function(bu){return function(bv){if(bv.ct.c)_6.cancel(bv);else bu(bv);};};_6.defCTS=function(){bc.$cctor();return bc.defCTS;};_6.UncaughtAsyncError=function(bu){bs.log("WebSharper: Uncaught asynchronous exception",bu);};_6.FromContinuations=function(bu){return function(bv){var bw;function bx(by){if(bw[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bw[0]=true;_6.scheduler().Fork(by);}}bw=[false];bu(function(by){bx(function(){bv.k({$:0,$0:by});});},function(by){bx(function(){bv.k({$:1,$0:by});});},function(by){bx(function(){bv.k({$:2,$0:by});});});};};_6.cancel=function(bu){bu.k({$:2,$0:new bj.New(bu.ct)});};_6.scheduler=function(){bc.$cctor();return bc.scheduler;};_7.Append=function(bu,bv){return bu.$==0?bv:bv.$==0?bu:{$:2,$0:bu,$1:bv};};_7.Concat=function(bu){var bv;bv=C.ofSeqNonCopying(bu);return C.TreeReduce(_7.Empty(),_7.Append,bv);};_7.ToArray=function(bu){var bv;function bw(bx){if(bx.$==1)bv.push(bx.$0);else if(bx.$==2){bw(bx.$0);bw(bx.$1);}else if(bx.$==3)A.iter(function(by){bv.push(by);},bx.$0);}bv=[];bw(bu);return bv.slice(0);};_7.Empty=function(){bl.$cctor();return bl.Empty;};_8=f.DynamicAttrNode=bq.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bu){return U.get_Empty();},NGetEnterAnim:function(bu){return U.get_Empty();},NGetExitAnim:function(bu){return U.get_Empty();},NSync:function(bu){if(this.dirty){(this.push(bu))(this.value);this.dirty=false;}}},i,_8);_8.New=bq.Ctor(function(bu,bv){var bw;bw=this;this.push=bv;this.value=void 0;this.dirty=false;this.updates=x.Map(function(bx){bw.value=bx;bw.dirty=true;},bu);},_8);_9.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};_.string=function(bu,bv,bw){return bv==null?bw!=null&&bw.$==1?bu.slice(0,bw.$0+1):"":bw==null?bu.slice(bv.$0):bu.slice(bv.$0,bw.$0+1);};$.concat=function(bu,bv){return A.ofSeq(bv).join(bu);};$.StartsWith=function(bu,bv){return bu.substring(0,bv.length)==bv;};$.SplitChars=function(bu,bv,bw){return $.Split(bu,new a.RegExp("["+$.RegexEscape(bv.join(""))+"]"),bw);};$.RegexEscape=function(bu){return bu.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};$.Split=function(bu,bv,bw){return bw===1?A.filter(function(bx){return bx!=="";},$.SplitWith(bu,bv)):$.SplitWith(bu,bv);};$.SplitWith=function(bu,bv){return bu.split(bv);};ba=f.Easing=bq.Class({},i,ba);ba.Custom=function(bu){return new ba.New(bu);};ba.New=bq.Ctor(function(bu){this.transformTime=bu;},ba);bb.New=function(bu,bv){return{k:bu,ct:bv};};bc.$cctor=function(){bc.$cctor=a.ignore;bc.noneCT=bd.New(false,[]);bc.scheduler=new bg.New();bc.defCTS=[new bh.New()];bc.Zero=_6.Return();bc.GetCT=function(bu){bu.k({$:0,$0:bu.ct});};};bd.New=function(bu,bv){return{c:bu,r:bv};};be.Filter=function(bu,bv){return new _4.New$2(A.filter(bu,be.ToArray(bv)));};be.Intersect=function(bu,bv){var bw;bw=new _4.New$2(be.ToArray(bu));bw.IntersectWith(be.ToArray(bv));return bw;};be.ToArray=function(bu){var bv;bv=A.create(bu.get_Count(),void 0);bu.CopyTo(bv);return bv;};be.Except=function(bu,bv){var bw;bw=new _4.New$2(be.ToArray(bv));bw.ExceptWith(be.ToArray(bu));return bw;};bf.Clear=function(bu){bu.splice(0,A.length(bu));};bg=_6.Scheduler=bq.Class({Fork:function(bu){var bv;bv=this;this.robin.push(bu);this.idle?(this.idle=false,a.setTimeout(function(){bv.tick();},0)):void 0;},tick:function(){var bu,bv,bw;bv=this;bw=bt.now();bu=true;while(bu)if(this.robin.length===0){this.idle=true;bu=false;}else{(this.robin.shift())();bt.now()-bw>40?(a.setTimeout(function(){bv.tick();},0),bu=false):void 0;}}},i,bg);bg.New=bq.Ctor(function(){this.idle=true;this.robin=[];},bg);bh=b.CancellationTokenSource=bq.Class({},i,bh);bh.New=bq.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bh);bi.DocChildren=function(bu){var bv;function bw(bx){if(bx!=null&&bx.$==2)bw(bx.$0.Current);else if(bx!=null&&bx.$==1)bv.push(bx.$0.El);else if(bx==null);else if(bx!=null&&bx.$==5)bv.push(bx.$0);else if(bx!=null&&bx.$==4)bv.push(bx.$0.Text);else if(bx!=null&&bx.$==6)A.iter(function(by){if(by.constructor===O)bw(by);else bv.push(by);},bx.$0.Els);else{bw(bx.$0);bw(bx.$1);}}bv=[];bw(bu.Children);return{$:0,$0:C.ofSeqNonCopying(bv)};};bi.Children=function(bu,bv){var bw,bx,by;if(bv!=null&&bv.$==1){by=[];bw=bv.$0[0].nextSibling;while(bw!==bv.$0[1]){by.push(bw);bw=bw.nextSibling;}return{$:0,$0:by};}else return{$:0,$0:A.init(bu.childNodes.length,(bx=bu.childNodes,function(bz){return bx[bz];}))};};bi.Except=function(bu,bv){var bw;bw=bu.$0;return{$:0,$0:A.filter(function(bx){return A.forall(function(by){return!(bx===by);},bw);},bv.$0)};};bi.Iter=function(bu,bv){A.iter(bu,bv.$0);};bj=b.OperationCanceledException=bq.Class({},null,bj);bj.New=bq.Ctor(function(bu){bj.New$1.call(this,"The operation was canceled.",null,bu);},bj);bj.New$1=bq.Ctor(function(bu,bv,bw){this.message=bu;this.inner=bv;this.ct=bw;},bj);bk.concat=function(bu){var bv,bw;bv=[];for(var bx in bu)bv.push.apply(bv,bu[bx]);return bv;};bl.$cctor=function(){bl.$cctor=a.ignore;bl.Empty={$:0};};bm.Create=function(bu){return bo.New(false,bu,bm.forceLazy);};bm.forceLazy=function(){var bu;bu=this.v();this.c=true;this.v=bu;this.f=bm.cachedLazy;return bu;};bm.cachedLazy=function(){return this.v;};bo.New=function(bu,bv,bw){return{c:bu,v:bv,f:bw};};bq.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
