function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA;a=self;b=a.WebSharper=a.WebSharper||{};c=b.Remarkable=b.Remarkable||{};d=c.RenderingTest=c.RenderingTest||{};e=d.Client=d.Client||{};f=b.Obj=b.Obj||{};g=b.UI=b.UI||{};h=g.Var$1=g.Var$1||{};i=b.Operators=b.Operators||{};j=g.HtmlModule=g.HtmlModule||{};k=j.attr=j.attr||{};l=g.Var=g.Var||{};m=g.Doc=g.Doc||{};n=g.ConcreteVar=g.ConcreteVar||{};o=g.Snap=g.Snap||{};p=b.JavaScript=b.JavaScript||{};q=p.Pervasives=p.Pervasives||{};r=g.AttrProxy=g.AttrProxy||{};s=g.View=g.View||{};t=g.Array=g.Array||{};u=b.Unchecked=b.Unchecked||{};v=a.EventTarget;w=b.Arrays=b.Arrays||{};x=g.Docs=g.Docs||{};y=g.Client=g.Client||{};z=y.Templates=y.Templates||{};A=g.Abbrev=g.Abbrev||{};B=A.Fresh=A.Fresh||{};C=g.DomUtility=g.DomUtility||{};D=b.Seq=b.Seq||{};E=g.AttrModule=g.AttrModule||{};F=g.Attrs=g.Attrs||{};G=p.JS=p.JS||{};H=g.DocElemNode=g.DocElemNode||{};I=a.Node;J=b.Collections=b.Collections||{};K=J.Dictionary=J.Dictionary||{};L=g.Elt=g.Elt||{};M=b.Enumerator=b.Enumerator||{};N=M.T=M.T||{};O=a.CharacterData;P=y.Attrs=y.Attrs||{};Q=P.Dyn=P.Dyn||{};R=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};S=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};T=J.HashSet=J.HashSet||{};U=a.WindowOrWorkerGlobalScope;V=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};W=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};X=g.Updates=g.Updates||{};Y=b.List=b.List||{};Z=Y.T=Y.T||{};_0=a.Object;_1=J.DictionaryUtil=J.DictionaryUtil||{};_2=z.Prepare=z.Prepare||{};_3=b.Slice=b.Slice||{};_4=J.KeyCollection=J.KeyCollection||{};_5=g.An=g.An||{};_6=y.Settings=y.Settings||{};_7=A.Mailbox=A.Mailbox||{};_8=b.Strings=b.Strings||{};_9=y.Docs=y.Docs||{};_=_9.RunState=_9.RunState||{};$=_9.NodeSet=_9.NodeSet||{};ba=g.Anims=g.Anims||{};bb=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bc=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bd=b.Concurrency=b.Concurrency||{};be=g.AppendList=g.AppendList||{};bf=J.HashSetUtil=J.HashSetUtil||{};bg=g.DynamicAttrNode=g.DynamicAttrNode||{};bh=g.Easing=g.Easing||{};bi=bd.AsyncBody=bd.AsyncBody||{};bj=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bk=bd.CT=bd.CT||{};bl=A.HashSet=A.HashSet||{};bm=b.Queue=b.Queue||{};bn=bd.Scheduler=bd.Scheduler||{};bo=b.CancellationTokenSource=b.CancellationTokenSource||{};bp=_9.DomNodes=_9.DomNodes||{};bq=a.Error;br=b.OperationCanceledException=b.OperationCanceledException||{};bs=b.Lazy=b.Lazy||{};bt=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bu=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bv=bu.LazyRecord=bu.LazyRecord||{};bw=a.IntelliFactory;bx=bw&&bw.Runtime;by=a.jQuery;bz=a.console;bA=a.Date;e.Main=function(){var bB,bC,bD;function bE(bF){return bB.render(bF);}bB=new a.Remarkable({html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:true,linkTarget:"",typographer:false,quotes:"'\ufffd\ufffd\ufffd\ufffd'"});bC=h.Create$1("");bD=m.Element("div",[],[m.Element("h1",[],[m.TextNode("WebSharper.Remarkable extension sample page")]),m.Element("p",[],[m.TextNode("Type markdown text here:")]),m.InputArea([r.Create("class","input"),r.Create("rows","20")],bC),m.Element("hr",[],[]),m.Element("h4",[],[m.TextNode("Result")]),m.Element("div",[r.Create("class","output")],[m.BindView(function(bF){return m.Verbatim(bE(bF));},bC.get_View())])]);z.LoadLocalTemplates("");m.RunById("main",bD);};f=b.Obj=bx.Class({Equals:function(bB){return this===bB;},GetHashCode:function(){return -1;}},null,f);f.New=bx.Ctor(function(){},f);h=g.Var$1=bx.Class({},f,h);h.Create$1=function(bB){return new n.New(false,o.New({$:2,$0:bB,$1:[]}),bB);};i.FailWith=function(bB){throw new bq(bB);};i.KeyValue=function(bB){return[bB.K,bB.V];};k=j.attr=bx.Class({},f,k);l=g.Var=bx.Class({},f,l);l.New=bx.Ctor(function(){f.New.call(this);},l);m=g.Doc=bx.Class({},f,m);m.Verbatim=function(bB){var bC;return m.Mk(t.MapTreeReduce(function(bD){return u.Equals(bD.nodeType,I.TEXT_NODE)?{$:5,$0:bD}:{$:1,$0:x.CreateElemNode(bD,F.EmptyAttr(),null)};},null,function(bD,bE){return{$:0,$0:bD,$1:bE};},(bC=by.parseHTML(bB),u.Equals(bC,null)?[]:bC)),s.Const());};m.Element=function(bB,bC,bD){var bE,bF;bE=r.Concat(bC);bF=m.Concat(bD);return L.New(C.CreateElement(bB),bE,bF);};m.TextNode=function(bB){return m.Mk({$:5,$0:C.CreateText(bB)},s.Const());};m.InputArea=function(bB,bC){return m.InputInternal("textarea",function(){return D.append(bB,[E.Value(bC)]);});};m.Mk=function(bB,bC){return new m.New(bB,bC);};m.RunById=function(bB,bC){var bD;bD=C.Doc().getElementById(bB);u.Equals(bD,null)?i.FailWith("invalid id: "+bB):m.Run(bD,bC);};m.Concat=function(bB){var bC;bC=t.ofSeqNonCopying(bB);return t.TreeReduce(m.get_Empty(),m.Append,bC);};m.InputInternal=function(bB,bC){var bD;bD=C.CreateElement(bB);return L.New(bD,r.Concat(bC(bD)),m.get_Empty());};m.BindView=function(bB,bC){return m.EmbedView(s.Map(bB,bC));};m.Run=function(bB,bC){x.LinkElement(bB,bC.docNode);m.RunInPlace(false,bB,bC);};m.Append=function(bB,bC){return m.Mk({$:0,$0:bB.docNode,$1:bC.docNode},s.Map2Unit(bB.updates,bC.updates));};m.get_Empty=function(){return m.Mk(null,s.Const());};m.EmbedView=function(bB){var bC;bC=x.CreateEmbedNode();return m.Mk({$:2,$0:bC},s.Map(a.ignore,s.Bind(function(bD){x.UpdateEmbedNode(bC,bD.docNode);return bD.updates;},bB)));};m.RunInPlace=function(bB,bC,bD){var bE;bE=x.CreateRunState(bC,bD.docNode);s.Sink(_5.get_UseAnimations()||_6.BatchUpdatesEnabled()?_7.StartProcessor(x.PerformAnimatedUpdate(bB,bE,bD.docNode)):function(){x.PerformSyncUpdate(bB,bE,bD.docNode);},bD.updates);};m.New=bx.Ctor(function(bB,bC){f.New.call(this);this.docNode=bB;this.updates=bC;},m);n=g.ConcreteVar=bx.Class({get_View:function(){return this.view;},UpdateMaybe:function(bB){var bC;bC=bB(this.Get());bC!=null&&bC.$==1?this.Set(bC.$0):void 0;},Get:function(){return this.current;},Set:function(bB){if(this.isConst)(function(bC){return bC("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bC){bz.log(bC);}));else{o.Obsolete(this.snap);this.current=bB;this.snap=o.New({$:2,$0:bB,$1:[]});}}},l,n);n.New=bx.Ctor(function(bB,bC,bD){var bE;bE=this;l.New.call(this);this.isConst=bB;this.current=bD;this.snap=bC;this.view=function(){return bE.snap;};this.id=B.Int();},n);o.Map=function(bB,bC){var bD,bE;bD=bC.s;return bD!=null&&bD.$==0?o.New({$:0,$0:bB(bD.$0)}):(bE=o.New({$:3,$0:[],$1:[]}),(o.When(bC,function(bF){o.MarkDone(bE,bC,bB(bF));},bE),bE));};o.Copy=function(bB){var bC,bD,bE;bC=bB.s;return bC==null?bB:bC!=null&&bC.$==2?(bD=o.New({$:2,$0:bC.$0,$1:[]}),(o.WhenObsolete(bB,bD),bD)):bC!=null&&bC.$==3?(bE=o.New({$:3,$0:[],$1:[]}),(o.When(bB,function(bF){o.MarkDone(bE,bB,bF);},bE),bE)):bB;};o.WhenObsoleteRun=function(bB,bC){var bD;bD=bB.s;bD==null?bC():bD!=null&&bD.$==2?bD.$1.push(bC):bD!=null&&bD.$==3?bD.$1.push(bC):void 0;};o.Map2Unit=function(bB,bC){var bD,bE,bF;function bG(){var bH,bI,bJ;if(!(bH=bF.s,bH!=null&&bH.$==0||bH!=null&&bH.$==2)){bI=o.ValueAndForever(bB);bJ=o.ValueAndForever(bC);bI!=null&&bI.$==1?bJ!=null&&bJ.$==1?bI.$0[1]&&bJ.$0[1]?o.MarkForever(bF,null):o.MarkReady(bF,null):void 0:void 0;}}bD=bB.s;bE=bC.s;return bD!=null&&bD.$==0?bE!=null&&bE.$==0?o.New({$:0,$0:null}):bC:bE!=null&&bE.$==0?bB:(bF=o.New({$:3,$0:[],$1:[]}),(o.When(bB,bG,bF),o.When(bC,bG,bF),bF));};o.When=function(bB,bC,bD){var bE;bE=bB.s;bE==null?o.Obsolete(bD):bE!=null&&bE.$==2?(o.EnqueueSafe(bE.$1,bD),bC(bE.$0)):bE!=null&&bE.$==3?(bE.$0.push(bC),o.EnqueueSafe(bE.$1,bD)):bC(bE.$0);};o.MarkDone=function(bB,bC,bD){var bE;if(bE=bC.s,bE!=null&&bE.$==0)o.MarkForever(bB,bD);else o.MarkReady(bB,bD);};o.WhenRun=function(bB,bC,bD){var bE;bE=bB.s;bE==null?bD():bE!=null&&bE.$==2?(bE.$1.push(bD),bC(bE.$0)):bE!=null&&bE.$==3?(bE.$0.push(bC),bE.$1.push(bD)):bC(bE.$0);};o.WhenObsolete=function(bB,bC){var bD;bD=bB.s;bD==null?o.Obsolete(bC):bD!=null&&bD.$==2?o.EnqueueSafe(bD.$1,bC):bD!=null&&bD.$==3?o.EnqueueSafe(bD.$1,bC):void 0;};o.ValueAndForever=function(bB){var bC;bC=bB.s;return bC!=null&&bC.$==0?{$:1,$0:[bC.$0,true]}:bC!=null&&bC.$==2?{$:1,$0:[bC.$0,false]}:null;};o.MarkForever=function(bB,bC){var bD,bE,bF,bG;bD=bB.s;if(bD!=null&&bD.$==3){bB.s={$:0,$0:bC};bE=bD.$0;for(bF=0,bG=w.length(bE)-1;bF<=bG;bF++)(w.get(bE,bF))(bC);}else void 0;};o.MarkReady=function(bB,bC){var bD,bE,bF,bG;bD=bB.s;if(bD!=null&&bD.$==3){bB.s={$:2,$0:bC,$1:bD.$1};bE=bD.$0;for(bF=0,bG=w.length(bE)-1;bF<=bG;bF++)(w.get(bE,bF))(bC);}else void 0;};o.Join=function(bB){var bC;bC=o.New({$:3,$0:[],$1:[]});o.When(bB,function(bD){var bE;bE=bD();o.When(bE,function(bF){var bG,bH;if((bG=bE.s,bG!=null&&bG.$==0)&&(bH=bB.s,bH!=null&&bH.$==0))o.MarkForever(bC,bF);else o.MarkReady(bC,bF);},bC);},bC);return bC;};o.EnqueueSafe=function(bB,bC){var bD,bE,bF,bG;bB.push(bC);if(bB.length%20===0){bD=bB.slice(0);bm.Clear(bB);for(bE=0,bF=w.length(bD)-1;bE<=bF;bE++){bG=w.get(bD,bE);typeof bG=="object"?function(bH){if(bH.s)bB.push(bH);}(bG):function(bH){bB.push(bH);}(bG);}}else void 0;};q.NewFromSeq=function(bB){var bC,bD,bE;bC={};bD=M.Get(bB);try{while(bD.MoveNext()){bE=bD.Current();bC[bE[0]]=bE[1];}}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}return bC;};r=g.AttrProxy=bx.Class({},null,r);r.Create=function(bB,bC){return F.Static(function(bD){C.SetAttr(bD,bB,bC);});};r.Concat=function(bB){var bC;bC=t.ofSeqNonCopying(bB);return t.TreeReduce(F.EmptyAttr(),r.Append,bC);};r.Append=function(bB,bC){return F.AppendTree(bB,bC);};s.Const=function(bB){var bC;bC=o.New({$:0,$0:bB});return function(){return bC;};};s.Map=function(bB,bC){return s.CreateLazy(function(){return o.Map(bB,bC());});};s.Map2Unit=function(bB,bC){return s.CreateLazy(function(){return o.Map2Unit(bB(),bC());});};s.Bind=function(bB,bC){return s.Join(s.Map(bB,bC));};s.CreateLazy=function(bB){var bC;bC={c:null,o:bB};return function(){var bD,bE;bD=bC.c;return bD===null?(bD=bC.o(),bC.c=bD,(bE=bD.s,bE!=null&&bE.$==0)?bC.o=null:o.WhenObsoleteRun(bD,function(){bC.c=null;}),bD):bD;};};s.Sink=function(bB,bC){function bD(){o.WhenRun(bC(),bB,function(){bd.scheduler().Fork(bD);});}bd.scheduler().Fork(bD);};s.Join=function(bB){return s.CreateLazy(function(){return o.Join(bB());});};t.MapTreeReduce=function(bB,bC,bD,bE){var bF;function bG(bH,bI){var bJ,bK;return bI<=0?bC:bI===1&&(bH>=0&&bH<bF)?bB(w.get(bE,bH)):(bK=bI/2>>0,bD(bG(bH,bK),bG(bH+bK,bI-bK)));}bF=w.length(bE);return bG(0,bF);};t.ofSeqNonCopying=function(bB){var bC,bD;if(bB instanceof a.Array)return bB;else if(bB instanceof Z)return w.ofList(bB);else if(bB===null)return[];else{bC=[];bD=M.Get(bB);try{while(bD.MoveNext())bC.push(bD.Current());return bC;}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}}};t.TreeReduce=function(bB,bC,bD){var bE;function bF(bG,bH){var bI,bJ;return bH<=0?bB:bH===1&&(bG>=0&&bG<bE)?w.get(bD,bG):(bJ=bH/2>>0,bC(bF(bG,bJ),bF(bG+bJ,bH-bJ)));}bE=w.length(bD);return bF(0,bE);};u.Equals=function(bB,bC){var bD,bE,bF,bG;if(bB===bC)return true;else{bD=typeof bB;if(bD=="object"){if(bB===null||bB===void 0||bC===null||bC===void 0)return false;else if("Equals"in bB)return bB.Equals(bC);else if(bB instanceof a.Array&&bC instanceof a.Array)return u.arrayEquals(bB,bC);else if(bB instanceof a.Date&&bC instanceof a.Date)return u.dateEquals(bB,bC);else{bE=[true];for(var bH in bB)if(function(bI){bE[0]=!bB.hasOwnProperty(bI)||bC.hasOwnProperty(bI)&&u.Equals(bB[bI],bC[bI]);return!bE[0];}(bH))break;if(bE[0]){for(var bI in bC)if(function(bJ){bE[0]=!bC.hasOwnProperty(bJ)||bB.hasOwnProperty(bJ);return!bE[0];}(bI))break;}return bE[0];}}else return bD=="function"&&("$Func"in bB?bB.$Func===bC.$Func&&bB.$Target===bC.$Target:"$Invokes"in bB&&"$Invokes"in bC&&u.arrayEquals(bB.$Invokes,bC.$Invokes));}};u.arrayEquals=function(bB,bC){var bD,bE;if(w.length(bB)===w.length(bC)){bD=true;bE=0;while(bD&&bE<w.length(bB)){!u.Equals(w.get(bB,bE),w.get(bC,bE))?bD=false:void 0;bE=bE+1;}return bD;}else return false;};u.dateEquals=function(bB,bC){return bB.getTime()===bC.getTime();};u.Hash=function(bB){var bC;bC=typeof bB;return bC=="function"?0:bC=="boolean"?bB?1:0:bC=="number"?bB:bC=="string"?u.hashString(bB):bC=="object"?bB==null?0:bB instanceof a.Array?u.hashArray(bB):u.hashObject(bB):0;};u.hashString=function(bB){var bC,bD,bE;if(bB===null)return 0;else{bC=5381;for(bD=0,bE=bB.length-1;bD<=bE;bD++)bC=u.hashMix(bC,bB[bD].charCodeAt());return bC;}};u.hashArray=function(bB){var bC,bD,bE;bC=-34948909;for(bD=0,bE=w.length(bB)-1;bD<=bE;bD++)bC=u.hashMix(bC,u.Hash(w.get(bB,bD)));return bC;};u.hashObject=function(bB){var bC,bD;if("GetHashCode"in bB)return bB.GetHashCode();else{bC=[0];for(var bE in bB)if(function(bF){bC[0]=u.hashMix(u.hashMix(bC[0],u.hashString(bF)),u.Hash(bB[bF]));return false;}(bE))break;return bC[0];}};u.hashMix=function(bB,bC){return(bB<<5)+bB+bC;};u.Compare=function(bB,bC){var bD,bE,bF,bG,bH,bI;if(bB===bC)return 0;else{bE=typeof bB;switch(bE=="function"?1:bE=="boolean"?2:bE=="number"?2:bE=="string"?2:bE=="object"?3:0){case 0:return typeof bC=="undefined"?0:-1;break;case 1:return i.FailWith("Cannot compare function values.");break;case 2:return bB<bC?-1:1;break;case 3:if(bB===null)bF=-1;else if(bC===null)bF=1;else if("CompareTo"in bB)bF=bB.CompareTo(bC);else if("CompareTo0"in bB)bF=bB.CompareTo0(bC);else if(bB instanceof a.Array&&bC instanceof a.Array)bF=u.compareArrays(bB,bC);else if(bB instanceof a.Date&&bC instanceof a.Date)bF=u.compareDates(bB,bC);else{bG=[0];for(var bJ in bB)if(function(bK){return!bB.hasOwnProperty(bK)?false:!bC.hasOwnProperty(bK)?(bG[0]=1,true):(bG[0]=u.Compare(bB[bK],bC[bK]),bG[0]!==0);}(bJ))break;if(bG[0]===0){for(var bK in bC)if(function(bL){return!bC.hasOwnProperty(bL)?false:!bB.hasOwnProperty(bL)&&(bG[0]=-1,true);}(bK))break;}bF=bG[0];}return bF;break;}}};u.compareArrays=function(bB,bC){var bD,bE;if(w.length(bB)<w.length(bC))return -1;else if(w.length(bB)>w.length(bC))return 1;else{bD=0;bE=0;while(bD===0&&bE<w.length(bB)){bD=u.Compare(w.get(bB,bE),w.get(bC,bE));bE=bE+1;}return bD;}};u.compareDates=function(bB,bC){return u.Compare(bB.getTime(),bC.getTime());};w.get=function(bB,bC){w.checkBounds(bB,bC);return bB[bC];};w.length=function(bB){return bB.dims===2?bB.length*bB.length:bB.length;};w.checkBounds=function(bB,bC){if(bC<0||bC>=bB.length)i.FailWith("Index was outside the bounds of the array.");};w.set=function(bB,bC,bD){w.checkBounds(bB,bC);bB[bC]=bD;};x.CreateElemNode=function(bB,bC,bD){var bE;x.LinkElement(bB,bD);bE=F.Insert(bB,bC);return H.New(bE,bD,null,bB,B.Int(),bx.GetOptional(bE.OnAfterRender));};x.LinkElement=function(bB,bC){x.InsertDoc(bB,bC,null);};x.InsertDoc=function(bB,bC,bD){var bE;return bC!=null&&bC.$==1?x.InsertNode(bB,bC.$0.El,bD):bC!=null&&bC.$==2?(bE=bC.$0,(bE.Dirty=false,x.InsertDoc(bB,bE.Current,bD))):bC==null?bD:bC!=null&&bC.$==4?x.InsertNode(bB,bC.$0.Text,bD):bC!=null&&bC.$==5?x.InsertNode(bB,bC.$0,bD):bC!=null&&bC.$==6?w.foldBack(function(bF,bG){return bF==null||bF.constructor===_0?x.InsertDoc(bB,bF,bG):x.InsertNode(bB,bF,bG);},bC.$0.Els,bD):x.InsertDoc(bB,bC.$0,x.InsertDoc(bB,bC.$1,bD));};x.CreateEmbedNode=function(){return{Current:null,Dirty:false};};x.UpdateEmbedNode=function(bB,bC){bB.Current=bC;bB.Dirty=true;};x.InsertNode=function(bB,bC,bD){C.InsertAt(bB,bD,bC);return bC;};x.CreateRunState=function(bB,bC){return _.New($.get_Empty(),x.CreateElemNode(bB,F.EmptyAttr(),bC));};x.PerformAnimatedUpdate=function(bB,bC,bD){var bE;return _5.get_UseAnimations()?(bE=null,bd.Delay(function(){var bF,bG,bH;bF=$.FindAll(bD);bG=x.ComputeChangeAnim(bC,bF);bH=x.ComputeEnterAnim(bC,bF);return bd.Bind(_5.Play(_5.Append(bG,x.ComputeExitAnim(bC,bF))),function(){return bd.Bind(x.SyncElemNodesNextFrame(bB,bC),function(){return bd.Bind(_5.Play(bH),function(){bC.PreviousNodes=bF;return bd.Return(null);});});});})):x.SyncElemNodesNextFrame(bB,bC);};x.PerformSyncUpdate=function(bB,bC,bD){var bE;bE=$.FindAll(bD);x.SyncElemNode(bB,bC.Top);bC.PreviousNodes=bE;};x.SyncElemNodesNextFrame=function(bB,bC){function bD(bE){a.requestAnimationFrame(function(){x.SyncElemNode(bB,bC.Top);bE();});}return _6.BatchUpdatesEnabled()?bd.FromContinuations(function(bE,bF,bG){return bD.apply(null,[bE,bF,bG]);}):(x.SyncElemNode(bB,bC.Top),bd.Return(null));};x.ComputeExitAnim=function(bB,bC){return _5.Concat(w.map(function(bD){return F.GetExitAnim(bD.Attr);},$.ToArray($.Except(bC,$.Filter(function(bD){return F.HasExitAnim(bD.Attr);},bB.PreviousNodes)))));};x.ComputeEnterAnim=function(bB,bC){return _5.Concat(w.map(function(bD){return F.GetEnterAnim(bD.Attr);},$.ToArray($.Except(bB.PreviousNodes,$.Filter(function(bD){return F.HasEnterAnim(bD.Attr);},bC)))));};x.ComputeChangeAnim=function(bB,bC){var bD;function bE(bF){return F.HasChangeAnim(bF.Attr);}bD=function(bF){return $.Filter(bE,bF);};return _5.Concat(w.map(function(bF){return F.GetChangeAnim(bF.Attr);},$.ToArray($.Intersect(bD(bB.PreviousNodes),bD(bC)))));};x.SyncElemNode=function(bB,bC){!bB?x.SyncElement(bC):void 0;x.Sync(bC.Children);x.AfterRender(bC);};x.SyncElement=function(bB){function bC(bD){function bE(bF){var bG,bH;return bF!=null&&bF.$==0?bE(bF.$0)||bE(bF.$1):bF!=null&&bF.$==2?(bG=bF.$0,bG.Dirty||bE(bG.Current)):bF!=null&&bF.$==6&&(bH=bF.$0,bH.Dirty||w.exists(bC,bH.Holes));}return bE(bD.Children);}F.Sync(bB.El,bB.Attr);bC(bB)?x.DoSyncElement(bB):void 0;};x.Sync=function(bB){var bC,bD;if(bB!=null&&bB.$==1)x.SyncElemNode(false,bB.$0);else if(bB!=null&&bB.$==2)x.Sync(bB.$0.Current);else if(bB==null);else if(bB!=null&&bB.$==5);else if(bB!=null&&bB.$==4){bC=bB.$0;bC.Dirty?(bC.Text.nodeValue=bC.Value,bC.Dirty=false):void 0;}else if(bB!=null&&bB.$==6){bD=bB.$0;w.iter(function(bE){x.SyncElemNode(false,bE);},bD.Holes);w.iter(function(bE){F.Sync(bE[0],bE[1]);},bD.Attrs);x.AfterRender(bD);}else{x.Sync(bB.$0);x.Sync(bB.$1);}};x.AfterRender=function(bB){var bC;bC=bx.GetOptional(bB.Render);bC!=null&&bC.$==1?(bC.$0(bB.El),bx.SetOptional(bB,"Render",null)):void 0;};x.DoSyncElement=function(bB){var bC,bD,bE;function bF(bG,bH){var bI,bJ;return bG!=null&&bG.$==1?bG.$0.El:bG!=null&&bG.$==2?(bI=bG.$0,bI.Dirty?(bI.Dirty=false,x.InsertDoc(bC,bI.Current,bH)):bF(bI.Current,bH)):bG==null?bH:bG!=null&&bG.$==4?bG.$0.Text:bG!=null&&bG.$==5?bG.$0:bG!=null&&bG.$==6?(bJ=bG.$0,(bJ.Dirty?bJ.Dirty=false:void 0,w.foldBack(function(bK,bL){return bK==null||bK.constructor===_0?bF(bK,bL):bK;},bJ.Els,bH))):bF(bG.$0,bF(bG.$1,bH));}bC=bB.El;bp.Iter((bD=bB.El,function(bG){C.RemoveNode(bD,bG);}),bp.Except(bp.DocChildren(bB),bp.Children(bB.El,bx.GetOptional(bB.Delimiters))));bF(bB.Children,(bE=bx.GetOptional(bB.Delimiters),bE!=null&&bE.$==1?bE.$0[1]:null));};z.LoadLocalTemplates=function(bB){!z.LocalTemplatesLoaded()?(z.set_LocalTemplatesLoaded(true),z.LoadNestedTemplates(self.document.body,"")):void 0;z.LoadedTemplates().set_Item(bB,z.LoadedTemplateFile(""));};z.LocalTemplatesLoaded=function(){S.$cctor();return S.LocalTemplatesLoaded;};z.set_LocalTemplatesLoaded=function(bB){S.$cctor();S.LocalTemplatesLoaded=bB;};z.LoadNestedTemplates=function(bB,bC){var bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR;function bD(bS){var bT,bU;if(!bE.ContainsKey(bS)){bT=(bU=null,[bF.TryGetValue(bS,{get:function(){return bU;},set:function(bV){bU=bV;}}),bU]);bT[0]?(bR.Add(bS),bF.Remove(bS),z.PrepareTemplateStrict(bC,{$:1,$0:bS},bT[1][0],{$:1,$0:bT[1][1]},{$:1,$0:bD})):bz.warn(bR.Contains(bS)?"Encountered loop when instantiating "+bS:"Local template does not exist: "+bS);}}bE=z.LoadedTemplateFile(bC);bF=new K.New$5();bG=bB.querySelectorAll("[ws-template]");for(bH=0,bI=bG.length-1;bH<=bI;bH++){bJ=bG[bH];bK=bJ.getAttribute("ws-template").toLowerCase();bJ.removeAttribute("ws-template");bF.set_Item(bK,[[bJ],z.FakeRootSingle(bJ)]);}bL=bB.querySelectorAll("[ws-children-template]");for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=bL[bM];bP=bO.getAttribute("ws-children-template").toLowerCase();bO.removeAttribute("ws-children-template");bF.set_Item(bP,(bQ=C.ChildrenArray(bO),[bQ,z.FakeRoot(bQ)]));}bR=new T.New$3();while(bF.count>0)bD(D.head(bF.get_Keys()));};z.LoadedTemplates=function(){S.$cctor();return S.LoadedTemplates;};z.LoadedTemplateFile=function(bB){var bC,bD,bE;bC=(bD=null,[z.LoadedTemplates().TryGetValue(bB,{get:function(){return bD;},set:function(bF){bD=bF;}}),bD]);return bC[0]?bC[1]:(bE=new K.New$5(),(z.LoadedTemplates().set_Item(bB,bE),bE));};z.FakeRootSingle=function(bB){var bC,bD,bE;bB.removeAttribute("ws-template");bC=bB.getAttribute("ws-replace");bC===null?void 0:(bB.removeAttribute("ws-replace"),bD=bB.parentNode,u.Equals(bD,null)?void 0:(bE=self.document.createElement(bB.tagName),bE.setAttribute("ws-replace",bC),bD.replaceChild(bE,bB)));return z.FakeRoot([bB]);};z.FakeRoot=function(bB){var bC,bD,bE;bC=self.document.createElement("div");for(bD=0,bE=bB.length-1;bD<=bE;bD++)bC.appendChild(w.get(bB,bD));return bC;};z.PrepareTemplateStrict=function(bB,bC,bD,bE,bF){var bG,bH;function bI(bN,bO){var bP,bQ,bR,bS,bT,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd;function bU(ce){}while(true)switch(bN){case 0:if(bO!==null){bP=bO.nextSibling;if(u.Equals(bO.nodeType,I.TEXT_NODE))_2.convertTextNode(bO);else if(u.Equals(bO.nodeType,I.ELEMENT_NODE))bK(bO);bO=bP;}else return null;break;case 1:bV=_3.string(bO.nodeName,{$:1,$0:3},null).toLowerCase();bW=(bQ=bV.indexOf("."),bQ===-1?[bB,bV]:[_3.string(bV,null,{$:1,$0:bQ-1}),_3.string(bV,{$:1,$0:bQ+1},null)]);bX=bW[1];bY=bW[0];if(bY!==""&&!z.LoadedTemplates().ContainsKey(bY))return _2.failNotLoaded(bX);else{if(bY===""&&bF!=null)bF.$0(bX);bZ=z.LoadedTemplates().get_Item(bY);if(!bZ.ContainsKey(bX))return _2.failNotLoaded(bX);else{b0=bZ.get_Item(bX);b1=b0.cloneNode(true);b2=new T.New$3();b3=new K.New$5();b4=bO.attributes;for(b5=0,b6=b4.length-1;b5<=b6;b5++){b7=b4.item(b5).name.toLowerCase();b3.set_Item(b7,(b8=b4.item(b5).nodeValue,b8===""?b7:b8.toLowerCase()));!b2.Add(b7)?bz.warn("Hole mapped twice",b7):void 0;}for(b9=0,b_=bO.childNodes.length-1;b9<=b_;b9++){b$=bO.childNodes[b9];u.Equals(b$.nodeType,I.ELEMENT_NODE)?!b2.Add(b$.nodeName.toLowerCase())?bz.warn("Hole filled twice",bX):void 0:void 0;}ca=bO.childNodes.length===1&&u.Equals(bO.firstChild.nodeType,I.TEXT_NODE);if(ca){bS=_2.fillTextHole(b1,bO.firstChild.textContent,bX);((function(ce){return function(cf){if(cf!=null)ce(cf.$0);};}((bT=function(ce){return function(cf){return ce.Add(cf);};}(b2),function(ce){return bU(bT(ce));})))(bS));}_2.removeHolesExcept(b1,b2);if(!ca){for(cb=0,cc=bO.childNodes.length-1;cb<=cc;cb++){cd=bO.childNodes[cb];u.Equals(cd.nodeType,I.ELEMENT_NODE)?cd.hasAttributes()?_2.fillInstanceAttrs(b1,cd):bJ(b1,cd):void 0;}}_2.mapHoles(b1,b3);_2.fill(b1,bO.parentNode,bO);bO.parentNode.removeChild(bO);return;}}break;}}function bJ(bN,bO){var bP,bR,bS;function bQ(bT,bU){var bV,bW,bX;if(bR==="title"&&bO.hasChildNodes()){bV=by.parseHTML(bO.textContent);bO.removeChild(bO.firstChild);for(bW=0,bX=bV.length-1;bW<=bX;bW++)bO.appendChild(w.get(bV,bW));}else null;bK(bO);return _2.fill(bO,bT,bU);}bR=bO.nodeName.toLowerCase();C.IterSelector(bN,"[ws-attr-holes]",function(bT){var bU,bV,bW,bX,bY;bU=_8.SplitChars(bT.getAttribute("ws-attr-holes"),[" "],1);for(bV=0,bW=bU.length-1;bV<=bW;bV++){bX=w.get(bU,bV);bT.setAttribute(bX,(bY=new a.RegExp("\\${"+bR+"}","ig"),bT.getAttribute(bX).replace(bY,bO.textContent)));}});bS=bN.querySelector("[ws-hole="+bR+"]");if(u.Equals(bS,null)){bP=bN.querySelector("[ws-replace="+bR+"]");return u.Equals(bP,null)?null:(bQ(bP.parentNode,bP),void bP.parentNode.removeChild(bP));}else{while(bS.hasChildNodes())bS.removeChild(bS.lastChild);bS.removeAttribute("ws-hole");return bQ(bS,null);}}function bK(bN){if(_8.StartsWith(bN.nodeName.toLowerCase(),"ws-"))bM(bN);else{_2.convertAttrs(bN);bL(bN.firstChild);}}function bL(bN){return bI(0,bN);}function bM(bN){return bI(1,bN);}bG=bE==null?z.FakeRoot(bD):bE.$0;bH=(bC==null?"":bC.$0).toLowerCase();z.LoadedTemplateFile(bB).set_Item(bH,bG);w.length(bD)>0?(function(bN){var bO,bP,bQ,bR;while(true){bO=bN.querySelector("[ws-template]");if(u.Equals(bO,null)){bP=bN.querySelector("[ws-children-template]");if(u.Equals(bP,null))return null;else{bQ=bP.getAttribute("ws-children-template");bP.removeAttribute("ws-children-template");z.PrepareTemplateStrict(bB,{$:1,$0:bQ},C.ChildrenArray(bP),null,null);bN=bN;}}else{bR=bO.getAttribute("ws-template");(z.PrepareSingleTemplate(bB,{$:1,$0:bR},bO))(null);bN=bN;}}}(bG),bL(w.get(bD,0))):void 0;};z.PrepareSingleTemplate=function(bB,bC,bD){var bE,bF,bG;bE=z.FakeRootSingle(bD);bF=[bD];bG={$:1,$0:bE};return function(bH){z.PrepareTemplateStrict(bB,bC,bF,bG,bH);};};z.TextHoleRE=function(){S.$cctor();return S.TextHoleRE;};B.Int=function(){B.set_counter(B.counter()+1);return B.counter();};B.set_counter=function(bB){W.$cctor();W.counter=bB;};B.counter=function(){W.$cctor();return W.counter;};C.CreateElement=function(bB){return C.Doc().createElement(bB);};C.CreateText=function(bB){return C.Doc().createTextNode(bB);};C.SetAttr=function(bB,bC,bD){bB.setAttribute(bC,bD);};C.Doc=function(){V.$cctor();return V.Doc;};C.ChildrenArray=function(bB){var bC,bD,bE;bC=[];for(bD=0,bE=bB.childNodes.length-1;bD<=bE;bD++)bC.push(bB.childNodes[bD]);return bC;};C.IterSelector=function(bB,bC,bD){var bE,bF,bG;bE=bB.querySelectorAll(bC);for(bF=0,bG=bE.length-1;bF<=bG;bF++)bD(bE[bF]);};C.InsertAt=function(bB,bC,bD){var bE;if(!(bD.parentNode===bB&&bC===(bE=bD.nextSibling,u.Equals(bE,null)?null:bE)))bB.insertBefore(bD,bC);};C.RemoveNode=function(bB,bC){if(bC.parentNode===bB)bB.removeChild(bC);};D.append=function(bB,bC){return{GetEnumerator:function(){var bD,bE;bD=M.Get(bB);bE=[true];return new N.New(bD,null,function(bF){var bG;return bF.s.MoveNext()?(bF.c=bF.s.Current(),true):(bG=bF.s,!u.Equals(bG,null)?bG.Dispose():void 0,bF.s=null,bE[0]&&(bE[0]=false,bF.s=M.Get(bC),bF.s.MoveNext()?(bF.c=bF.s.Current(),true):(bF.s.Dispose(),bF.s=null,false)));},function(bF){var bG;bG=bF.s;!u.Equals(bG,null)?bG.Dispose():void 0;});}};};D.iter=function(bB,bC){var bD;bD=M.Get(bC);try{while(bD.MoveNext())bB(bD.Current());}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}};D.head=function(bB){var bC;bC=M.Get(bB);try{return bC.MoveNext()?bC.Current():D.insufficient();}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}};D.fold=function(bB,bC,bD){var bE,bF;bE=bC;bF=M.Get(bD);try{while(bF.MoveNext())bE=bB(bE,bF.Current());return bE;}finally{if(typeof bF=="object"&&"Dispose"in bF)bF.Dispose();}};D.map=function(bB,bC){return{GetEnumerator:function(){var bD;bD=M.Get(bC);return new N.New(null,null,function(bE){return bD.MoveNext()&&(bE.c=bB(bD.Current()),true);},function(){bD.Dispose();});}};};D.max=function(bB){var bC,bD,bE;bC=M.Get(bB);try{if(!bC.MoveNext())D.seqEmpty();bD=bC.Current();while(bC.MoveNext()){bE=bC.Current();u.Compare(bE,bD)===1?bD=bE:void 0;}return bD;}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}};D.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};E.Value=function(bB){function bC(bD){return{$:1,$0:bD};}return E.CustomValue(bB,a.id,function(bD){return bC(a.id(bD));});};E.CustomValue=function(bB,bC,bD){return E.CustomVar(bB,function(bE,bF){bE.value=bC(bF);},function(bE){return bD(bE.value);});};E.CustomVar=function(bB,bC,bD){function bE(bG,bH){return bB.UpdateMaybe(function(bI){var bJ,bK;bJ=bD(bG);return bJ!=null&&bJ.$==1&&(!u.Equals(bJ.$0,bI)&&(bK=[bJ,bJ.$0],true))?bK[0]:null;});}function bF(bG,bH){var bI,bJ;bI=bD(bG);return bI!=null&&bI.$==1&&(u.Equals(bI.$0,bH)&&(bJ=bI.$0,true))?null:bC(bG,bH);}return r.Concat([E.Handler("change",function(bG){return function(bH){return bE(bG,bH);};}),E.Handler("input",function(bG){return function(bH){return bE(bG,bH);};}),E.Handler("keypress",function(bG){return function(bH){return bE(bG,bH);};}),E.DynamicCustom(function(bG){return function(bH){return bF(bG,bH);};},bB.get_View())]);};E.Handler=function(bB,bC){return F.Static(function(bD){bD.addEventListener(bB,function(bE){return(bC(bD))(bE);},false);});};E.DynamicCustom=function(bB,bC){return F.Dynamic(bC,bB);};F.Static=function(bB){return new r({$:3,$0:bB});};F.Insert=function(bB,bC){var bD,bE,bF;function bG(bH){if(!(bH===null))if(bH!=null&&bH.$==1)bD.push(bH.$0);else if(bH!=null&&bH.$==2){bG(bH.$0);bG(bH.$1);}else if(bH!=null&&bH.$==3)bH.$0(bB);else if(bH!=null&&bH.$==4)bE.push(bH.$0);}bD=[];bE=[];bG(bC);bF=bD.slice(0);return Q.New(bB,F.Flags(bC),bF,bE.length===0?null:{$:1,$0:function(bH){D.iter(function(bI){bI(bH);},bE);}});};F.EmptyAttr=function(){R.$cctor();return R.EmptyAttr;};F.Flags=function(bB){return bB!==null&&bB.hasOwnProperty("flags")?bB.flags:0;};F.Updates=function(bB){return t.MapTreeReduce(function(bC){return bC.NChanged();},s.Const(),s.Map2Unit,bB.DynNodes);};F.AppendTree=function(bB,bC){var bD;return bB===null?bC:bC===null?bB:(bD=new r({$:2,$0:bB,$1:bC}),(F.SetFlags(bD,F.Flags(bB)|F.Flags(bC)),bD));};F.SetFlags=function(bB,bC){bB.flags=bC;};F.Dynamic=function(bB,bC){return new r({$:1,$0:new bg.New(bB,bC)});};F.HasExitAnim=function(bB){var bC;bC=2;return(bB.DynFlags&bC)===bC;};F.GetExitAnim=function(bB){return F.GetAnim(bB,function(bC,bD){return bC.NGetExitAnim(bD);});};F.HasEnterAnim=function(bB){var bC;bC=1;return(bB.DynFlags&bC)===bC;};F.GetEnterAnim=function(bB){return F.GetAnim(bB,function(bC,bD){return bC.NGetEnterAnim(bD);});};F.HasChangeAnim=function(bB){var bC;bC=4;return(bB.DynFlags&bC)===bC;};F.GetChangeAnim=function(bB){return F.GetAnim(bB,function(bC,bD){return bC.NGetChangeAnim(bD);});};F.GetAnim=function(bB,bC){return _5.Concat(w.map(function(bD){return bC(bD,bB.DynElem);},bB.DynNodes));};F.Sync=function(bB,bC){w.iter(function(bD){bD.NSync(bB);},bC.DynNodes);};s=g.View=bx.Class({},null,s);G.GetFieldValues=function(bB){var bC,bD;bC=[];for(var bE in bB)bC.push(bB[bE]);return bC;};H=g.DocElemNode=bx.Class({Equals:function(bB){return this.ElKey===bB.ElKey;},GetHashCode:function(){return this.ElKey;}},null,H);H.New=function(bB,bC,bD,bE,bF,bG){var bH;return new H((bH={Attr:bB,Children:bC,El:bE,ElKey:bF},(bx.SetOptional(bH,"Delimiters",bD),bx.SetOptional(bH,"Render",bG),bH)));};K=J.Dictionary=bx.Class({set_Item:function(bB,bC){this.set(bB,bC);},ContainsKey:function(bB){var bC,bD;bC=this;bD=this.data[this.hash(bB)];return bD==null?false:w.exists(function(bE){return bC.equals.apply(null,[(i.KeyValue(bE))[0],bB]);},bD);},TryGetValue:function(bB,bC){var bD,bE,bF;bD=this;bE=this.data[this.hash(bB)];return bE==null?false:(bF=w.tryPick(function(bG){var bH;bH=i.KeyValue(bG);return bD.equals.apply(null,[bH[0],bB])?{$:1,$0:bH[1]}:null;},bE),bF!=null&&bF.$==1&&(bC.set(bF.$0),true));},Remove:function(bB){return this.remove(bB);},get_Keys:function(){return new _4.New(this);},set:function(bB,bC){var bD,bE,bF,bG;bD=this;bE=this.hash(bB);bF=this.data[bE];bF==null?(this.count=this.count+1,this.data[bE]=new a.Array({K:bB,V:bC})):(bG=w.tryFindIndex(function(bH){return bD.equals.apply(null,[(i.KeyValue(bH))[0],bB]);},bF),bG==null?(this.count=this.count+1,bF.push({K:bB,V:bC})):bF[bG.$0]={K:bB,V:bC});},remove:function(bB){var bC,bD,bE,bF;bC=this;bD=this.hash(bB);bE=this.data[bD];return bE==null?false:(bF=w.filter(function(bG){return!bC.equals.apply(null,[(i.KeyValue(bG))[0],bB]);},bE),w.length(bF)<bE.length&&(this.count=this.count-1,this.data[bD]=bF,true));},get_Item:function(bB){return this.get(bB);},get:function(bB){var bC,bD;bC=this;bD=this.data[this.hash(bB)];return bD==null?_1.notPresent():w.pick(function(bE){var bF;bF=i.KeyValue(bE);return bC.equals.apply(null,[bF[0],bB])?{$:1,$0:bF[1]}:null;},bD);},GetEnumerator:function(){return M.Get0(this);},GetEnumerator0:function(){return M.Get0(w.concat(G.GetFieldValues(this.data)));}},f,K);K.New$5=bx.Ctor(function(){K.New$6.call(this,[],u.Equals,u.Hash);},K);K.New$6=bx.Ctor(function(bB,bC,bD){var bE,bF;f.New.call(this);this.equals=bC;this.hash=bD;this.count=0;this.data=[];bE=M.Get(bB);try{while(bE.MoveNext()){bF=bE.Current();this.set(bF.K,bF.V);}}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}},K);o.Obsolete=function(bB){var bC,bD,bE,bF,bG;bD=bB.s;if(bD==null||(bD!=null&&bD.$==2?(bC=bD.$1,false):bD!=null&&bD.$==3?(bC=bD.$1,false):true))void 0;else{bB.s=null;for(bE=0,bF=w.length(bC)-1;bE<=bF;bE++){bG=w.get(bC,bE);typeof bG=="object"?function(bH){o.Obsolete(bH);}(bG):bG();}}};o.New=function(bB){return{s:bB};};L=g.Elt=bx.Class({},m,L);L.New=function(bB,bC,bD){var bE,bF;bE=x.CreateElemNode(bB,bC,bD.docNode);bF=X.Create(bD.updates);return new L.New$1({$:1,$0:bE},s.Map2Unit(F.Updates(bE.Attr),bF.v),bB,bF);};L.New$1=bx.Ctor(function(bB,bC,bD,bE){m.New.call(this,bB,bC);this.docNode$1=bB;this.updates$1=bC;this.elt=bD;this.rvUpdates=bE;},L);M.Get=function(bB){return bB instanceof a.Array?M.ArrayEnumerator(bB):u.Equals(typeof bB,"string")?M.StringEnumerator(bB):bB.GetEnumerator();};M.ArrayEnumerator=function(bB){return new N.New(0,null,function(bC){var bD;bD=bC.s;return bD<w.length(bB)&&(bC.c=w.get(bB,bD),bC.s=bD+1,true);},void 0);};M.StringEnumerator=function(bB){return new N.New(0,null,function(bC){var bD;bD=bC.s;return bD<bB.length&&(bC.c=bB[bD],bC.s=bD+1,true);},void 0);};M.Get0=function(bB){return bB instanceof a.Array?M.ArrayEnumerator(bB):u.Equals(typeof bB,"string")?M.StringEnumerator(bB):"GetEnumerator0"in bB?bB.GetEnumerator0():bB.GetEnumerator();};N=M.T=bx.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,N);N.New=bx.Ctor(function(bB,bC,bD,bE){f.New.call(this);this.s=bB;this.c=bC;this.n=bD;this.d=bE;},N);Q.New=function(bB,bC,bD,bE){var bF;bF={DynElem:bB,DynFlags:bC,DynNodes:bD};bx.SetOptional(bF,"OnAfterRender",bE);return bF;};R.$cctor=function(){R.$cctor=a.ignore;R.EmptyAttr=null;};S.$cctor=function(){S.$cctor=a.ignore;S.LoadedTemplates=new K.New$5();S.LocalTemplatesLoaded=false;S.TextHoleRE="\\${([^}]+)}";};T=J.HashSet=bx.Class({Add:function(bB){return this.add(bB);},Contains:function(bB){var bC;bC=this.data[this.hash(bB)];return bC==null?false:this.arrContains(bB,bC);},add:function(bB){var bC,bD;bC=this.hash(bB);bD=this.data[bC];return bD==null?(this.data[bC]=[bB],this.count=this.count+1,true):this.arrContains(bB,bD)?false:(bD.push(bB),this.count=this.count+1,true);},arrContains:function(bB,bC){var bD,bE,bF,bG;bD=true;bE=0;bG=bC.length;while(bD&&bE<bG)if(this.equals.apply(null,[bC[bE],bB]))bD=false;else bE=bE+1;return!bD;},ExceptWith:function(bB){var bC;bC=M.Get(bB);try{while(bC.MoveNext())this.Remove(bC.Current());}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bB){var bC,bD,bE,bF;bC=0;bD=bf.concat(this.data);for(bE=0,bF=bD.length-1;bE<=bF;bE++)w.set(bB,bE,bD[bE]);},IntersectWith:function(bB){var bC,bD,bE,bF,bG;bC=new T.New$4(bB,this.equals,this.hash);bD=bf.concat(this.data);for(bE=0,bF=bD.length-1;bE<=bF;bE++){bG=bD[bE];!bC.Contains(bG)?this.Remove(bG):void 0;}},Remove:function(bB){var bC;bC=this.data[this.hash(bB)];return bC==null?false:this.arrRemove(bB,bC)&&(this.count=this.count-1,true);},arrRemove:function(bB,bC){var bD,bE,bF,bG;bD=true;bE=0;bG=bC.length;while(bD&&bE<bG)if(this.equals.apply(null,[bC[bE],bB])){bC.splice.apply(bC,[bE,1]);bD=false;}else bE=bE+1;return!bD;},GetEnumerator:function(){return M.Get(bf.concat(this.data));},GetEnumerator0:function(){return M.Get(bf.concat(this.data));}},f,T);T.New$3=bx.Ctor(function(){T.New$4.call(this,[],u.Equals,u.Hash);},T);T.New$4=bx.Ctor(function(bB,bC,bD){var bE;f.New.call(this);this.equals=bC;this.hash=bD;this.data=[];this.count=0;bE=M.Get(bB);try{while(bE.MoveNext())this.add(bE.Current());}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}},T);T.New$2=bx.Ctor(function(bB){T.New$4.call(this,bB,u.Equals,u.Hash);},T);V.$cctor=function(){V.$cctor=a.ignore;V.Doc=self.document;};W.$cctor=function(){W.$cctor=a.ignore;W.counter=0;};X=g.Updates=bx.Class({},null,X);X.Create=function(bB){var bC;bC=null;bC=X.New(bB,null,function(){var bD;bD=bC.s;return bD===null?(bD=o.Copy(bC.c()),bC.s=bD,o.WhenObsoleteRun(bD,function(){bC.s=null;}),bD):bD;});return bC;};X.New=function(bB,bC,bD){return new X({c:bB,s:bC,v:bD});};Z=Y.T=bx.Class({GetEnumerator:function(){return new N.New(this,null,function(bB){var bC;bC=bB.s;return bC.$==0?false:(bB.c=bC.$0,bB.s=bC.$1,true);},void 0);},GetEnumerator0:function(){return M.Get(this);}},null,Z);w.ofList=function(bB){var bC,bD;bD=[];bC=bB;while(!(bC.$==0)){bD.push(Y.head(bC));bC=Y.tail(bC);}return bD;};w.foldBack=function(bB,bC,bD){var bE,bF,bG,bH,bI;bE=bD;bG=bC.length;for(bH=1,bI=bG;bH<=bI;bH++)bE=bB(bC[bG-bH],bE);return bE;};w.exists=function(bB,bC){var bD,bE,bF,bG;bD=false;bE=0;bG=w.length(bC);while(!bD&&bE<bG)if(bB(bC[bE]))bD=true;else bE=bE+1;return bD;};w.tryPick=function(bB,bC){var bD,bE,bF;bD=null;bE=0;while(bE<bC.length&&bD==null){bF=bB(bC[bE]);bF!=null&&bF.$==1?bD=bF:void 0;bE=bE+1;}return bD;};w.tryFindIndex=function(bB,bC){var bD,bE;bD=null;bE=0;while(bE<bC.length&&bD==null){bB(bC[bE])?bD={$:1,$0:bE}:void 0;bE=bE+1;}return bD;};w.filter=function(bB,bC){var bD,bE,bF;bD=[];for(bE=0,bF=bC.length-1;bE<=bF;bE++)if(bB(bC[bE]))bD.push(bC[bE]);return bD;};w.map=function(bB,bC){var bD,bE,bF;bD=new a.Array(bC.length);for(bE=0,bF=bC.length-1;bE<=bF;bE++)bD[bE]=bB(bC[bE]);return bD;};w.iter=function(bB,bC){var bD,bE;for(bD=0,bE=bC.length-1;bD<=bE;bD++)bB(bC[bD]);};w.pick=function(bB,bC){var bD;bD=w.tryPick(bB,bC);return bD==null?i.FailWith("KeyNotFoundException"):bD.$0;};w.concat=function(bB){return a.Array.prototype.concat.apply([],w.ofSeq(bB));};w.ofSeq=function(bB){var bC,bD;if(bB instanceof a.Array)return bB.slice();else if(bB instanceof Z)return w.ofList(bB);else{bC=[];bD=M.Get(bB);try{while(bD.MoveNext())bC.push(bD.Current());return bC;}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}}};w.choose=function(bB,bC){var bD,bE,bF,bG;bD=[];for(bE=0,bF=bC.length-1;bE<=bF;bE++){bG=bB(bC[bE]);bG==null?void 0:bD.push(bG.$0);}return bD;};w.create=function(bB,bC){var bD,bE,bF;bD=new a.Array(bB);for(bE=0,bF=bB-1;bE<=bF;bE++)bD[bE]=bC;return bD;};w.init=function(bB,bC){var bD,bE,bF;bB<0?i.FailWith("Negative size given."):null;bD=new a.Array(bB);for(bE=0,bF=bB-1;bE<=bF;bE++)bD[bE]=bC(bE);return bD;};w.forall=function(bB,bC){var bD,bE,bF,bG;bD=true;bE=0;bG=w.length(bC);while(bD&&bE<bG)if(bB(bC[bE]))bE=bE+1;else bD=false;return bD;};_1.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};_2.convertTextNode=function(bB){var bC,bD,bE,bF,bG,bH;bC=null;bD=0;bF=bB.textContent;bG=new a.RegExp(z.TextHoleRE(),"g");while(bC=bG.exec(bF),bC!==null){bB.parentNode.insertBefore(self.document.createTextNode(_3.string(bF,{$:1,$0:bD},{$:1,$0:bG.lastIndex-w.get(bC,0).length-1})),bB);bD=bG.lastIndex;bH=self.document.createElement("span");bH.setAttribute("ws-replace",w.get(bC,1).toLowerCase());bB.parentNode.insertBefore(bH,bB);}bG.lastIndex=0;bB.textContent=_3.string(bF,{$:1,$0:bD},null);};_2.failNotLoaded=function(bB){bz.warn("Instantiating non-loaded template",bB);};_2.fillTextHole=function(bB,bC,bD){var bE;bE=bB.querySelector("[ws-replace]");return u.Equals(bE,null)?(bz.warn("Filling non-existent text hole",bD),null):(bE.parentNode.replaceChild(new a.Text(bC),bE),{$:1,$0:bE.getAttribute("ws-replace")});};_2.removeHolesExcept=function(bB,bC){function bD(bE){C.IterSelector(bB,"["+bE+"]",function(bF){if(!bC.Contains(bF.getAttribute(bE)))bF.removeAttribute(bE);});}bD("ws-attr");bD("ws-onafterrender");bD("ws-var");C.IterSelector(bB,"[ws-hole]",function(bE){if(!bC.Contains(bE.getAttribute("ws-hole"))){bE.removeAttribute("ws-hole");while(bE.hasChildNodes())bE.removeChild(bE.lastChild);}});C.IterSelector(bB,"[ws-replace]",function(bE){if(!bC.Contains(bE.getAttribute("ws-replace")))bE.parentNode.removeChild(bE);});C.IterSelector(bB,"[ws-on]",function(bE){bE.setAttribute("ws-on",_8.concat(" ",w.filter(function(bF){return bC.Contains(w.get(_8.SplitChars(bF,[":"],1),1));},_8.SplitChars(bE.getAttribute("ws-on"),[" "],1))));});C.IterSelector(bB,"[ws-attr-holes]",function(bE){var bF,bG,bH,bI,bJ;bF=_8.SplitChars(bE.getAttribute("ws-attr-holes"),[" "],1);for(bG=0,bH=bF.length-1;bG<=bH;bG++){bI=w.get(bF,bG);bE.setAttribute(bI,(bJ=new a.RegExp(z.TextHoleRE(),"g"),bE.getAttribute(bI).replace(bJ,function(bK,bL){return bC.Contains(bL)?bK:"";})));}});};_2.fillInstanceAttrs=function(bB,bC){var bD,bE,bF,bG,bH;_2.convertAttrs(bC);bD=bC.nodeName.toLowerCase();bE=bB.querySelector("[ws-attr="+bD+"]");if(u.Equals(bE,null))bz.warn("Filling non-existent attr hole",bD);else{bE.removeAttribute("ws-attr");for(bF=0,bG=bC.attributes.length-1;bF<=bG;bF++){bH=bC.attributes.item(bF);bH.name==="class"&&bE.hasAttribute("class")?bE.setAttribute("class",bE.getAttribute("class")+" "+bH.nodeValue):bE.setAttribute(bH.name,bH.nodeValue);}}};_2.mapHoles=function(bB,bC){function bD(bE){C.IterSelector(bB,"["+bE+"]",function(bF){var bG,bH;bG=(bH=null,[bC.TryGetValue(bF.getAttribute(bE).toLowerCase(),{get:function(){return bH;},set:function(bI){bH=bI;}}),bH]);bG[0]?bF.setAttribute(bE,bG[1]):void 0;});}bD("ws-hole");bD("ws-replace");bD("ws-attr");bD("ws-onafterrender");bD("ws-var");C.IterSelector(bB,"[ws-on]",function(bE){bE.setAttribute("ws-on",_8.concat(" ",w.map(function(bF){var bG,bH,bI;bG=_8.SplitChars(bF,[":"],1);bH=(bI=null,[bC.TryGetValue(w.get(bG,1),{get:function(){return bI;},set:function(bJ){bI=bJ;}}),bI]);return bH[0]?w.get(bG,0)+":"+bH[1]:bF;},_8.SplitChars(bE.getAttribute("ws-on"),[" "],1))));});C.IterSelector(bB,"[ws-attr-holes]",function(bE){var bF,bG,bH;bF=_8.SplitChars(bE.getAttribute("ws-attr-holes"),[" "],1);for(bG=0,bH=bF.length-1;bG<=bH;bG++)(function(){var bI;function bJ(bK,bL){var bM;bM=i.KeyValue(bL);return bK.replace(new a.RegExp("\\${"+bM[0]+"}","ig"),"${"+bM[1]+"}");}bI=w.get(bF,bG);return bE.setAttribute(bI,(((bx.Curried3(D.fold))(bJ))(bE.getAttribute(bI)))(bC));}());});};_2.fill=function(bB,bC,bD){while(true)if(bB.hasChildNodes())bD=bC.insertBefore(bB.lastChild,bD);else return null;};_2.convertAttrs=function(bB){var bD,bE,bF,bG,bH,bI,bJ,bK;function bC(bL){var bM;bM=bB.getAttribute(bL);bM===null?void 0:bB.setAttribute(bL,bM.toLowerCase());}bD=bB.attributes;bE=[];bF=[];bG=[];for(bH=0,bI=bD.length-1;bH<=bI;bH++){bJ=bD.item(bH);_8.StartsWith(bJ.nodeName,"ws-on")&&bJ.nodeName!=="ws-onafterrender"&&bJ.nodeName!=="ws-on"?(bE.push(bJ.nodeName),bF.push(_3.string(bJ.nodeName,{$:1,$0:"ws-on".length},null)+":"+bJ.nodeValue.toLowerCase())):!_8.StartsWith(bJ.nodeName,"ws-")&&(new a.RegExp(z.TextHoleRE())).test(bJ.nodeValue)?(bJ.nodeValue=(bK=new a.RegExp(z.TextHoleRE(),"g"),bJ.nodeValue.replace(bK,function(bL,bM){return"${"+bM.toLowerCase()+"}";})),bG.push(bJ.nodeName)):void 0;}!(bF.length==0)?bB.setAttribute("ws-on",_8.concat(" ",bF)):void 0;!(bG.length==0)?bB.setAttribute("ws-attr-holes",_8.concat(" ",bG)):void 0;bC("ws-hole");bC("ws-replace");bC("ws-attr");bC("ws-onafterrender");bC("ws-var");w.iter(function(bL){bB.removeAttribute(bL);},bE);};_3.string=function(bB,bC,bD){return bC==null?bD!=null&&bD.$==1?bB.slice(0,bD.$0+1):"":bD==null?bB.slice(bC.$0):bB.slice(bC.$0,bD.$0+1);};D.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};_4=J.KeyCollection=bx.Class({GetEnumerator$1:function(){return M.Get(D.map(function(bB){return bB.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,_4);_4.New=bx.Ctor(function(bB){f.New.call(this);this.d=bB;},_4);_5.get_UseAnimations=function(){return ba.UseAnimations();};_5.Play=function(bB){var bC;bC=null;return bd.Delay(function(){return bd.Bind(_5.Run(a.ignore,ba.Actions(bB)),function(){ba.Finalize(bB);return bd.Return(null);});});};_5.Append=function(bB,bC){return{$:0,$0:be.Append(bB.$0,bC.$0)};};_5.Run=function(bB,bC){var bD;function bE(bF){function bG(bH,bI){var bJ;bJ=bI-bH;bC.Compute(bJ);bB();return bJ<=bD?void a.requestAnimationFrame(function(bK){bG(bH,bK);}):bF();}a.requestAnimationFrame(function(bH){bG(bH,bH);});}bD=bC.Duration;return bD===0?bd.Zero():bd.FromContinuations(function(bF,bG,bH){return bE.apply(null,[bF,bG,bH]);});};_5.Concat=function(bB){return{$:0,$0:be.Concat(D.map(ba.List,bB))};};_5.get_Empty=function(){return{$:0,$0:be.Empty()};};_6.BatchUpdatesEnabled=function(){bb.$cctor();return bb.BatchUpdatesEnabled;};_7.StartProcessor=function(bB){var bC;function bD(){var bE;bE=null;return bd.Delay(function(){return bd.Bind(bB,function(){var bF;bF=bC[0];return bF===1?(bC[0]=0,bd.Zero()):bF===2?(bC[0]=1,bD()):bd.Zero();});});}bC=[0];return function(){var bE;bE=bC[0];bE===0?(bC[0]=1,bd.Start(bD(),null)):bE===1?bC[0]=2:void 0;};};Y.head=function(bB){return bB.$==1?bB.$0:Y.listEmpty();};Y.tail=function(bB){return bB.$==1?bB.$1:Y.listEmpty();};Y.listEmpty=function(){return i.FailWith("The input list was empty.");};_8.concat=function(bB,bC){return w.ofSeq(bC).join(bB);};_8.SplitChars=function(bB,bC,bD){return _8.Split(bB,new a.RegExp("["+_8.RegexEscape(bC.join(""))+"]"),bD);};_8.StartsWith=function(bB,bC){return bB.substring(0,bC.length)==bC;};_8.Split=function(bB,bC,bD){return bD===1?w.filter(function(bE){return bE!=="";},_8.SplitWith(bB,bC)):_8.SplitWith(bB,bC);};_8.RegexEscape=function(bB){return bB.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_8.SplitWith=function(bB,bC){return bB.split(bC);};_.New=function(bB,bC){return{PreviousNodes:bB,Top:bC};};$.get_Empty=function(){return{$:0,$0:new T.New$3()};};$.FindAll=function(bB){var bC;function bD(bF){if(bF!=null&&bF.$==0){bD(bF.$0);bD(bF.$1);}else if(bF!=null&&bF.$==1)bE(bF.$0);else if(bF!=null&&bF.$==2)bD(bF.$0.Current);else if(bF!=null&&bF.$==6)w.iter(bE,bF.$0.Holes);}function bE(bF){bC.push(bF);bD(bF.Children);}bC=[];bD(bB);return{$:0,$0:new T.New$2(bC)};};$.Filter=function(bB,bC){return{$:0,$0:bl.Filter(bB,bC.$0)};};$.Except=function(bB,bC){return{$:0,$0:bl.Except(bB.$0,bC.$0)};};$.ToArray=function(bB){return bl.ToArray(bB.$0);};$.Intersect=function(bB,bC){return{$:0,$0:bl.Intersect(bB.$0,bC.$0)};};ba.UseAnimations=function(){bc.$cctor();return bc.UseAnimations;};ba.Actions=function(bB){return ba.ConcatActions(w.choose(function(bC){return bC.$==1?{$:1,$0:bC.$0}:null;},be.ToArray(bB.$0)));};ba.Finalize=function(bB){w.iter(function(bC){if(bC.$==0)bC.$0();},be.ToArray(bB.$0));};ba.ConcatActions=function(bB){var bC,bD,bE,bF;bC=t.ofSeqNonCopying(bB);bD=w.length(bC);return bD===0?ba.Const():bD===1?w.get(bC,0):(bE=D.max(D.map(function(bG){return bG.Duration;},bC)),(bF=w.map(function(bG){return ba.Prolong(bE,bG);},bC),ba.Def(bE,function(bG){w.iter(function(bH){bH.Compute(bG);},bF);})));};ba.List=function(bB){return bB.$0;};ba.Const=function(bB){return ba.Def(0,function(){return bB;});};ba.Def=function(bB,bC){return{Compute:bC,Duration:bB};};ba.Prolong=function(bB,bC){var bD,bE,bF;bD=bC.Compute;bE=bC.Duration;bF=bs.Create(function(){return bC.Compute(bC.Duration);});return{Compute:function(bG){return bG>=bE?bF.f():bD(bG);},Duration:bB};};bb.$cctor=function(){bb.$cctor=a.ignore;bb.BatchUpdatesEnabled=true;};bc.$cctor=function(){bc.$cctor=a.ignore;bc.CubicInOut=bh.Custom(function(bB){var bC;bC=bB*bB;return 3*bC-2*(bC*bB);});bc.UseAnimations=true;};bd.Delay=function(bB){return function(bC){try{(bB(null))(bC);}catch(bD){bC.k({$:1,$0:bD});}};};bd.Bind=function(bB,bC){return bd.checkCancel(function(bD){bB(bi.New(function(bE){var bF;if(bE.$==0){bF=bE.$0;bd.scheduler().Fork(function(){try{(bC(bF))(bD);}catch(bG){bD.k({$:1,$0:bG});}});}else bd.scheduler().Fork(function(){bD.k(bE);});},bD.ct));});};bd.Zero=function(){bj.$cctor();return bj.Zero;};bd.Start=function(bB,bC){var bD,bE;bD=(bE=(bd.defCTS())[0],bC==null?bE:bC.$0);bd.scheduler().Fork(function(){if(!bD.c)bB(bi.New(function(bF){if(bF.$==1)bd.UncaughtAsyncError(bF.$0);},bD));});};bd.Return=function(bB){return function(bC){bC.k({$:0,$0:bB});};};bd.checkCancel=function(bB){return function(bC){if(bC.ct.c)bd.cancel(bC);else bB(bC);};};bd.defCTS=function(){bj.$cctor();return bj.defCTS;};bd.UncaughtAsyncError=function(bB){bz.log("WebSharper: Uncaught asynchronous exception",bB);};bd.FromContinuations=function(bB){return function(bC){var bD;function bE(bF){if(bD[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bD[0]=true;bd.scheduler().Fork(bF);}}bD=[false];bB(function(bF){bE(function(){bC.k({$:0,$0:bF});});},function(bF){bE(function(){bC.k({$:1,$0:bF});});},function(bF){bE(function(){bC.k({$:2,$0:bF});});});};};bd.cancel=function(bB){bB.k({$:2,$0:new br.New(bB.ct)});};bd.scheduler=function(){bj.$cctor();return bj.scheduler;};be.Append=function(bB,bC){return bB.$==0?bC:bC.$==0?bB:{$:2,$0:bB,$1:bC};};be.ToArray=function(bB){var bC;function bD(bE){if(bE.$==1)bC.push(bE.$0);else if(bE.$==2){bD(bE.$0);bD(bE.$1);}else if(bE.$==3)w.iter(function(bF){bC.push(bF);},bE.$0);}bC=[];bD(bB);return bC.slice(0);};be.Concat=function(bB){var bC;bC=t.ofSeqNonCopying(bB);return t.TreeReduce(be.Empty(),be.Append,bC);};be.Empty=function(){bt.$cctor();return bt.Empty;};bf.concat=function(bB){var bC,bD;bC=[];for(var bE in bB)bC.push.apply(bC,bB[bE]);return bC;};bg=g.DynamicAttrNode=bx.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bB){return _5.get_Empty();},NGetEnterAnim:function(bB){return _5.get_Empty();},NGetChangeAnim:function(bB){return _5.get_Empty();},NSync:function(bB){if(this.dirty){(this.push(bB))(this.value);this.dirty=false;}}},f,bg);bg.New=bx.Ctor(function(bB,bC){var bD;bD=this;f.New.call(this);this.push=bC;this.value=void 0;this.dirty=false;this.updates=s.Map(function(bE){bD.value=bE;bD.dirty=true;},bB);},bg);bh=g.Easing=bx.Class({},f,bh);bh.Custom=function(bB){return new bh.New(bB);};bh.New=bx.Ctor(function(bB){f.New.call(this);this.transformTime=bB;},bh);bi.New=function(bB,bC){return{k:bB,ct:bC};};bj.$cctor=function(){bj.$cctor=a.ignore;bj.noneCT=bk.New(false,[]);bj.scheduler=new bn.New();bj.defCTS=[new bo.New()];bj.Zero=bd.Return();bj.GetCT=function(bB){bB.k({$:0,$0:bB.ct});};};bk.New=function(bB,bC){return{c:bB,r:bC};};bl.Filter=function(bB,bC){return new T.New$2(w.filter(bB,bl.ToArray(bC)));};bl.Except=function(bB,bC){var bD;bD=new T.New$2(bl.ToArray(bC));bD.ExceptWith(bl.ToArray(bB));return bD;};bl.ToArray=function(bB){var bC;bC=w.create(bB.get_Count(),void 0);bB.CopyTo(bC);return bC;};bl.Intersect=function(bB,bC){var bD;bD=new T.New$2(bl.ToArray(bB));bD.IntersectWith(bl.ToArray(bC));return bD;};bm.Clear=function(bB){bB.splice(0,w.length(bB));};bn=bd.Scheduler=bx.Class({Fork:function(bB){var bC;bC=this;this.robin.push(bB);this.idle?(this.idle=false,a.setTimeout(function(){bC.tick();},0)):void 0;},tick:function(){var bB,bC,bD;bC=this;bD=bA.now();bB=true;while(bB)if(this.robin.length===0){this.idle=true;bB=false;}else{(this.robin.shift())();bA.now()-bD>40?(a.setTimeout(function(){bC.tick();},0),bB=false):void 0;}}},f,bn);bn.New=bx.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bn);bo=b.CancellationTokenSource=bx.Class({},f,bo);bo.New=bx.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bo);bp.Children=function(bB,bC){var bD,bE,bF;if(bC!=null&&bC.$==1){bF=[];bD=bC.$0[0].nextSibling;while(bD!==bC.$0[1]){bF.push(bD);bD=bD.nextSibling;}return{$:0,$0:bF};}else return{$:0,$0:w.init(bB.childNodes.length,(bE=bB.childNodes,function(bG){return bE[bG];}))};};bp.Except=function(bB,bC){var bD;bD=bB.$0;return{$:0,$0:w.filter(function(bE){return w.forall(function(bF){return!(bE===bF);},bD);},bC.$0)};};bp.Iter=function(bB,bC){w.iter(bB,bC.$0);};bp.DocChildren=function(bB){var bC;function bD(bE){if(bE!=null&&bE.$==2)bD(bE.$0.Current);else if(bE!=null&&bE.$==1)bC.push(bE.$0.El);else if(bE==null);else if(bE!=null&&bE.$==5)bC.push(bE.$0);else if(bE!=null&&bE.$==4)bC.push(bE.$0.Text);else if(bE!=null&&bE.$==6)w.iter(function(bF){if(bF==null||bF.constructor===_0)bD(bF);else bC.push(bF);},bE.$0.Els);else{bD(bE.$0);bD(bE.$1);}}bC=[];bD(bB.Children);return{$:0,$0:t.ofSeqNonCopying(bC)};};br=b.OperationCanceledException=bx.Class({},bq,br);br.New=bx.Ctor(function(bB){br.New$1.call(this,"The operation was canceled.",null,bB);},br);br.New$1=bx.Ctor(function(bB,bC,bD){this.message=bB;this.inner=bC;_0.setPrototypeOf(this,br.prototype);this.ct=bD;},br);bs.Create=function(bB){return bv.New(false,bB,bs.forceLazy);};bs.forceLazy=function(){var bB;bB=this.v();this.c=true;this.v=bB;this.f=bs.cachedLazy;return bB;};bs.cachedLazy=function(){return this.v;};bt.$cctor=function(){bt.$cctor=a.ignore;bt.Empty={$:0};};bv.New=function(bB,bC,bD){return{c:bB,v:bC,f:bD};};bx.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
