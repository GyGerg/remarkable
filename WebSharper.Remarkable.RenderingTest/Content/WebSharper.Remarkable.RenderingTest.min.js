function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz;a=self;b=a.WebSharper=a.WebSharper||{};c=b.Remarkable=b.Remarkable||{};d=c.RenderingTest=c.RenderingTest||{};e=d.Client=d.Client||{};f=b.Obj=b.Obj||{};g=b.UI=b.UI||{};h=g.Var$1=g.Var$1||{};i=b.Operators=b.Operators||{};j=g.HtmlModule=g.HtmlModule||{};k=j.attr=j.attr||{};l=g.Var=g.Var||{};m=g.Doc=g.Doc||{};n=g.ConcreteVar=g.ConcreteVar||{};o=g.Snap=g.Snap||{};p=b.JavaScript=b.JavaScript||{};q=p.Pervasives=p.Pervasives||{};r=g.AttrProxy=g.AttrProxy||{};s=g.View=g.View||{};t=g.Array=g.Array||{};u=b.Unchecked=b.Unchecked||{};v=a.EventTarget;w=b.Arrays=b.Arrays||{};x=g.Docs=g.Docs||{};y=g.DomUtility=g.DomUtility||{};z=g.Client=g.Client||{};A=z.Templates=z.Templates||{};B=g.Abbrev=g.Abbrev||{};C=B.Fresh=B.Fresh||{};D=b.Seq=b.Seq||{};E=g.AttrModule=g.AttrModule||{};F=g.Attrs=g.Attrs||{};G=p.JS=p.JS||{};H=g.DocElemNode=g.DocElemNode||{};I=a.Node;J=a.Object;K=b.Collections=b.Collections||{};L=K.Dictionary=K.Dictionary||{};M=b.Enumerator=b.Enumerator||{};N=M.T=M.T||{};O=a.CharacterData;P=z.Attrs=z.Attrs||{};Q=P.Dyn=P.Dyn||{};R=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};S=a.WindowOrWorkerGlobalScope;T=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};U=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};V=K.HashSet=K.HashSet||{};W=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};X=g.Elt=g.Elt||{};Y=K.DictionaryUtil=K.DictionaryUtil||{};Z=A.Prepare=A.Prepare||{};_0=b.Slice=b.Slice||{};_1=K.KeyCollection=K.KeyCollection||{};_2=g.An=g.An||{};_3=z.Settings=z.Settings||{};_4=B.Mailbox=B.Mailbox||{};_5=g.Updates=g.Updates||{};_6=b.List=b.List||{};_7=_6.T=_6.T||{};_8=b.Strings=b.Strings||{};_9=z.Docs=z.Docs||{};_=_9.RunState=_9.RunState||{};$=_9.NodeSet=_9.NodeSet||{};ba=g.Anims=g.Anims||{};bb=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bc=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bd=b.Concurrency=b.Concurrency||{};be=g.AppendList=g.AppendList||{};bf=g.DynamicAttrNode=g.DynamicAttrNode||{};bg=g.Easing=g.Easing||{};bh=bd.AsyncBody=bd.AsyncBody||{};bi=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bj=bd.CT=bd.CT||{};bk=B.HashSet=B.HashSet||{};bl=K.HashSetUtil=K.HashSetUtil||{};bm=b.Queue=b.Queue||{};bn=bd.Scheduler=bd.Scheduler||{};bo=b.CancellationTokenSource=b.CancellationTokenSource||{};bp=_9.DomNodes=_9.DomNodes||{};bq=a.Error;br=b.OperationCanceledException=b.OperationCanceledException||{};bs=b.Lazy=b.Lazy||{};bt=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bu=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bv=bu.LazyRecord=bu.LazyRecord||{};bw=a.IntelliFactory;bx=bw&&bw.Runtime;by=a.console;bz=a.Date;e.Main=function(){var bA,bB,bC;function bD(bE){return bA.render(bE);}bA=new a.Remarkable({html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:true,linkTarget:"",typographer:false,quotes:"'\ufffd\ufffd\ufffd\ufffd'"});bB=h.Create$1("");bC=m.Element("div",[],[m.Element("h1",[],[m.TextNode("WebSharper.Remarkable extension sample page")]),m.Element("p",[],[m.TextNode("Type markdown text here:")]),m.InputArea([r.Create("class","input"),r.Create("rows","20")],bB),m.Element("hr",[],[]),m.Element("h4",[],[m.TextNode("Result")]),m.Element("div",[r.Create("class","output")],[m.BindView(function(bE){return m.Verbatim(bD(bE));},bB.get_View())])]);A.LoadLocalTemplates("");m.RunById("main",bC);};f=b.Obj=bx.Class({Equals:function(bA){return this===bA;},GetHashCode:function(){return -1;}},null,f);f.New=bx.Ctor(function(){},f);h=g.Var$1=bx.Class({},f,h);h.Create$1=function(bA){return new n.New(false,o.New({$:2,$0:bA,$1:[]}),bA);};i.FailWith=function(bA){throw new bq(bA);};i.KeyValue=function(bA){return[bA.K,bA.V];};k=j.attr=bx.Class({},f,k);l=g.Var=bx.Class({},f,l);l.New=bx.Ctor(function(){f.New.call(this);},l);m=g.Doc=bx.Class({},f,m);m.Verbatim=function(bA){return m.Mk(t.MapTreeReduce(function(bB){return u.Equals(bB.nodeType,I.TEXT_NODE)?{$:5,$0:bB}:{$:1,$0:x.CreateElemNode(bB,F.EmptyAttr(),null)};},null,function(bB,bC){return{$:0,$0:bB,$1:bC};},y.ChildrenArray(y.ParseHTMLIntoFakeRoot(bA))),s.Const());};m.TextNode=function(bA){return m.Mk({$:5,$0:self.document.createTextNode(bA)},s.Const());};m.InputArea=function(bA,bB){return m.InputInternal("textarea",function(){return D.append(bA,[E.Value(bB)]);});};m.Mk=function(bA,bB){return new m.New(bA,bB);};m.RunById=function(bA,bB){var bC;bC=self.document.getElementById(bA);u.Equals(bC,null)?i.FailWith("invalid id: "+bA):m.Run(bC,bB);};m.Element=function(bA,bB,bC){var bD,bE;bD=r.Concat(bB);bE=m.Concat(bC);return X.New(self.document.createElement(bA),bD,bE);};m.InputInternal=function(bA,bB){var bC;bC=self.document.createElement(bA);return X.New(bC,r.Concat(bB(bC)),m.get_Empty());};m.BindView=function(bA,bB){return m.EmbedView(s.Map(bA,bB));};m.Run=function(bA,bB){x.LinkElement(bA,bB.docNode);m.RunInPlace(false,bA,bB);};m.Concat=function(bA){var bB;bB=t.ofSeqNonCopying(bA);return t.TreeReduce(m.get_Empty(),m.Append,bB);};m.get_Empty=function(){return m.Mk(null,s.Const());};m.EmbedView=function(bA){var bB;bB=x.CreateEmbedNode();return m.Mk({$:2,$0:bB},s.Map(a.ignore,s.Bind(function(bC){x.UpdateEmbedNode(bB,bC.docNode);return bC.updates;},bA)));};m.RunInPlace=function(bA,bB,bC){var bD;bD=x.CreateRunState(bB,bC.docNode);s.Sink(_2.get_UseAnimations()||_3.BatchUpdatesEnabled()?_4.StartProcessor(x.PerformAnimatedUpdate(bA,bD,bC.docNode)):function(){x.PerformSyncUpdate(bA,bD,bC.docNode);},bC.updates);};m.Append=function(bA,bB){return m.Mk({$:0,$0:bA.docNode,$1:bB.docNode},s.Map2Unit(bA.updates,bB.updates));};m.New=bx.Ctor(function(bA,bB){f.New.call(this);this.docNode=bA;this.updates=bB;},m);n=g.ConcreteVar=bx.Class({get_View:function(){return this.view;},UpdateMaybe:function(bA){var bB;bB=bA(this.Get());bB!=null&&bB.$==1?this.Set(bB.$0):void 0;},Get:function(){return this.current;},Set:function(bA){if(this.isConst)(function(bB){return bB("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bB){by.log(bB);}));else{o.Obsolete(this.snap);this.current=bA;this.snap=o.New({$:2,$0:bA,$1:[]});}}},l,n);n.New=bx.Ctor(function(bA,bB,bC){var bD;bD=this;l.New.call(this);this.isConst=bA;this.current=bC;this.snap=bB;this.view=function(){return bD.snap;};this.id=C.Int();},n);o.Map=function(bA,bB){var bC,bD;bC=bB.s;return bC!=null&&bC.$==0?o.New({$:0,$0:bA(bC.$0)}):(bD=o.New({$:3,$0:[],$1:[]}),(o.When(bB,function(bE){o.MarkDone(bD,bB,bA(bE));},bD),bD));};o.WhenObsoleteRun=function(bA,bB){var bC;bC=bA.s;bC==null?bB():bC!=null&&bC.$==2?bC.$1.push(bB):bC!=null&&bC.$==3?bC.$1.push(bB):void 0;};o.When=function(bA,bB,bC){var bD;bD=bA.s;bD==null?o.Obsolete(bC):bD!=null&&bD.$==2?(o.EnqueueSafe(bD.$1,bC),bB(bD.$0)):bD!=null&&bD.$==3?(bD.$0.push(bB),o.EnqueueSafe(bD.$1,bC)):bB(bD.$0);};o.MarkDone=function(bA,bB,bC){var bD;if(bD=bB.s,bD!=null&&bD.$==0)o.MarkForever(bA,bC);else o.MarkReady(bA,bC);};o.WhenRun=function(bA,bB,bC){var bD;bD=bA.s;bD==null?bC():bD!=null&&bD.$==2?(bD.$1.push(bC),bB(bD.$0)):bD!=null&&bD.$==3?(bD.$0.push(bB),bD.$1.push(bC)):bB(bD.$0);};o.Copy=function(bA){var bB,bC,bD;bB=bA.s;return bB==null?bA:bB!=null&&bB.$==2?(bC=o.New({$:2,$0:bB.$0,$1:[]}),(o.WhenObsolete(bA,bC),bC)):bB!=null&&bB.$==3?(bD=o.New({$:3,$0:[],$1:[]}),(o.When(bA,function(bE){o.MarkDone(bD,bA,bE);},bD),bD)):bA;};o.Map2Unit=function(bA,bB){var bC,bD,bE;function bF(){var bG,bH,bI;if(!(bG=bE.s,bG!=null&&bG.$==0||bG!=null&&bG.$==2)){bH=o.ValueAndForever(bA);bI=o.ValueAndForever(bB);bH!=null&&bH.$==1?bI!=null&&bI.$==1?bH.$0[1]&&bI.$0[1]?o.MarkForever(bE,null):o.MarkReady(bE,null):void 0:void 0;}}bC=bA.s;bD=bB.s;return bC!=null&&bC.$==0?bD!=null&&bD.$==0?o.New({$:0,$0:null}):bB:bD!=null&&bD.$==0?bA:(bE=o.New({$:3,$0:[],$1:[]}),(o.When(bA,bF,bE),o.When(bB,bF,bE),bE));};o.Join=function(bA){var bB;bB=o.New({$:3,$0:[],$1:[]});o.When(bA,function(bC){var bD;bD=bC();o.When(bD,function(bE){var bF,bG;if((bF=bD.s,bF!=null&&bF.$==0)&&(bG=bA.s,bG!=null&&bG.$==0))o.MarkForever(bB,bE);else o.MarkReady(bB,bE);},bB);},bB);return bB;};o.EnqueueSafe=function(bA,bB){var bC,bD,bE,bF;bA.push(bB);if(bA.length%20===0){bC=bA.slice(0);bm.Clear(bA);for(bD=0,bE=w.length(bC)-1;bD<=bE;bD++){bF=w.get(bC,bD);typeof bF=="object"?function(bG){if(bG.s)bA.push(bG);}(bF):function(bG){bA.push(bG);}(bF);}}else void 0;};o.MarkForever=function(bA,bB){var bC,bD,bE,bF;bC=bA.s;if(bC!=null&&bC.$==3){bA.s={$:0,$0:bB};bD=bC.$0;for(bE=0,bF=w.length(bD)-1;bE<=bF;bE++)(w.get(bD,bE))(bB);}else void 0;};o.MarkReady=function(bA,bB){var bC,bD,bE,bF;bC=bA.s;if(bC!=null&&bC.$==3){bA.s={$:2,$0:bB,$1:bC.$1};bD=bC.$0;for(bE=0,bF=w.length(bD)-1;bE<=bF;bE++)(w.get(bD,bE))(bB);}else void 0;};o.WhenObsolete=function(bA,bB){var bC;bC=bA.s;bC==null?o.Obsolete(bB):bC!=null&&bC.$==2?o.EnqueueSafe(bC.$1,bB):bC!=null&&bC.$==3?o.EnqueueSafe(bC.$1,bB):void 0;};o.ValueAndForever=function(bA){var bB;bB=bA.s;return bB!=null&&bB.$==0?{$:1,$0:[bB.$0,true]}:bB!=null&&bB.$==2?{$:1,$0:[bB.$0,false]}:null;};q.NewFromSeq=function(bA){var bB,bC,bD;bB={};bC=M.Get(bA);try{while(bC.MoveNext()){bD=bC.Current();bB[bD[0]]=bD[1];}}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}return bB;};r=g.AttrProxy=bx.Class({},null,r);r.Create=function(bA,bB){return F.Static(function(bC){bC.setAttribute(bA,bB);});};r.Concat=function(bA){var bB;bB=t.ofSeqNonCopying(bA);return t.TreeReduce(F.EmptyAttr(),r.Append,bB);};r.Append=function(bA,bB){return F.AppendTree(bA,bB);};s.Const=function(bA){var bB;bB=o.New({$:0,$0:bA});return function(){return bB;};};s.Map=function(bA,bB){return s.CreateLazy(function(){return o.Map(bA,bB());});};s.Bind=function(bA,bB){return s.Join(s.Map(bA,bB));};s.CreateLazy=function(bA){var bB;bB={c:null,o:bA};return function(){var bC,bD;bC=bB.c;return bC===null?(bC=bB.o(),bB.c=bC,(bD=bC.s,bD!=null&&bD.$==0)?bB.o=null:o.WhenObsoleteRun(bC,function(){bB.c=null;}),bC):bC;};};s.Sink=function(bA,bB){function bC(){o.WhenRun(bB(),bA,function(){bd.scheduler().Fork(bC);});}bd.scheduler().Fork(bC);};s.Map2Unit=function(bA,bB){return s.CreateLazy(function(){return o.Map2Unit(bA(),bB());});};s.Join=function(bA){return s.CreateLazy(function(){return o.Join(bA());});};t.MapTreeReduce=function(bA,bB,bC,bD){var bE;function bF(bG,bH){var bI,bJ;return bH<=0?bB:bH===1&&(bG>=0&&bG<bE)?bA(w.get(bD,bG)):(bJ=bH/2>>0,bC(bF(bG,bJ),bF(bG+bJ,bH-bJ)));}bE=w.length(bD);return bF(0,bE);};t.ofSeqNonCopying=function(bA){var bB,bC;if(bA instanceof a.Array)return bA;else if(bA instanceof _7)return w.ofList(bA);else if(bA===null)return[];else{bB=[];bC=M.Get(bA);try{while(bC.MoveNext())bB.push(bC.Current());return bB;}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}}};t.TreeReduce=function(bA,bB,bC){var bD;function bE(bF,bG){var bH,bI;return bG<=0?bA:bG===1&&(bF>=0&&bF<bD)?w.get(bC,bF):(bI=bG/2>>0,bB(bE(bF,bI),bE(bF+bI,bG-bI)));}bD=w.length(bC);return bE(0,bD);};u.Equals=function(bA,bB){var bC,bD,bE,bF;if(bA===bB)return true;else{bC=typeof bA;if(bC=="object"){if(bA===null||bA===void 0||bB===null||bB===void 0)return false;else if("Equals"in bA)return bA.Equals(bB);else if(bA instanceof a.Array&&bB instanceof a.Array)return u.arrayEquals(bA,bB);else if(bA instanceof a.Date&&bB instanceof a.Date)return u.dateEquals(bA,bB);else{bD=[true];for(var bG in bA)if(function(bH){bD[0]=!bA.hasOwnProperty(bH)||bB.hasOwnProperty(bH)&&u.Equals(bA[bH],bB[bH]);return!bD[0];}(bG))break;if(bD[0]){for(var bH in bB)if(function(bI){bD[0]=!bB.hasOwnProperty(bI)||bA.hasOwnProperty(bI);return!bD[0];}(bH))break;}return bD[0];}}else return bC=="function"&&("$Func"in bA?bA.$Func===bB.$Func&&bA.$Target===bB.$Target:"$Invokes"in bA&&"$Invokes"in bB&&u.arrayEquals(bA.$Invokes,bB.$Invokes));}};u.arrayEquals=function(bA,bB){var bC,bD;if(w.length(bA)===w.length(bB)){bC=true;bD=0;while(bC&&bD<w.length(bA)){!u.Equals(w.get(bA,bD),w.get(bB,bD))?bC=false:void 0;bD=bD+1;}return bC;}else return false;};u.dateEquals=function(bA,bB){return bA.getTime()===bB.getTime();};u.Hash=function(bA){var bB;bB=typeof bA;return bB=="function"?0:bB=="boolean"?bA?1:0:bB=="number"?bA:bB=="string"?u.hashString(bA):bB=="object"?bA==null?0:bA instanceof a.Array?u.hashArray(bA):u.hashObject(bA):0;};u.hashString=function(bA){var bB,bC,bD;if(bA===null)return 0;else{bB=5381;for(bC=0,bD=bA.length-1;bC<=bD;bC++)bB=u.hashMix(bB,bA[bC].charCodeAt());return bB;}};u.hashArray=function(bA){var bB,bC,bD;bB=-34948909;for(bC=0,bD=w.length(bA)-1;bC<=bD;bC++)bB=u.hashMix(bB,u.Hash(w.get(bA,bC)));return bB;};u.hashObject=function(bA){var bB,bC;if("GetHashCode"in bA)return bA.GetHashCode();else{bB=[0];for(var bD in bA)if(function(bE){bB[0]=u.hashMix(u.hashMix(bB[0],u.hashString(bE)),u.Hash(bA[bE]));return false;}(bD))break;return bB[0];}};u.hashMix=function(bA,bB){return(bA<<5)+bA+bB;};u.Compare=function(bA,bB){var bC,bD,bE,bF,bG,bH;if(bA===bB)return 0;else{bD=typeof bA;switch(bD=="function"?1:bD=="boolean"?2:bD=="number"?2:bD=="string"?2:bD=="object"?3:0){case 0:return typeof bB=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return bA<bB?-1:1;case 3:if(bA===null)bE=-1;else if(bB===null)bE=1;else if("CompareTo"in bA)bE=bA.CompareTo(bB);else if("CompareTo0"in bA)bE=bA.CompareTo0(bB);else if(bA instanceof a.Array&&bB instanceof a.Array)bE=u.compareArrays(bA,bB);else if(bA instanceof a.Date&&bB instanceof a.Date)bE=u.compareDates(bA,bB);else{bF=[0];for(var bI in bA)if(function(bJ){return!bA.hasOwnProperty(bJ)?false:!bB.hasOwnProperty(bJ)?(bF[0]=1,true):(bF[0]=u.Compare(bA[bJ],bB[bJ]),bF[0]!==0);}(bI))break;if(bF[0]===0){for(var bJ in bB)if(function(bK){return!bB.hasOwnProperty(bK)?false:!bA.hasOwnProperty(bK)&&(bF[0]=-1,true);}(bJ))break;}bE=bF[0];}return bE;}}};u.compareArrays=function(bA,bB){var bC,bD;if(w.length(bA)<w.length(bB))return -1;else if(w.length(bA)>w.length(bB))return 1;else{bC=0;bD=0;while(bC===0&&bD<w.length(bA)){bC=u.Compare(w.get(bA,bD),w.get(bB,bD));bD=bD+1;}return bC;}};u.compareDates=function(bA,bB){return u.Compare(bA.getTime(),bB.getTime());};w.get=function(bA,bB){w.checkBounds(bA,bB);return bA[bB];};w.length=function(bA){return bA.dims===2?bA.length*bA.length:bA.length;};w.checkBounds=function(bA,bB){if(bB<0||bB>=bA.length)i.FailWith("Index was outside the bounds of the array.");};w.set=function(bA,bB,bC){w.checkBounds(bA,bB);bA[bB]=bC;};x.CreateElemNode=function(bA,bB,bC){var bD;x.LinkElement(bA,bC);bD=F.Insert(bA,bB);return H.New(bD,bC,null,bA,C.Int(),bx.GetOptional(bD.OnAfterRender));};x.LinkElement=function(bA,bB){x.InsertDoc(bA,bB,null);};x.InsertDoc=function(bA,bB,bC){var bD;return bB!=null&&bB.$==1?x.InsertNode(bA,bB.$0.El,bC):bB!=null&&bB.$==2?(bD=bB.$0,(bD.Dirty=false,x.InsertDoc(bA,bD.Current,bC))):bB==null?bC:bB!=null&&bB.$==4?x.InsertNode(bA,bB.$0.Text,bC):bB!=null&&bB.$==5?x.InsertNode(bA,bB.$0,bC):bB!=null&&bB.$==6?w.foldBack(function(bE,bF){return bE==null||bE.constructor===J?x.InsertDoc(bA,bE,bF):x.InsertNode(bA,bE,bF);},bB.$0.Els,bC):x.InsertDoc(bA,bB.$0,x.InsertDoc(bA,bB.$1,bC));};x.CreateEmbedNode=function(){return{Current:null,Dirty:false};};x.UpdateEmbedNode=function(bA,bB){bA.Current=bB;bA.Dirty=true;};x.InsertNode=function(bA,bB,bC){y.InsertAt(bA,bC,bB);return bB;};x.CreateRunState=function(bA,bB){return _.New($.get_Empty(),x.CreateElemNode(bA,F.EmptyAttr(),bB));};x.PerformAnimatedUpdate=function(bA,bB,bC){var bD;return _2.get_UseAnimations()?(bD=null,bd.Delay(function(){var bE,bF,bG;bE=$.FindAll(bC);bF=x.ComputeChangeAnim(bB,bE);bG=x.ComputeEnterAnim(bB,bE);return bd.Bind(_2.Play(_2.Append(bF,x.ComputeExitAnim(bB,bE))),function(){return bd.Bind(x.SyncElemNodesNextFrame(bA,bB),function(){return bd.Bind(_2.Play(bG),function(){bB.PreviousNodes=bE;return bd.Return(null);});});});})):x.SyncElemNodesNextFrame(bA,bB);};x.PerformSyncUpdate=function(bA,bB,bC){var bD;bD=$.FindAll(bC);x.SyncElemNode(bA,bB.Top);bB.PreviousNodes=bD;};x.SyncElemNodesNextFrame=function(bA,bB){function bC(bD){a.requestAnimationFrame(function(){x.SyncElemNode(bA,bB.Top);bD();});}return _3.BatchUpdatesEnabled()?bd.FromContinuations(function(bD,bE,bF){return bC.apply(null,[bD,bE,bF]);}):(x.SyncElemNode(bA,bB.Top),bd.Return(null));};x.ComputeExitAnim=function(bA,bB){return _2.Concat(w.map(function(bC){return F.GetExitAnim(bC.Attr);},$.ToArray($.Except(bB,$.Filter(function(bC){return F.HasExitAnim(bC.Attr);},bA.PreviousNodes)))));};x.ComputeEnterAnim=function(bA,bB){return _2.Concat(w.map(function(bC){return F.GetEnterAnim(bC.Attr);},$.ToArray($.Except(bA.PreviousNodes,$.Filter(function(bC){return F.HasEnterAnim(bC.Attr);},bB)))));};x.ComputeChangeAnim=function(bA,bB){var bC;function bD(bE){return F.HasChangeAnim(bE.Attr);}bC=function(bE){return $.Filter(bD,bE);};return _2.Concat(w.map(function(bE){return F.GetChangeAnim(bE.Attr);},$.ToArray($.Intersect(bC(bA.PreviousNodes),bC(bB)))));};x.SyncElemNode=function(bA,bB){!bA?x.SyncElement(bB):void 0;x.Sync(bB.Children);x.AfterRender(bB);};x.SyncElement=function(bA){function bB(bC){function bD(bE){var bF,bG;return bE!=null&&bE.$==0?bD(bE.$0)||bD(bE.$1):bE!=null&&bE.$==2?(bF=bE.$0,bF.Dirty||bD(bF.Current)):bE!=null&&bE.$==6&&(bG=bE.$0,bG.Dirty||w.exists(bB,bG.Holes));}return bD(bC.Children);}F.Sync(bA.El,bA.Attr);bB(bA)?x.DoSyncElement(bA):void 0;};x.Sync=function(bA){var bB,bC;if(bA!=null&&bA.$==1)x.SyncElemNode(false,bA.$0);else if(bA!=null&&bA.$==2)x.Sync(bA.$0.Current);else if(bA==null);else if(bA!=null&&bA.$==5);else if(bA!=null&&bA.$==4){bB=bA.$0;bB.Dirty?(bB.Text.nodeValue=bB.Value,bB.Dirty=false):void 0;}else if(bA!=null&&bA.$==6){bC=bA.$0;w.iter(function(bD){x.SyncElemNode(false,bD);},bC.Holes);w.iter(function(bD){F.Sync(bD[0],bD[1]);},bC.Attrs);x.AfterRender(bC);}else{x.Sync(bA.$0);x.Sync(bA.$1);}};x.AfterRender=function(bA){var bB;bB=bx.GetOptional(bA.Render);bB!=null&&bB.$==1?(bB.$0(bA.El),bx.SetOptional(bA,"Render",null)):void 0;};x.DoSyncElement=function(bA){var bB,bC,bD;function bE(bF,bG){var bH,bI;return bF!=null&&bF.$==1?bF.$0.El:bF!=null&&bF.$==2?(bH=bF.$0,bH.Dirty?(bH.Dirty=false,x.InsertDoc(bB,bH.Current,bG)):bE(bH.Current,bG)):bF==null?bG:bF!=null&&bF.$==4?bF.$0.Text:bF!=null&&bF.$==5?bF.$0:bF!=null&&bF.$==6?(bI=bF.$0,(bI.Dirty?bI.Dirty=false:void 0,w.foldBack(function(bJ,bK){return bJ==null||bJ.constructor===J?bE(bJ,bK):bJ;},bI.Els,bG))):bE(bF.$0,bE(bF.$1,bG));}bB=bA.El;bp.Iter((bC=bA.El,function(bF){y.RemoveNode(bC,bF);}),bp.Except(bp.DocChildren(bA),bp.Children(bA.El,bx.GetOptional(bA.Delimiters))));bE(bA.Children,(bD=bx.GetOptional(bA.Delimiters),bD!=null&&bD.$==1?bD.$0[1]:null));};y.ParseHTMLIntoFakeRoot=function(bA){var bB,bC,bD,bE,bF;bB=self.document.createElement("div");return!y.rhtml().test(bA)?(bB.appendChild(self.document.createTextNode(bA)),bB):(bC=(bD=y.rtagName().exec(bA),u.Equals(bD,null)?"":w.get(bD,1).toLowerCase()),(bE=(bF=(y.wrapMap())[bC],bF?bF:y.defaultWrap()),(bB.innerHTML=bE[1]+bA.replace(y.rxhtmlTag(),"<$1></$2>")+bE[2],function(bG,bH){var bI;while(true)if(bH===0)return bG;else{bI=bH;bG=bG.lastChild;bH=bI-1;}}(bB,bE[0]))));};y.ChildrenArray=function(bA){var bB,bC,bD;bB=[];for(bC=0,bD=bA.childNodes.length-1;bC<=bD;bC++)bB.push(bA.childNodes[bC]);return bB;};y.rhtml=function(){T.$cctor();return T.rhtml;};y.wrapMap=function(){T.$cctor();return T.wrapMap;};y.defaultWrap=function(){T.$cctor();return T.defaultWrap;};y.rxhtmlTag=function(){T.$cctor();return T.rxhtmlTag;};y.rtagName=function(){T.$cctor();return T.rtagName;};y.IterSelector=function(bA,bB,bC){var bD,bE,bF;bD=bA.querySelectorAll(bB);for(bE=0,bF=bD.length-1;bE<=bF;bE++)bC(bD[bE]);};y.InsertAt=function(bA,bB,bC){var bD;if(!(bC.parentNode===bA&&bB===(bD=bC.nextSibling,u.Equals(bD,null)?null:bD)))bA.insertBefore(bC,bB);};y.RemoveNode=function(bA,bB){if(bB.parentNode===bA)bA.removeChild(bB);};A.LoadLocalTemplates=function(bA){!A.LocalTemplatesLoaded()?(A.set_LocalTemplatesLoaded(true),A.LoadNestedTemplates(self.document.body,"")):void 0;A.LoadedTemplates().set_Item(bA,A.LoadedTemplateFile(""));};A.LocalTemplatesLoaded=function(){U.$cctor();return U.LocalTemplatesLoaded;};A.set_LocalTemplatesLoaded=function(bA){U.$cctor();U.LocalTemplatesLoaded=bA;};A.LoadNestedTemplates=function(bA,bB){var bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP;function bC(bQ){var bR,bS;if(!bD.ContainsKey(bQ)){bR=(bS=null,[bE.TryGetValue(bQ,{get:function(){return bS;},set:function(bT){bS=bT;}}),bS]);bR[0]?(bP.Add(bQ),bE.Remove(bQ),A.PrepareTemplateStrict(bB,{$:1,$0:bQ},bR[1],{$:1,$0:bC})):by.warn(bP.Contains(bQ)?"Encountered loop when instantiating "+bQ:"Local template does not exist: "+bQ);}}bD=A.LoadedTemplateFile(bB);bE=new L.New$5();bF=bA.querySelectorAll("[ws-template]");for(bG=0,bH=bF.length-1;bG<=bH;bG++){bI=bF[bG];bJ=bI.getAttribute("ws-template").toLowerCase();bI.removeAttribute("ws-template");bE.set_Item(bJ,A.FakeRootSingle(bI));}bK=bA.querySelectorAll("[ws-children-template]");for(bL=0,bM=bK.length-1;bL<=bM;bL++){bN=bK[bL];bO=bN.getAttribute("ws-children-template").toLowerCase();bN.removeAttribute("ws-children-template");bE.set_Item(bO,A.FakeRoot(bN));}bP=new V.New$3();while(bE.count>0)bC(D.head(bE.get_Keys()));};A.LoadedTemplates=function(){U.$cctor();return U.LoadedTemplates;};A.LoadedTemplateFile=function(bA){var bB,bC,bD;bB=(bC=null,[A.LoadedTemplates().TryGetValue(bA,{get:function(){return bC;},set:function(bE){bC=bE;}}),bC]);return bB[0]?bB[1]:(bD=new L.New$5(),(A.LoadedTemplates().set_Item(bA,bD),bD));};A.FakeRootSingle=function(bA){var bB,bC,bD,bE;bA.removeAttribute("ws-template");bB=bA.getAttribute("ws-replace");bB===null?void 0:(bA.removeAttribute("ws-replace"),bC=bA.parentNode,u.Equals(bC,null)?void 0:(bD=self.document.createElement(bA.tagName),bD.setAttribute("ws-replace",bB),bC.replaceChild(bD,bA)));bE=self.document.createElement("div");bE.appendChild(bA);return bE;};A.FakeRoot=function(bA){var bB;bB=self.document.createElement("div");while(bA.hasChildNodes())bB.appendChild(bA.firstChild);return bB;};A.PrepareTemplateStrict=function(bA,bB,bC,bD){var bE;function bF(bK,bL){var bM,bN,bO,bP,bQ,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca;function bR(cb){}while(true)switch(bK){case 0:if(bL!==null){bM=bL.nextSibling;if(u.Equals(bL.nodeType,I.TEXT_NODE))Z.convertTextNode(bL);else if(u.Equals(bL.nodeType,I.ELEMENT_NODE))bH(bL);bL=bM;}else return null;break;case 1:bS=_0.string(bL.nodeName,{$:1,$0:3},null).toLowerCase();bT=(bN=bS.indexOf("."),bN===-1?[bA,bS]:[_0.string(bS,null,{$:1,$0:bN-1}),_0.string(bS,{$:1,$0:bN+1},null)]);bU=bT[1];bV=bT[0];if(bV!==""&&!A.LoadedTemplates().ContainsKey(bV))return Z.failNotLoaded(bU);else{if(bV===""&&bD!=null)bD.$0(bU);bW=A.LoadedTemplates().get_Item(bV);if(!bW.ContainsKey(bU))return Z.failNotLoaded(bU);else{bX=bW.get_Item(bU);bY=bX.cloneNode(true);bZ=new V.New$3();b0=new L.New$5();b1=bL.attributes;for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=b1.item(b2).name.toLowerCase();b0.set_Item(b4,(b5=b1.item(b2).nodeValue,b5===""?b4:b5.toLowerCase()));!bZ.Add(b4)?by.warn("Hole mapped twice",b4):void 0;}for(b6=0,b7=bL.childNodes.length-1;b6<=b7;b6++){b8=bL.childNodes[b6];u.Equals(b8.nodeType,I.ELEMENT_NODE)?!bZ.Add(b8.nodeName.toLowerCase())?by.warn("Hole filled twice",bU):void 0:void 0;}b9=bL.childNodes.length===1&&u.Equals(bL.firstChild.nodeType,I.TEXT_NODE);if(b9){bP=Z.fillTextHole(bY,bL.firstChild.textContent,bU);((function(cb){return function(cc){if(cc!=null)cb(cc.$0);};}((bQ=function(cb){return function(cc){return cb.Add(cc);};}(bZ),function(cb){return bR(bQ(cb));})))(bP));}Z.removeHolesExcept(bY,bZ);if(!b9){for(b_=0,b$=bL.childNodes.length-1;b_<=b$;b_++){ca=bL.childNodes[b_];u.Equals(ca.nodeType,I.ELEMENT_NODE)?ca.hasAttributes()?Z.fillInstanceAttrs(bY,ca):bG(bY,ca):void 0;}}Z.mapHoles(bY,b0);Z.fill(bY,bL.parentNode,bL);bL.parentNode.removeChild(bL);return;}}break;}}function bG(bK,bL){var bM,bO,bP;function bN(bQ,bR){var bS;if(bO==="title"&&bL.hasChildNodes()){bS=y.ParseHTMLIntoFakeRoot(bL.textContent);bL.removeChild(bL.firstChild);while(bS.hasChildNodes())bL.appendChild(bS.firstChild);}else null;bH(bL);return Z.fill(bL,bQ,bR);}bO=bL.nodeName.toLowerCase();y.IterSelector(bK,"[ws-attr-holes]",function(bQ){var bR,bS,bT,bU,bV;bR=_8.SplitChars(bQ.getAttribute("ws-attr-holes"),[" "],1);for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=w.get(bR,bS);bQ.setAttribute(bU,(bV=new a.RegExp("\\${"+bO+"}","ig"),bQ.getAttribute(bU).replace(bV,bL.textContent)));}});bP=bK.querySelector("[ws-hole="+bO+"]");if(u.Equals(bP,null)){bM=bK.querySelector("[ws-replace="+bO+"]");return u.Equals(bM,null)?null:(bN(bM.parentNode,bM),void bM.parentNode.removeChild(bM));}else{while(bP.hasChildNodes())bP.removeChild(bP.lastChild);bP.removeAttribute("ws-hole");return bN(bP,null);}}function bH(bK){if(_8.StartsWith(bK.nodeName.toLowerCase(),"ws-"))bJ(bK);else{Z.convertAttrs(bK);bI(bK.firstChild);}}function bI(bK){return bF(0,bK);}function bJ(bK){return bF(1,bK);}bE=(bB==null?"":bB.$0).toLowerCase();A.LoadedTemplateFile(bA).set_Item(bE,bC);bC.hasChildNodes()?(function(bK){var bL,bM,bN,bO;while(true){bL=bK.querySelector("[ws-template]");if(u.Equals(bL,null)){bM=bK.querySelector("[ws-children-template]");if(u.Equals(bM,null))return null;else{bN=bM.getAttribute("ws-children-template");bM.removeAttribute("ws-children-template");A.PrepareTemplateStrict(bA,{$:1,$0:bN},bM,null);bK=bK;}}else{bO=bL.getAttribute("ws-template");(A.PrepareSingleTemplate(bA,{$:1,$0:bO},bL))(null);bK=bK;}}}(bC),bI(bC.firstChild)):void 0;};A.PrepareSingleTemplate=function(bA,bB,bC){var bD;bD=A.FakeRootSingle(bC);return function(bE){A.PrepareTemplateStrict(bA,bB,bD,bE);};};A.TextHoleRE=function(){U.$cctor();return U.TextHoleRE;};C.Int=function(){C.set_counter(C.counter()+1);return C.counter();};C.set_counter=function(bA){W.$cctor();W.counter=bA;};C.counter=function(){W.$cctor();return W.counter;};D.append=function(bA,bB){return{GetEnumerator:function(){var bC,bD;bC=M.Get(bA);bD=[true];return new N.New(bC,null,function(bE){var bF;return bE.s.MoveNext()?(bE.c=bE.s.Current(),true):(bF=bE.s,!u.Equals(bF,null)?bF.Dispose():void 0,bE.s=null,bD[0]&&(bD[0]=false,bE.s=M.Get(bB),bE.s.MoveNext()?(bE.c=bE.s.Current(),true):(bE.s.Dispose(),bE.s=null,false)));},function(bE){var bF;bF=bE.s;!u.Equals(bF,null)?bF.Dispose():void 0;});}};};D.iter=function(bA,bB){var bC;bC=M.Get(bB);try{while(bC.MoveNext())bA(bC.Current());}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}};D.head=function(bA){var bB;bB=M.Get(bA);try{return bB.MoveNext()?bB.Current():D.insufficient();}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}};D.fold=function(bA,bB,bC){var bD,bE;bD=bB;bE=M.Get(bC);try{while(bE.MoveNext())bD=bA(bD,bE.Current());return bD;}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}};D.map=function(bA,bB){return{GetEnumerator:function(){var bC;bC=M.Get(bB);return new N.New(null,null,function(bD){return bC.MoveNext()&&(bD.c=bA(bC.Current()),true);},function(){bC.Dispose();});}};};D.max=function(bA){var bB,bC,bD;bB=M.Get(bA);try{if(!bB.MoveNext())D.seqEmpty();bC=bB.Current();while(bB.MoveNext()){bD=bB.Current();u.Compare(bD,bC)===1?bC=bD:void 0;}return bC;}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}};D.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};E.Value=function(bA){function bB(bC){return{$:1,$0:bC};}return E.CustomValue(bA,a.id,function(bC){return bB(a.id(bC));});};E.CustomValue=function(bA,bB,bC){return E.CustomVar(bA,function(bD,bE){bD.value=bB(bE);},function(bD){return bC(bD.value);});};E.CustomVar=function(bA,bB,bC){function bD(bF,bG){return bA.UpdateMaybe(function(bH){var bI,bJ;bI=bC(bF);return bI!=null&&bI.$==1&&(!u.Equals(bI.$0,bH)&&(bJ=[bI,bI.$0],true))?bJ[0]:null;});}function bE(bF,bG){var bH,bI;bH=bC(bF);return bH!=null&&bH.$==1&&(u.Equals(bH.$0,bG)&&(bI=bH.$0,true))?null:bB(bF,bG);}return r.Concat([E.Handler("change",function(bF){return function(bG){return bD(bF,bG);};}),E.Handler("input",function(bF){return function(bG){return bD(bF,bG);};}),E.Handler("keypress",function(bF){return function(bG){return bD(bF,bG);};}),E.DynamicCustom(function(bF){return function(bG){return bE(bF,bG);};},bA.get_View())]);};E.Handler=function(bA,bB){return F.Static(function(bC){bC.addEventListener(bA,function(bD){return(bB(bC))(bD);},false);});};E.DynamicCustom=function(bA,bB){return F.Dynamic(bB,bA);};F.Static=function(bA){return new r({$:3,$0:bA});};F.Insert=function(bA,bB){var bC,bD,bE;function bF(bG){if(!(bG===null))if(bG!=null&&bG.$==1)bC.push(bG.$0);else if(bG!=null&&bG.$==2){bF(bG.$0);bF(bG.$1);}else if(bG!=null&&bG.$==3)bG.$0(bA);else if(bG!=null&&bG.$==4)bD.push(bG.$0);}bC=[];bD=[];bF(bB);bE=bC.slice(0);return Q.New(bA,F.Flags(bB),bE,bD.length===0?null:{$:1,$0:function(bG){D.iter(function(bH){bH(bG);},bD);}});};F.EmptyAttr=function(){R.$cctor();return R.EmptyAttr;};F.Flags=function(bA){return bA!==null&&bA.hasOwnProperty("flags")?bA.flags:0;};F.Updates=function(bA){return t.MapTreeReduce(function(bB){return bB.NChanged();},s.Const(),s.Map2Unit,bA.DynNodes);};F.AppendTree=function(bA,bB){var bC;return bA===null?bB:bB===null?bA:(bC=new r({$:2,$0:bA,$1:bB}),(F.SetFlags(bC,F.Flags(bA)|F.Flags(bB)),bC));};F.SetFlags=function(bA,bB){bA.flags=bB;};F.Dynamic=function(bA,bB){return new r({$:1,$0:new bf.New(bA,bB)});};F.HasExitAnim=function(bA){var bB;bB=2;return(bA.DynFlags&bB)===bB;};F.GetExitAnim=function(bA){return F.GetAnim(bA,function(bB,bC){return bB.NGetExitAnim(bC);});};F.HasEnterAnim=function(bA){var bB;bB=1;return(bA.DynFlags&bB)===bB;};F.GetEnterAnim=function(bA){return F.GetAnim(bA,function(bB,bC){return bB.NGetEnterAnim(bC);});};F.HasChangeAnim=function(bA){var bB;bB=4;return(bA.DynFlags&bB)===bB;};F.GetChangeAnim=function(bA){return F.GetAnim(bA,function(bB,bC){return bB.NGetChangeAnim(bC);});};F.GetAnim=function(bA,bB){return _2.Concat(w.map(function(bC){return bB(bC,bA.DynElem);},bA.DynNodes));};F.Sync=function(bA,bB){w.iter(function(bC){bC.NSync(bA);},bB.DynNodes);};s=g.View=bx.Class({},null,s);G.GetFieldValues=function(bA){var bB,bC;bB=[];for(var bD in bA)bB.push(bA[bD]);return bB;};H=g.DocElemNode=bx.Class({Equals:function(bA){return this.ElKey===bA.ElKey;},GetHashCode:function(){return this.ElKey;}},null,H);H.New=function(bA,bB,bC,bD,bE,bF){var bG;return new H((bG={Attr:bA,Children:bB,El:bD,ElKey:bE},(bx.SetOptional(bG,"Delimiters",bC),bx.SetOptional(bG,"Render",bF),bG)));};L=K.Dictionary=bx.Class({set_Item:function(bA,bB){this.set(bA,bB);},ContainsKey:function(bA){var bB,bC;bB=this;bC=this.data[this.hash(bA)];return bC==null?false:w.exists(function(bD){return bB.equals.apply(null,[(i.KeyValue(bD))[0],bA]);},bC);},TryGetValue:function(bA,bB){var bC,bD,bE;bC=this;bD=this.data[this.hash(bA)];return bD==null?false:(bE=w.tryPick(function(bF){var bG;bG=i.KeyValue(bF);return bC.equals.apply(null,[bG[0],bA])?{$:1,$0:bG[1]}:null;},bD),bE!=null&&bE.$==1&&(bB.set(bE.$0),true));},Remove:function(bA){return this.remove(bA);},get_Keys:function(){return new _1.New(this);},set:function(bA,bB){var bC,bD,bE,bF;bC=this;bD=this.hash(bA);bE=this.data[bD];bE==null?(this.count=this.count+1,this.data[bD]=new a.Array({K:bA,V:bB})):(bF=w.tryFindIndex(function(bG){return bC.equals.apply(null,[(i.KeyValue(bG))[0],bA]);},bE),bF==null?(this.count=this.count+1,bE.push({K:bA,V:bB})):bE[bF.$0]={K:bA,V:bB});},remove:function(bA){var bB,bC,bD,bE;bB=this;bC=this.hash(bA);bD=this.data[bC];return bD==null?false:(bE=w.filter(function(bF){return!bB.equals.apply(null,[(i.KeyValue(bF))[0],bA]);},bD),w.length(bE)<bD.length&&(this.count=this.count-1,this.data[bC]=bE,true));},get_Item:function(bA){return this.get(bA);},get:function(bA){var bB,bC;bB=this;bC=this.data[this.hash(bA)];return bC==null?Y.notPresent():w.pick(function(bD){var bE;bE=i.KeyValue(bD);return bB.equals.apply(null,[bE[0],bA])?{$:1,$0:bE[1]}:null;},bC);},GetEnumerator:function(){return M.Get0(this);},GetEnumerator0:function(){return M.Get0(w.concat(G.GetFieldValues(this.data)));}},f,L);L.New$5=bx.Ctor(function(){L.New$6.call(this,[],u.Equals,u.Hash);},L);L.New$6=bx.Ctor(function(bA,bB,bC){var bD,bE;f.New.call(this);this.equals=bB;this.hash=bC;this.count=0;this.data=[];bD=M.Get(bA);try{while(bD.MoveNext()){bE=bD.Current();this.set(bE.K,bE.V);}}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}},L);o.Obsolete=function(bA){var bB,bC,bD,bE,bF;bC=bA.s;if(bC==null||(bC!=null&&bC.$==2?(bB=bC.$1,false):bC!=null&&bC.$==3?(bB=bC.$1,false):true))void 0;else{bA.s=null;for(bD=0,bE=w.length(bB)-1;bD<=bE;bD++){bF=w.get(bB,bD);typeof bF=="object"?function(bG){o.Obsolete(bG);}(bF):bF();}}};o.New=function(bA){return{s:bA};};M.Get=function(bA){return bA instanceof a.Array?M.ArrayEnumerator(bA):u.Equals(typeof bA,"string")?M.StringEnumerator(bA):bA.GetEnumerator();};M.ArrayEnumerator=function(bA){return new N.New(0,null,function(bB){var bC;bC=bB.s;return bC<w.length(bA)&&(bB.c=w.get(bA,bC),bB.s=bC+1,true);},void 0);};M.StringEnumerator=function(bA){return new N.New(0,null,function(bB){var bC;bC=bB.s;return bC<bA.length&&(bB.c=bA[bC],bB.s=bC+1,true);},void 0);};M.Get0=function(bA){return bA instanceof a.Array?M.ArrayEnumerator(bA):u.Equals(typeof bA,"string")?M.StringEnumerator(bA):"GetEnumerator0"in bA?bA.GetEnumerator0():bA.GetEnumerator();};N=M.T=bx.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,N);N.New=bx.Ctor(function(bA,bB,bC,bD){f.New.call(this);this.s=bA;this.c=bB;this.n=bC;this.d=bD;},N);Q.New=function(bA,bB,bC,bD){var bE;bE={DynElem:bA,DynFlags:bB,DynNodes:bC};bx.SetOptional(bE,"OnAfterRender",bD);return bE;};R.$cctor=function(){R.$cctor=a.ignore;R.EmptyAttr=null;};T.$cctor=function(){var bA;T.$cctor=a.ignore;T.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");T.rtagName=new a.RegExp("<([\\w:]+)");T.rhtml=new a.RegExp("<|&#?\\w+;");T.wrapMap=(bA=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bA,tbody:bA,tfoot:bA,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});T.defaultWrap=[0,"",""];};U.$cctor=function(){U.$cctor=a.ignore;U.LoadedTemplates=new L.New$5();U.LocalTemplatesLoaded=false;U.TextHoleRE="\\${([^}]+)}";};V=K.HashSet=bx.Class({Add:function(bA){return this.add(bA);},Contains:function(bA){var bB;bB=this.data[this.hash(bA)];return bB==null?false:this.arrContains(bA,bB);},add:function(bA){var bB,bC;bB=this.hash(bA);bC=this.data[bB];return bC==null?(this.data[bB]=[bA],this.count=this.count+1,true):this.arrContains(bA,bC)?false:(bC.push(bA),this.count=this.count+1,true);},arrContains:function(bA,bB){var bC,bD,bE,bF;bC=true;bD=0;bF=bB.length;while(bC&&bD<bF)if(this.equals.apply(null,[bB[bD],bA]))bC=false;else bD=bD+1;return!bC;},ExceptWith:function(bA){var bB;bB=M.Get(bA);try{while(bB.MoveNext())this.Remove(bB.Current());}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bA){var bB,bC,bD,bE;bB=0;bC=bl.concat(this.data);for(bD=0,bE=bC.length-1;bD<=bE;bD++)w.set(bA,bD,bC[bD]);},IntersectWith:function(bA){var bB,bC,bD,bE,bF;bB=new V.New$4(bA,this.equals,this.hash);bC=bl.concat(this.data);for(bD=0,bE=bC.length-1;bD<=bE;bD++){bF=bC[bD];!bB.Contains(bF)?this.Remove(bF):void 0;}},Remove:function(bA){var bB;bB=this.data[this.hash(bA)];return bB==null?false:this.arrRemove(bA,bB)&&(this.count=this.count-1,true);},arrRemove:function(bA,bB){var bC,bD,bE,bF;bC=true;bD=0;bF=bB.length;while(bC&&bD<bF)if(this.equals.apply(null,[bB[bD],bA])){bB.splice.apply(bB,[bD,1]);bC=false;}else bD=bD+1;return!bC;},GetEnumerator:function(){return M.Get(bl.concat(this.data));},GetEnumerator0:function(){return M.Get(bl.concat(this.data));}},f,V);V.New$3=bx.Ctor(function(){V.New$4.call(this,[],u.Equals,u.Hash);},V);V.New$4=bx.Ctor(function(bA,bB,bC){var bD;f.New.call(this);this.equals=bB;this.hash=bC;this.data=[];this.count=0;bD=M.Get(bA);try{while(bD.MoveNext())this.add(bD.Current());}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}},V);V.New$2=bx.Ctor(function(bA){V.New$4.call(this,bA,u.Equals,u.Hash);},V);W.$cctor=function(){W.$cctor=a.ignore;W.counter=0;};X=g.Elt=bx.Class({},m,X);X.New=function(bA,bB,bC){var bD,bE;bD=x.CreateElemNode(bA,bB,bC.docNode);bE=_5.Create(bC.updates);return new X.New$1({$:1,$0:bD},s.Map2Unit(F.Updates(bD.Attr),bE.v),bA,bE);};X.New$1=bx.Ctor(function(bA,bB,bC,bD){m.New.call(this,bA,bB);this.docNode$1=bA;this.updates$1=bB;this.elt=bC;this.rvUpdates=bD;},X);w.foldBack=function(bA,bB,bC){var bD,bE,bF,bG,bH;bD=bC;bF=bB.length;for(bG=1,bH=bF;bG<=bH;bG++)bD=bA(bB[bF-bG],bD);return bD;};w.exists=function(bA,bB){var bC,bD,bE,bF;bC=false;bD=0;bF=w.length(bB);while(!bC&&bD<bF)if(bA(bB[bD]))bC=true;else bD=bD+1;return bC;};w.tryPick=function(bA,bB){var bC,bD,bE;bC=null;bD=0;while(bD<bB.length&&bC==null){bE=bA(bB[bD]);bE!=null&&bE.$==1?bC=bE:void 0;bD=bD+1;}return bC;};w.tryFindIndex=function(bA,bB){var bC,bD;bC=null;bD=0;while(bD<bB.length&&bC==null){bA(bB[bD])?bC={$:1,$0:bD}:void 0;bD=bD+1;}return bC;};w.ofList=function(bA){var bB,bC;bC=[];bB=bA;while(!(bB.$==0)){bC.push(_6.head(bB));bB=_6.tail(bB);}return bC;};w.filter=function(bA,bB){var bC,bD,bE;bC=[];for(bD=0,bE=bB.length-1;bD<=bE;bD++)if(bA(bB[bD]))bC.push(bB[bD]);return bC;};w.map=function(bA,bB){var bC,bD,bE;bC=new a.Array(bB.length);for(bD=0,bE=bB.length-1;bD<=bE;bD++)bC[bD]=bA(bB[bD]);return bC;};w.iter=function(bA,bB){var bC,bD;for(bC=0,bD=bB.length-1;bC<=bD;bC++)bA(bB[bC]);};w.pick=function(bA,bB){var bC;bC=w.tryPick(bA,bB);return bC==null?i.FailWith("KeyNotFoundException"):bC.$0;};w.ofSeq=function(bA){var bB,bC;if(bA instanceof a.Array)return bA.slice();else if(bA instanceof _7)return w.ofList(bA);else{bB=[];bC=M.Get(bA);try{while(bC.MoveNext())bB.push(bC.Current());return bB;}finally{if(typeof bC=="object"&&"Dispose"in bC)bC.Dispose();}}};w.choose=function(bA,bB){var bC,bD,bE,bF;bC=[];for(bD=0,bE=bB.length-1;bD<=bE;bD++){bF=bA(bB[bD]);bF==null?void 0:bC.push(bF.$0);}return bC;};w.concat=function(bA){return a.Array.prototype.concat.apply([],w.ofSeq(bA));};w.create=function(bA,bB){var bC,bD,bE;bC=new a.Array(bA);for(bD=0,bE=bA-1;bD<=bE;bD++)bC[bD]=bB;return bC;};w.init=function(bA,bB){var bC,bD,bE;bA<0?i.FailWith("Negative size given."):null;bC=new a.Array(bA);for(bD=0,bE=bA-1;bD<=bE;bD++)bC[bD]=bB(bD);return bC;};w.forall=function(bA,bB){var bC,bD,bE,bF;bC=true;bD=0;bF=w.length(bB);while(bC&&bD<bF)if(bA(bB[bD]))bD=bD+1;else bC=false;return bC;};Y.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};Z.convertTextNode=function(bA){var bB,bC,bD,bE,bF,bG;bB=null;bC=0;bE=bA.textContent;bF=new a.RegExp(A.TextHoleRE(),"g");while(bB=bF.exec(bE),bB!==null){bA.parentNode.insertBefore(self.document.createTextNode(_0.string(bE,{$:1,$0:bC},{$:1,$0:bF.lastIndex-w.get(bB,0).length-1})),bA);bC=bF.lastIndex;bG=self.document.createElement("span");bG.setAttribute("ws-replace",w.get(bB,1).toLowerCase());bA.parentNode.insertBefore(bG,bA);}bF.lastIndex=0;bA.textContent=_0.string(bE,{$:1,$0:bC},null);};Z.failNotLoaded=function(bA){by.warn("Instantiating non-loaded template",bA);};Z.fillTextHole=function(bA,bB,bC){var bD;bD=bA.querySelector("[ws-replace]");return u.Equals(bD,null)?(by.warn("Filling non-existent text hole",bC),null):(bD.parentNode.replaceChild(new a.Text(bB),bD),{$:1,$0:bD.getAttribute("ws-replace")});};Z.removeHolesExcept=function(bA,bB){function bC(bD){y.IterSelector(bA,"["+bD+"]",function(bE){if(!bB.Contains(bE.getAttribute(bD)))bE.removeAttribute(bD);});}bC("ws-attr");bC("ws-onafterrender");bC("ws-var");y.IterSelector(bA,"[ws-hole]",function(bD){if(!bB.Contains(bD.getAttribute("ws-hole"))){bD.removeAttribute("ws-hole");while(bD.hasChildNodes())bD.removeChild(bD.lastChild);}});y.IterSelector(bA,"[ws-replace]",function(bD){if(!bB.Contains(bD.getAttribute("ws-replace")))bD.parentNode.removeChild(bD);});y.IterSelector(bA,"[ws-on]",function(bD){bD.setAttribute("ws-on",_8.concat(" ",w.filter(function(bE){return bB.Contains(w.get(_8.SplitChars(bE,[":"],1),1));},_8.SplitChars(bD.getAttribute("ws-on"),[" "],1))));});y.IterSelector(bA,"[ws-attr-holes]",function(bD){var bE,bF,bG,bH,bI;bE=_8.SplitChars(bD.getAttribute("ws-attr-holes"),[" "],1);for(bF=0,bG=bE.length-1;bF<=bG;bF++){bH=w.get(bE,bF);bD.setAttribute(bH,(bI=new a.RegExp(A.TextHoleRE(),"g"),bD.getAttribute(bH).replace(bI,function(bJ,bK){return bB.Contains(bK)?bJ:"";})));}});};Z.fillInstanceAttrs=function(bA,bB){var bC,bD,bE,bF,bG;Z.convertAttrs(bB);bC=bB.nodeName.toLowerCase();bD=bA.querySelector("[ws-attr="+bC+"]");if(u.Equals(bD,null))by.warn("Filling non-existent attr hole",bC);else{bD.removeAttribute("ws-attr");for(bE=0,bF=bB.attributes.length-1;bE<=bF;bE++){bG=bB.attributes.item(bE);bG.name==="class"&&bD.hasAttribute("class")?bD.setAttribute("class",bD.getAttribute("class")+" "+bG.nodeValue):bD.setAttribute(bG.name,bG.nodeValue);}}};Z.mapHoles=function(bA,bB){function bC(bD){y.IterSelector(bA,"["+bD+"]",function(bE){var bF,bG;bF=(bG=null,[bB.TryGetValue(bE.getAttribute(bD).toLowerCase(),{get:function(){return bG;},set:function(bH){bG=bH;}}),bG]);bF[0]?bE.setAttribute(bD,bF[1]):void 0;});}bC("ws-hole");bC("ws-replace");bC("ws-attr");bC("ws-onafterrender");bC("ws-var");y.IterSelector(bA,"[ws-on]",function(bD){bD.setAttribute("ws-on",_8.concat(" ",w.map(function(bE){var bF,bG,bH;bF=_8.SplitChars(bE,[":"],1);bG=(bH=null,[bB.TryGetValue(w.get(bF,1),{get:function(){return bH;},set:function(bI){bH=bI;}}),bH]);return bG[0]?w.get(bF,0)+":"+bG[1]:bE;},_8.SplitChars(bD.getAttribute("ws-on"),[" "],1))));});y.IterSelector(bA,"[ws-attr-holes]",function(bD){var bE,bF,bG;bE=_8.SplitChars(bD.getAttribute("ws-attr-holes"),[" "],1);for(bF=0,bG=bE.length-1;bF<=bG;bF++)(function(){var bH;function bI(bJ,bK){var bL;bL=i.KeyValue(bK);return bJ.replace(new a.RegExp("\\${"+bL[0]+"}","ig"),"${"+bL[1]+"}");}bH=w.get(bE,bF);return bD.setAttribute(bH,(((bx.Curried3(D.fold))(bI))(bD.getAttribute(bH)))(bB));}());});};Z.fill=function(bA,bB,bC){while(true)if(bA.hasChildNodes())bC=bB.insertBefore(bA.lastChild,bC);else return null;};Z.convertAttrs=function(bA){var bC,bD,bE,bF,bG,bH,bI,bJ;function bB(bK){var bL;bL=bA.getAttribute(bK);bL===null?void 0:bA.setAttribute(bK,bL.toLowerCase());}bC=bA.attributes;bD=[];bE=[];bF=[];for(bG=0,bH=bC.length-1;bG<=bH;bG++){bI=bC.item(bG);_8.StartsWith(bI.nodeName,"ws-on")&&bI.nodeName!=="ws-onafterrender"&&bI.nodeName!=="ws-on"?(bD.push(bI.nodeName),bE.push(_0.string(bI.nodeName,{$:1,$0:"ws-on".length},null)+":"+bI.nodeValue.toLowerCase())):!_8.StartsWith(bI.nodeName,"ws-")&&(new a.RegExp(A.TextHoleRE())).test(bI.nodeValue)?(bI.nodeValue=(bJ=new a.RegExp(A.TextHoleRE(),"g"),bI.nodeValue.replace(bJ,function(bK,bL){return"${"+bL.toLowerCase()+"}";})),bF.push(bI.nodeName)):void 0;}!(bE.length==0)?bA.setAttribute("ws-on",_8.concat(" ",bE)):void 0;!(bF.length==0)?bA.setAttribute("ws-attr-holes",_8.concat(" ",bF)):void 0;bB("ws-hole");bB("ws-replace");bB("ws-attr");bB("ws-onafterrender");bB("ws-var");w.iter(function(bK){bA.removeAttribute(bK);},bD);};_0.string=function(bA,bB,bC){return bB==null?bC!=null&&bC.$==1?bA.slice(0,bC.$0+1):"":bC==null?bA.slice(bB.$0):bA.slice(bB.$0,bC.$0+1);};D.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};_1=K.KeyCollection=bx.Class({GetEnumerator$1:function(){return M.Get(D.map(function(bA){return bA.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,_1);_1.New=bx.Ctor(function(bA){f.New.call(this);this.d=bA;},_1);_2.get_UseAnimations=function(){return ba.UseAnimations();};_2.Play=function(bA){var bB;bB=null;return bd.Delay(function(){return bd.Bind(_2.Run(a.ignore,ba.Actions(bA)),function(){ba.Finalize(bA);return bd.Return(null);});});};_2.Append=function(bA,bB){return{$:0,$0:be.Append(bA.$0,bB.$0)};};_2.Run=function(bA,bB){var bC;function bD(bE){function bF(bG,bH){var bI;bI=bH-bG;bB.Compute(bI);bA();return bI<=bC?void a.requestAnimationFrame(function(bJ){bF(bG,bJ);}):bE();}a.requestAnimationFrame(function(bG){bF(bG,bG);});}bC=bB.Duration;return bC===0?bd.Zero():bd.FromContinuations(function(bE,bF,bG){return bD.apply(null,[bE,bF,bG]);});};_2.Concat=function(bA){return{$:0,$0:be.Concat(D.map(ba.List,bA))};};_2.get_Empty=function(){return{$:0,$0:be.Empty()};};_3.BatchUpdatesEnabled=function(){bb.$cctor();return bb.BatchUpdatesEnabled;};_4.StartProcessor=function(bA){var bB;function bC(){var bD;bD=null;return bd.Delay(function(){return bd.Bind(bA,function(){var bE;bE=bB[0];return bE===1?(bB[0]=0,bd.Zero()):bE===2?(bB[0]=1,bC()):bd.Zero();});});}bB=[0];return function(){var bD;bD=bB[0];bD===0?(bB[0]=1,bd.Start(bC(),null)):bD===1?bB[0]=2:void 0;};};_5=g.Updates=bx.Class({},null,_5);_5.Create=function(bA){var bB;bB=null;bB=_5.New(bA,null,function(){var bC;bC=bB.s;return bC===null?(bC=o.Copy(bB.c()),bB.s=bC,o.WhenObsoleteRun(bC,function(){bB.s=null;}),bC):bC;});return bB;};_5.New=function(bA,bB,bC){return new _5({c:bA,s:bB,v:bC});};_7=_6.T=bx.Class({GetEnumerator:function(){return new N.New(this,null,function(bA){var bB;bB=bA.s;return bB.$==0?false:(bA.c=bB.$0,bA.s=bB.$1,true);},void 0);},GetEnumerator0:function(){return M.Get(this);}},null,_7);_8.concat=function(bA,bB){return w.ofSeq(bB).join(bA);};_8.SplitChars=function(bA,bB,bC){return _8.Split(bA,new a.RegExp("["+_8.RegexEscape(bB.join(""))+"]"),bC);};_8.StartsWith=function(bA,bB){return bA.substring(0,bB.length)==bB;};_8.Split=function(bA,bB,bC){return bC===1?w.filter(function(bD){return bD!=="";},_8.SplitWith(bA,bB)):_8.SplitWith(bA,bB);};_8.RegexEscape=function(bA){return bA.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_8.SplitWith=function(bA,bB){return bA.split(bB);};_.New=function(bA,bB){return{PreviousNodes:bA,Top:bB};};$.get_Empty=function(){return{$:0,$0:new V.New$3()};};$.FindAll=function(bA){var bB;function bC(bE){if(bE!=null&&bE.$==0){bC(bE.$0);bC(bE.$1);}else if(bE!=null&&bE.$==1)bD(bE.$0);else if(bE!=null&&bE.$==2)bC(bE.$0.Current);else if(bE!=null&&bE.$==6)w.iter(bD,bE.$0.Holes);}function bD(bE){bB.push(bE);bC(bE.Children);}bB=[];bC(bA);return{$:0,$0:new V.New$2(bB)};};$.Filter=function(bA,bB){return{$:0,$0:bk.Filter(bA,bB.$0)};};$.Except=function(bA,bB){return{$:0,$0:bk.Except(bA.$0,bB.$0)};};$.ToArray=function(bA){return bk.ToArray(bA.$0);};$.Intersect=function(bA,bB){return{$:0,$0:bk.Intersect(bA.$0,bB.$0)};};ba.UseAnimations=function(){bc.$cctor();return bc.UseAnimations;};ba.Actions=function(bA){return ba.ConcatActions(w.choose(function(bB){return bB.$==1?{$:1,$0:bB.$0}:null;},be.ToArray(bA.$0)));};ba.Finalize=function(bA){w.iter(function(bB){if(bB.$==0)bB.$0();},be.ToArray(bA.$0));};ba.ConcatActions=function(bA){var bB,bC,bD,bE;bB=t.ofSeqNonCopying(bA);bC=w.length(bB);return bC===0?ba.Const():bC===1?w.get(bB,0):(bD=D.max(D.map(function(bF){return bF.Duration;},bB)),(bE=w.map(function(bF){return ba.Prolong(bD,bF);},bB),ba.Def(bD,function(bF){w.iter(function(bG){bG.Compute(bF);},bE);})));};ba.List=function(bA){return bA.$0;};ba.Const=function(bA){return ba.Def(0,function(){return bA;});};ba.Def=function(bA,bB){return{Compute:bB,Duration:bA};};ba.Prolong=function(bA,bB){var bC,bD,bE;bC=bB.Compute;bD=bB.Duration;bE=bs.Create(function(){return bB.Compute(bB.Duration);});return{Compute:function(bF){return bF>=bD?bE.f():bC(bF);},Duration:bA};};bb.$cctor=function(){bb.$cctor=a.ignore;bb.BatchUpdatesEnabled=true;};_6.head=function(bA){return bA.$==1?bA.$0:_6.listEmpty();};_6.tail=function(bA){return bA.$==1?bA.$1:_6.listEmpty();};_6.listEmpty=function(){return i.FailWith("The input list was empty.");};bc.$cctor=function(){bc.$cctor=a.ignore;bc.CubicInOut=bg.Custom(function(bA){var bB;bB=bA*bA;return 3*bB-2*(bB*bA);});bc.UseAnimations=true;};bd.Delay=function(bA){return function(bB){try{(bA(null))(bB);}catch(bC){bB.k({$:1,$0:bC});}};};bd.Bind=function(bA,bB){return bd.checkCancel(function(bC){bA(bh.New(function(bD){var bE;if(bD.$==0){bE=bD.$0;bd.scheduler().Fork(function(){try{(bB(bE))(bC);}catch(bF){bC.k({$:1,$0:bF});}});}else bd.scheduler().Fork(function(){bC.k(bD);});},bC.ct));});};bd.Zero=function(){bi.$cctor();return bi.Zero;};bd.Start=function(bA,bB){var bC,bD;bC=(bD=(bd.defCTS())[0],bB==null?bD:bB.$0);bd.scheduler().Fork(function(){if(!bC.c)bA(bh.New(function(bE){if(bE.$==1)bd.UncaughtAsyncError(bE.$0);},bC));});};bd.Return=function(bA){return function(bB){bB.k({$:0,$0:bA});};};bd.checkCancel=function(bA){return function(bB){if(bB.ct.c)bd.cancel(bB);else bA(bB);};};bd.defCTS=function(){bi.$cctor();return bi.defCTS;};bd.UncaughtAsyncError=function(bA){by.log("WebSharper: Uncaught asynchronous exception",bA);};bd.FromContinuations=function(bA){return function(bB){var bC;function bD(bE){if(bC[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bC[0]=true;bd.scheduler().Fork(bE);}}bC=[false];bA(function(bE){bD(function(){bB.k({$:0,$0:bE});});},function(bE){bD(function(){bB.k({$:1,$0:bE});});},function(bE){bD(function(){bB.k({$:2,$0:bE});});});};};bd.cancel=function(bA){bA.k({$:2,$0:new br.New(bA.ct)});};bd.scheduler=function(){bi.$cctor();return bi.scheduler;};be.Append=function(bA,bB){return bA.$==0?bB:bB.$==0?bA:{$:2,$0:bA,$1:bB};};be.ToArray=function(bA){var bB;function bC(bD){if(bD.$==1)bB.push(bD.$0);else if(bD.$==2){bC(bD.$0);bC(bD.$1);}else if(bD.$==3)w.iter(function(bE){bB.push(bE);},bD.$0);}bB=[];bC(bA);return bB.slice(0);};be.Concat=function(bA){var bB;bB=t.ofSeqNonCopying(bA);return t.TreeReduce(be.Empty(),be.Append,bB);};be.Empty=function(){bt.$cctor();return bt.Empty;};bf=g.DynamicAttrNode=bx.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bA){return _2.get_Empty();},NGetEnterAnim:function(bA){return _2.get_Empty();},NGetChangeAnim:function(bA){return _2.get_Empty();},NSync:function(bA){if(this.dirty){(this.push(bA))(this.value);this.dirty=false;}}},f,bf);bf.New=bx.Ctor(function(bA,bB){var bC;bC=this;f.New.call(this);this.push=bB;this.value=void 0;this.dirty=false;this.updates=s.Map(function(bD){bC.value=bD;bC.dirty=true;},bA);},bf);bg=g.Easing=bx.Class({},f,bg);bg.Custom=function(bA){return new bg.New(bA);};bg.New=bx.Ctor(function(bA){f.New.call(this);this.transformTime=bA;},bg);bh.New=function(bA,bB){return{k:bA,ct:bB};};bi.$cctor=function(){bi.$cctor=a.ignore;bi.noneCT=bj.New(false,[]);bi.scheduler=new bn.New();bi.defCTS=[new bo.New()];bi.Zero=bd.Return();bi.GetCT=function(bA){bA.k({$:0,$0:bA.ct});};};bj.New=function(bA,bB){return{c:bA,r:bB};};bk.Filter=function(bA,bB){return new V.New$2(w.filter(bA,bk.ToArray(bB)));};bk.Except=function(bA,bB){var bC;bC=new V.New$2(bk.ToArray(bB));bC.ExceptWith(bk.ToArray(bA));return bC;};bk.ToArray=function(bA){var bB;bB=w.create(bA.get_Count(),void 0);bA.CopyTo(bB);return bB;};bk.Intersect=function(bA,bB){var bC;bC=new V.New$2(bk.ToArray(bA));bC.IntersectWith(bk.ToArray(bB));return bC;};bl.concat=function(bA){var bB,bC;bB=[];for(var bD in bA)bB.push.apply(bB,bA[bD]);return bB;};bm.Clear=function(bA){bA.splice(0,w.length(bA));};bn=bd.Scheduler=bx.Class({Fork:function(bA){var bB;bB=this;this.robin.push(bA);this.idle?(this.idle=false,a.setTimeout(function(){bB.tick();},0)):void 0;},tick:function(){var bA,bB,bC;bB=this;bC=bz.now();bA=true;while(bA)if(this.robin.length===0){this.idle=true;bA=false;}else{(this.robin.shift())();bz.now()-bC>40?(a.setTimeout(function(){bB.tick();},0),bA=false):void 0;}}},f,bn);bn.New=bx.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bn);bo=b.CancellationTokenSource=bx.Class({},f,bo);bo.New=bx.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bo);bp.Children=function(bA,bB){var bC,bD,bE;if(bB!=null&&bB.$==1){bE=[];bC=bB.$0[0].nextSibling;while(bC!==bB.$0[1]){bE.push(bC);bC=bC.nextSibling;}return{$:0,$0:bE};}else return{$:0,$0:w.init(bA.childNodes.length,(bD=bA.childNodes,function(bF){return bD[bF];}))};};bp.Except=function(bA,bB){var bC;bC=bA.$0;return{$:0,$0:w.filter(function(bD){return w.forall(function(bE){return!(bD===bE);},bC);},bB.$0)};};bp.Iter=function(bA,bB){w.iter(bA,bB.$0);};bp.DocChildren=function(bA){var bB;function bC(bD){if(bD!=null&&bD.$==2)bC(bD.$0.Current);else if(bD!=null&&bD.$==1)bB.push(bD.$0.El);else if(bD==null);else if(bD!=null&&bD.$==5)bB.push(bD.$0);else if(bD!=null&&bD.$==4)bB.push(bD.$0.Text);else if(bD!=null&&bD.$==6)w.iter(function(bE){if(bE==null||bE.constructor===J)bC(bE);else bB.push(bE);},bD.$0.Els);else{bC(bD.$0);bC(bD.$1);}}bB=[];bC(bA.Children);return{$:0,$0:t.ofSeqNonCopying(bB)};};br=b.OperationCanceledException=bx.Class({},bq,br);br.New=bx.Ctor(function(bA){br.New$1.call(this,"The operation was canceled.",null,bA);},br);br.New$1=bx.Ctor(function(bA,bB,bC){this.message=bA;this.inner=bB;J.setPrototypeOf(this,br.prototype);this.ct=bC;},br);bs.Create=function(bA){return bv.New(false,bA,bs.forceLazy);};bs.forceLazy=function(){var bA;bA=this.v();this.c=true;this.v=bA;this.f=bs.cachedLazy;return bA;};bs.cachedLazy=function(){return this.v;};bt.$cctor=function(){bt.$cctor=a.ignore;bt.Empty={$:0};};bv.New=function(bA,bB,bC){return{c:bA,v:bB,f:bC};};bx.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
