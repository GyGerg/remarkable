function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Remarkable=b.Remarkable||{};d=c.RenderingTest=c.RenderingTest||{};e=d.Client=d.Client||{};f=b.UI=b.UI||{};g=f.Var=f.Var||{};h=b.Operators=b.Operators||{};i=b.Obj=b.Obj||{};j=f.HtmlModule=f.HtmlModule||{};k=j.attr=j.attr||{};l=f.Doc=f.Doc||{};m=f.ConcreteVar=f.ConcreteVar||{};n=f.Snap=f.Snap||{};o=f.AttrProxy=f.AttrProxy||{};p=b.JavaScript=b.JavaScript||{};q=p.Pervasives=p.Pervasives||{};r=f.Abbrev=f.Abbrev||{};s=r.Fresh=r.Fresh||{};t=f.DomUtility=f.DomUtility||{};u=b.Seq=b.Seq||{};v=f.AttrModule=f.AttrModule||{};w=f.Attrs=f.Attrs||{};x=f.View=f.View||{};y=b.Unchecked=b.Unchecked||{};z=a.EventTarget;A=b.Arrays=b.Arrays||{};B=f.Docs=f.Docs||{};C=f.Array=f.Array||{};D=a.Node;E=f.Elt=f.Elt||{};F=b.Enumerator=b.Enumerator||{};G=F.T=F.T||{};H=f.DocElemNode=f.DocElemNode||{};I=a.CharacterData;J=p.JSModule=p.JSModule||{};K=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};L=r.Mailbox=r.Mailbox||{};M=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};N=b.List=b.List||{};O=N.T=N.T||{};P=a.Object;Q=f.Updates=f.Updates||{};R=f.Client=f.Client||{};S=R.Attrs=R.Attrs||{};T=S.Dyn=S.Dyn||{};U=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};V=R.Docs=R.Docs||{};W=V.RunState=V.RunState||{};X=V.NodeSet=V.NodeSet||{};Y=f.An=f.An||{};Z=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};_0=b.Collections=b.Collections||{};_1=_0.Dictionary=_0.Dictionary||{};_2=_0.HashSet=_0.HashSet||{};_3=b.Concurrency=b.Concurrency||{};_4=f.Anims=f.Anims||{};_5=f.AppendList=f.AppendList||{};_6=_0.DictionaryUtil=_0.DictionaryUtil||{};_7=_3.AsyncBody=_3.AsyncBody||{};_8=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_9=_3.CT=_3.CT||{};_=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};$=r.HashSet=r.HashSet||{};ba=f.DynamicAttrNode=f.DynamicAttrNode||{};bb=b.Slice=b.Slice||{};bc=b.Strings=b.Strings||{};bd=_3.Scheduler=_3.Scheduler||{};be=b.CancellationTokenSource=b.CancellationTokenSource||{};bf=f.Easing=f.Easing||{};bg=b.Queue=b.Queue||{};bh=b.OperationCanceledException=b.OperationCanceledException||{};bi=_0.HashSetUtil=_0.HashSetUtil||{};bj=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bk=b.Lazy=b.Lazy||{};bl=V.DomNodes=V.DomNodes||{};bm=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bn=bm.LazyRecord=bm.LazyRecord||{};bo=a.IntelliFactory;bp=bo&&bo.Runtime;bq=a.jQuery;br=a.console;bs=a.Date;e.Main=function(){var bt,bu;function bv(bw){return bt.render(bw);}bt=new a.Remarkable({html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:true,linkTarget:"",typographer:false,quotes:"'\ufffd\ufffd\ufffd\ufffd'"});bu=g.Create$1("");l.RunById("main",l.Element("div",[],[l.Element("h1",[],[l.TextNode("WebSharper.Remarkable extension sample page")]),l.Element("p",[],[l.TextNode("Type markdown text here:")]),l.InputArea([o.Create("class","input"),o.Create("rows","20")],bu),l.Element("hr",[],[]),l.Element("h4",[],[l.TextNode("Result")]),l.Element("div",[o.Create("class","output")],[l.BindView(function(bw){return l.Verbatim(bv(bw));},bu.get_View())])]));};g.Create$1=function(bt){return new m.New(false,n.New({$:2,$0:bt,$1:[]}),bt);};h.FailWith=function(bt){throw a.Error(bt);};h.KeyValue=function(bt){return[bt.K,bt.V];};i=b.Obj=bp.Class({Equals:function(bt){return this===bt;},GetHashCode:function(){return -1;}},null,i);k=j.attr=bp.Class({},i,k);g=f.Var=bp.Class({},i,g);g.New=bp.Ctor(function(){},g);l=f.Doc=bp.Class({},i,l);l.Element=function(bt,bu,bv){var bw,bx;bw=o.Concat(bu);bx=l.Concat(bv);return E.New(t.CreateElement(bt),bw,bx);};l.InputArea=function(bt,bu){return l.InputInternal("textarea",function(){return u.append(bt,[v.Value(bu)]);});};l.Verbatim=function(bt){var bu;return l.Mk(C.MapTreeReduce(function(bv){return y.Equals(bv.nodeType,D.TEXT_NODE)?{$:5,$0:bv}:{$:1,$0:B.CreateElemNode(bv,w.EmptyAttr(),null)};},null,function(bv,bw){return{$:0,$0:bv,$1:bw};},(bu=bq.parseHTML(bt),y.Equals(bu,null)?[]:bu)),x.Const());};l.RunById=function(bt,bu){var bv;bv=t.Doc().getElementById(bt);y.Equals(bv,null)?h.FailWith("invalid id: "+bt):l.Run(bv,bu);};l.Concat=function(bt){var bu;bu=C.ofSeqNonCopying(bt);return C.TreeReduce(l.Empty(),l.Append,bu);};l.TextNode=function(bt){return l.Mk({$:5,$0:t.CreateText(bt)},x.Const());};l.InputInternal=function(bt,bu){var bv;bv=t.CreateElement(bt);return E.New(bv,o.Concat(bu(bv)),l.Empty());};l.BindView=function(bt,bu){return l.EmbedView(x.Map(bt,bu));};l.Mk=function(bt,bu){return new l.New(bt,bu);};l.Run=function(bt,bu){var bv;l.LoadLocalTemplates$1();bv=bu.docNode;B.LinkElement(bt,bv);x.Sink(L.StartProcessor(B.PerformAnimatedUpdate(B.CreateRunState(bt,bv),bv)),bu.updates);};l.Empty=function(){return l.Mk(null,x.Const());};l.Append=function(bt,bu){return l.Mk({$:0,$0:bt.docNode,$1:bu.docNode},x.Map2Unit(bt.updates,bu.updates));};l.EmbedView=function(bt){var bu;bu=B.CreateEmbedNode();return l.Mk({$:2,$0:bu},x.Map(a.ignore,x.Bind(function(bv){B.UpdateEmbedNode(bu,bv.docNode);return bv.updates;},bt)));};l.LoadLocalTemplates$1=function(){if(!B.LocalTemplatesLoaded()){B.set_LocalTemplatesLoaded(true);l.LoadLocalTemplates("");}};l.LoadLocalTemplates=function(bt){var bu;bu=B.LoadedTemplateFile("");bu.count>0?B.LoadedTemplates().set_Item(bt,bu):(function(){var bv,bw,bx,by;while(true){bv=a.document.querySelector("[ws-template]");if(y.Equals(bv,null)){bw=a.document.querySelector("[ws-children-template]");if(y.Equals(bw,null))return null;else{bx=bw.getAttribute("ws-children-template");bw.removeAttribute("ws-children-template");l.PrepareTemplate(bt,{$:1,$0:bx},function(bz){return function(){return t.ChildrenArray(bz);};}(bw));}}else{by=bv.getAttribute("ws-template");l.PrepareSingleTemplate(bt,{$:1,$0:by},bv);}}}(),B.LoadedTemplates().set_Item("",B.LoadedTemplateFile(bt)));};l.PrepareTemplate=function(bt,bu,bv){var bw,bx,by,bz,bA;if(!B.LoadedTemplateFile(bt).ContainsKey(bu==null?"":bu.$0)){bw=bv();for(bx=0,by=bw.length-1;bx<=by;bx++){bz=A.get(bw,bx);bA=bz.parentNode;y.Equals(bA,null)?void 0:bA.removeChild(bz);}l.PrepareTemplateStrict(bt,bu,bw);}};l.PrepareSingleTemplate=function(bt,bu,bv){var bw,bx,by;bv.removeAttribute("ws-template");bw=bv.getAttribute("ws-replace");bw===null?void 0:(bv.removeAttribute("ws-replace"),bx=bv.parentNode,y.Equals(bx,null)?void 0:(by=a.document.createElement(bv.tagName),by.setAttribute("ws-replace",bw),bx.replaceChild(by,bv)));l.PrepareTemplateStrict(bt,bu,[bv]);};l.PrepareTemplateStrict=function(bt,bu,bv){var bw,bx;function by(bK){var bM,bN,bO,bP,bQ,bR,bS,bT;function bL(bU){var bV;bV=bK.getAttribute(bU);bV===null?void 0:bK.setAttribute(bU,bV.toLowerCase());}bM=bK.attributes;bN=[];bO=[];bP=[];for(bQ=0,bR=bM.length-1;bQ<=bR;bQ++){bS=bM.item(bQ);bc.StartsWith(bS.nodeName,"ws-on")&&bS.nodeName!=="ws-onafterrender"&&bS.nodeName!=="ws-on"?(bN.push(bS.nodeName),bO.push(bb.string(bS.nodeName,{$:1,$0:"ws-on".length},null)+":"+bS.nodeValue.toLowerCase())):!bc.StartsWith(bS.nodeName,"ws-")&&(new a.RegExp(B.TextHoleRE())).test(bS.nodeValue)?(bS.nodeValue=(bT=new a.RegExp(B.TextHoleRE(),"g"),bS.nodeValue.replace(bT,function(bU,bV){return"${"+bV.toLowerCase()+"}";})),bP.push(bS.nodeName)):void 0;}!(bO.length==0)?bK.setAttribute("ws-on",bc.concat(" ",bO)):void 0;!(bP.length==0)?bK.setAttribute("ws-attr-holes",bc.concat(" ",bP)):void 0;bL("ws-hole");bL("ws-replace");bL("ws-attr");bL("ws-onafterrender");bL("ws-var");A.iter(function(bU){bK.removeAttribute(bU);},bN);}function bz(bK){var bL,bM,bN,bO,bP,bQ;bL=null;bM=0;bO=bK.textContent;bP=new a.RegExp(B.TextHoleRE(),"g");while(bL=bP.exec(bO),bL!==null){bK.parentNode.insertBefore(a.document.createTextNode(bb.string(bO,{$:1,$0:bM},{$:1,$0:bP.lastIndex-A.get(bL,0).length-1})),bK);bM=bP.lastIndex;bQ=a.document.createElement("span");bQ.setAttribute("ws-replace",A.get(bL,1).toLowerCase());bK.parentNode.insertBefore(bQ,bK);}bP.lastIndex=0;bK.textContent=bb.string(bO,{$:1,$0:bM},null);}function bA(bK,bL){function bM(bN){t.IterSelector(bK,"["+bN+"]",function(bO){var bP,bQ;bP=(bQ=null,[bL.TryGetValue(bO.getAttribute(bN).toLowerCase(),{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);bP[0]?bO.setAttribute(bN,bP[1]):void 0;});}bM("ws-hole");bM("ws-replace");bM("ws-attr");bM("ws-onafterrender");bM("ws-var");t.IterSelector(bK,"[ws-on]",function(bN){bN.setAttribute("ws-on",bc.concat(" ",A.map(function(bO){var bP,bQ,bR;bP=bc.SplitChars(bO,[":"],1);bQ=(bR=null,[bL.TryGetValue(A.get(bP,1),{get:function(){return bR;},set:function(bS){bR=bS;}}),bR]);return bQ[0]?A.get(bP,0)+":"+bQ[1]:bO;},bc.SplitChars(bN.getAttribute("ws-on"),[" "],1))));});return t.IterSelector(bK,"[ws-attr-holes]",function(bN){var bO,bP,bQ;bO=bc.SplitChars(bN.getAttribute("ws-attr-holes"),[" "],1);for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)(function(){var bR;function bS(bT,bU){var bV;bV=h.KeyValue(bU);return bT.replace(new a.RegExp("\\${"+bV[0]+"}","ig"),"${"+bV[1]+"}");}bR=A.get(bO,bP);return bN.setAttribute(bR,(((bp.Curried3(u.fold))(bS))(bN.getAttribute(bR)))(bL));}());});}function bB(bK,bL){var bM,bN,bO,bP,bQ;by(bL);bM=bL.nodeName.toLowerCase();bN=bK.querySelector("[ws-attr="+bM+"]");if(y.Equals(bN,null))return br.warn("Filling non-existent attr hole",bM);else{bN.removeAttribute("ws-attr");for(bO=0,bP=bL.attributes.length-1;bO<=bP;bO++){bQ=bL.attributes.item(bO);bQ.name==="class"&&bN.hasAttribute("class")?bN.setAttribute("class",bN.getAttribute("class")+" "+bQ.nodeValue):bN.setAttribute(bQ.name,bQ.nodeValue);}return;}}function bC(bK,bL){function bM(bN){t.IterSelector(bK,"["+bN+"]",function(bO){if(!bL.Contains(bO.getAttribute(bN)))bO.removeAttribute(bN);});}bM("ws-attr");bM("ws-onafterrender");bM("ws-var");t.IterSelector(bK,"[ws-hole]",function(bN){if(!bL.Contains(bN.getAttribute("ws-hole"))){bN.removeAttribute("ws-hole");while(bN.hasChildNodes())bN.removeChild(bN.lastChild);}});t.IterSelector(bK,"[ws-replace]",function(bN){if(!bL.Contains(bN.getAttribute("ws-replace")))bN.parentNode.removeChild(bN);});t.IterSelector(bK,"[ws-on]",function(bN){bN.setAttribute("ws-on",bc.concat(" ",A.filter(function(bO){return bL.Contains(A.get(bc.SplitChars(bO,[":"],1),1));},bc.SplitChars(bN.getAttribute("ws-on"),[" "],1))));});return t.IterSelector(bK,"[ws-attr-holes]",function(bN){var bO,bP,bQ,bR,bS;bO=bc.SplitChars(bN.getAttribute("ws-attr-holes"),[" "],1);for(bP=0,bQ=bO.length-1;bP<=bQ;bP++){bR=A.get(bO,bP);bN.setAttribute(bR,(bS=new a.RegExp(B.TextHoleRE(),"g"),bN.getAttribute(bR).replace(bS,function(bT,bU){return bL.Contains(bU)?bT:"";})));}});}function bD(bK,bL){var bM;bM=bK.querySelector("[ws-replace]");return y.Equals(bM,null)?(br.warn("Filling non-existent text hole",bu),null):(bM.parentNode.replaceChild(new a.Text(bL),bM),{$:1,$0:bM.getAttribute("ws-replace")});}function bE(bK,bL,bM){while(true)if(bK.hasChildNodes())bM=bL.insertBefore(bK.lastChild,bM);else return null;}function bF(bK,bL,bM){var bN,bO,bP,bQ,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;function bR(cc){}while(true)switch(bK){case 0:bS=bb.string(bL.nodeName,{$:1,$0:3},null).toLowerCase();bT=(bN=bS.indexOf("."),bN===-1?[bt,bS]:[bb.string(bS,null,{$:1,$0:bN-1}),bb.string(bS,{$:1,$0:bN+1},null)]);bU=bT[1];bV=bT[0];if(!B.LoadedTemplates().ContainsKey(bV))return br.warn("Instantiating non-loaded template",bU);else{bW=B.LoadedTemplates().get_Item(bV);if(!bW.ContainsKey(bU))return br.warn("Instantiating non-loaded template",bU);else{bX=bW.get_Item(bU);bY=bX.cloneNode(true);bZ=new _2.New$3();b0=new _1.New$5();b1=bL.attributes;for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=b1.item(b2).name.toLowerCase();b0.set_Item(b4,(b5=b1.item(b2).nodeValue,b5===""?b4:b5.toLowerCase()));!bZ.Add(b4)?br.warn("Hole mapped twice",b4):void 0;}for(b6=0,b7=bL.childNodes.length-1;b6<=b7;b6++){b8=bL.childNodes[b6];y.Equals(b8.nodeType,D.ELEMENT_NODE)?!bZ.Add(b8.nodeName.toLowerCase())?br.warn("Hole filled twice",bU):void 0:void 0;}b9=bL.childNodes.length===1&&y.Equals(bL.firstChild.nodeType,D.TEXT_NODE);if(b9){bP=bD(bY,bL.firstChild.textContent);((function(cc){return function(cd){if(cd!=null)cc(cd.$0);};}((bQ=function(cc){return function(cd){return cc.Add(cd);};}(bZ),function(cc){return bR(bQ(cc));})))(bP));}bC(bY,bZ);if(!b9){for(b_=0,b$=bL.childNodes.length-1;b_<=b$;b_++){ca=bL.childNodes[b_];y.Equals(ca.nodeType,D.ELEMENT_NODE)?ca.hasAttributes()?bB(bY,ca):bG(bY,ca):void 0;}}bA(bY,b0);(((function(cc){function cd(ce,cf){return bE(cc,ce,cf);}return function(ce){return function(cf){return cd(ce,cf);};};}(bY))(bL.parentNode))(bL));bL.parentNode.removeChild(bL);return;}}break;case 1:if(bM!==null){cb=bM.nextSibling;if(y.Equals(bM.nodeType,D.TEXT_NODE))bz(bM);else if(y.Equals(bM.nodeType,D.ELEMENT_NODE))bI(bM);bM=cb;}else return null;break;}}function bG(bK,bL){var bM,bO,bP;function bN(bQ,bR){var bS,bT,bU;if(bO==="title"&&bL.hasChildNodes()){bS=bq.parseHTML(bL.textContent);bL.removeChild(bL.firstChild);for(bT=0,bU=bS.length-1;bT<=bU;bT++)bL.appendChild(A.get(bS,bT));}else null;bI(bL);return bE(bL,bQ,bR);}bO=bL.nodeName.toLowerCase();t.IterSelector(bK,"[ws-attr-holes]",function(bQ){var bR,bS,bT,bU,bV;bR=bc.SplitChars(bQ.getAttribute("ws-attr-holes"),[" "],1);for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=A.get(bR,bS);bQ.setAttribute(bU,(bV=new a.RegExp("\\${"+bO+"}","ig"),bQ.getAttribute(bU).replace(bV,bL.textContent)));}});bP=bK.querySelector("[ws-hole="+bO+"]");if(y.Equals(bP,null)){bM=bK.querySelector("[ws-replace="+bO+"]");return y.Equals(bM,null)?null:(bN(bM.parentNode,bM),void bM.parentNode.removeChild(bM));}else{while(bP.hasChildNodes())bP.removeChild(bP.lastChild);bP.removeAttribute("ws-hole");return bN(bP,null);}}function bH(bK){return bF(0,bK);}function bI(bK){var bL,bM;if(bc.StartsWith(bK.nodeName.toLowerCase(),"ws-")&&!bK.hasAttribute("ws-template"))bH(bK);else{by(bK);bL=bK.getAttribute("ws-template");if(bL===null){bM=bK.getAttribute("ws-children-template");if(bM===null)bJ(bK,bK.firstChild);else{bK.removeAttribute("ws-children-template");l.PrepareTemplate(bt,{$:1,$0:bM},function(){return t.ChildrenArray(bK);});while(bK.hasChildNodes())bK.removeChild(bK.lastChild);}}else l.PrepareSingleTemplate(bt,{$:1,$0:bL},bK);}}function bJ(bK,bL){return bF(1,bK,bL);}bw=l.FakeRoot(bv);bx=(bu==null?"":bu.$0).toLowerCase();B.LoadedTemplateFile(bt).set_Item(bx,bw);A.length(bv)>0?bJ(bw,A.get(bv,0)):void 0;};l.FakeRoot=function(bt){var bu,bv,bw;bu=a.document.createElement("div");for(bv=0,bw=bt.length-1;bv<=bw;bv++)bu.appendChild(A.get(bt,bv));return bu;};l.New=bp.Ctor(function(bt,bu){this.docNode=bt;this.updates=bu;},l);m=f.ConcreteVar=bp.Class({get_View:function(){return this.view;},UpdateMaybe:function(bt){var bu;bu=bt(this.Get());bu!=null&&bu.$==1?this.Set(bu.$0):void 0;},Get:function(){return this.current;},Set:function(bt){if(this.isConst)(function(bu){return bu("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bu){br.log(bu);}));else{n.Obsolete(this.snap);this.current=bt;this.snap=n.New({$:2,$0:bt,$1:[]});}}},g,m);m.New=bp.Ctor(function(bt,bu,bv){var bw;bw=this;g.New.call(this);this.isConst=bt;this.current=bv;this.snap=bu;this.view=function(){return bw.snap;};this.id=s.Int();},m);n.Map=function(bt,bu){var bv,bw;bv=bu.s;return bv!=null&&bv.$==0?n.New({$:0,$0:bt(bv.$0)}):(bw=n.New({$:3,$0:[],$1:[]}),(n.When(bu,function(bx){n.MarkDone(bw,bu,bt(bx));},bw),bw));};n.WhenRun=function(bt,bu,bv){var bw;bw=bt.s;bw==null?bv():bw!=null&&bw.$==2?(bw.$1.push(bv),bu(bw.$0)):bw!=null&&bw.$==3?(bw.$0.push(bu),bw.$1.push(bv)):bu(bw.$0);};n.Map2Unit=function(bt,bu){var bv,bw,bx;function by(){var bz,bA,bB;if(!(bz=bx.s,bz!=null&&bz.$==0||bz!=null&&bz.$==2)){bA=n.ValueAndForever(bt);bB=n.ValueAndForever(bu);bA!=null&&bA.$==1?bB!=null&&bB.$==1?bA.$0[1]&&bB.$0[1]?n.MarkForever(bx,null):n.MarkReady(bx,null):void 0:void 0;}}bv=bt.s;bw=bu.s;return bv!=null&&bv.$==0?bw!=null&&bw.$==0?n.New({$:0,$0:null}):bu:bw!=null&&bw.$==0?bt:(bx=n.New({$:3,$0:[],$1:[]}),(n.When(bt,by,bx),n.When(bu,by,bx),bx));};n.Copy=function(bt){var bu,bv,bw;bu=bt.s;return bu==null?bt:bu!=null&&bu.$==2?(bv=n.New({$:2,$0:bu.$0,$1:[]}),(n.WhenObsolete(bt,bv),bv)):bu!=null&&bu.$==3?(bw=n.New({$:3,$0:[],$1:[]}),(n.When(bt,function(bx){n.MarkDone(bw,bt,bx);},bw),bw)):bt;};n.WhenObsoleteRun=function(bt,bu){var bv;bv=bt.s;bv==null?bu():bv!=null&&bv.$==2?bv.$1.push(bu):bv!=null&&bv.$==3?bv.$1.push(bu):void 0;};n.When=function(bt,bu,bv){var bw;bw=bt.s;bw==null?n.Obsolete(bv):bw!=null&&bw.$==2?(n.EnqueueSafe(bw.$1,bv),bu(bw.$0)):bw!=null&&bw.$==3?(bw.$0.push(bu),n.EnqueueSafe(bw.$1,bv)):bu(bw.$0);};n.MarkDone=function(bt,bu,bv){var bw;if(bw=bu.s,bw!=null&&bw.$==0)n.MarkForever(bt,bv);else n.MarkReady(bt,bv);};n.ValueAndForever=function(bt){var bu;bu=bt.s;return bu!=null&&bu.$==0?{$:1,$0:[bu.$0,true]}:bu!=null&&bu.$==2?{$:1,$0:[bu.$0,false]}:null;};n.MarkForever=function(bt,bu){var bv,bw,bx,by;bv=bt.s;if(bv!=null&&bv.$==3){bt.s={$:0,$0:bu};bw=bv.$0;for(bx=0,by=A.length(bw)-1;bx<=by;bx++)(A.get(bw,bx))(bu);}else void 0;};n.MarkReady=function(bt,bu){var bv,bw,bx,by;bv=bt.s;if(bv!=null&&bv.$==3){bt.s={$:2,$0:bu,$1:bv.$1};bw=bv.$0;for(bx=0,by=A.length(bw)-1;bx<=by;bx++)(A.get(bw,bx))(bu);}else void 0;};n.WhenObsolete=function(bt,bu){var bv;bv=bt.s;bv==null?n.Obsolete(bu):bv!=null&&bv.$==2?n.EnqueueSafe(bv.$1,bu):bv!=null&&bv.$==3?n.EnqueueSafe(bv.$1,bu):void 0;};n.Join=function(bt){var bu;bu=n.New({$:3,$0:[],$1:[]});n.When(bt,function(bv){var bw;bw=bv();n.When(bw,function(bx){var by,bz;if((by=bw.s,by!=null&&by.$==0)&&(bz=bt.s,bz!=null&&bz.$==0))n.MarkForever(bu,bx);else n.MarkReady(bu,bx);},bu);},bu);return bu;};n.EnqueueSafe=function(bt,bu){var bv,bw,bx,by;bt.push(bu);if(bt.length%20===0){bv=bt.slice(0);bg.Clear(bt);for(bw=0,bx=A.length(bv)-1;bw<=bx;bw++){by=A.get(bv,bw);typeof by=="object"?function(bz){if(bz.s)bt.push(bz);}(by):function(bz){bt.push(bz);}(by);}}else void 0;};o=f.AttrProxy=bp.Class({},null,o);o.Create=function(bt,bu){return w.Static(function(bv){t.SetAttr(bv,bt,bu);});};o.Concat=function(bt){var bu;bu=C.ofSeqNonCopying(bt);return C.TreeReduce(w.EmptyAttr(),o.Append,bu);};o.Append=function(bt,bu){return w.AppendTree(bt,bu);};q.NewFromSeq=function(bt){var bu,bv,bw;bu={};bv=F.Get(bt);try{while(bv.MoveNext()){bw=bv.Current();bu[bw[0]]=bw[1];}}finally{if("Dispose"in bv)bv.Dispose();}return bu;};s.Int=function(){s.set_counter(s.counter()+1);return s.counter();};s.set_counter=function(bt){M.$cctor();M.counter=bt;};s.counter=function(){M.$cctor();return M.counter;};t.CreateElement=function(bt){return t.Doc().createElement(bt);};t.SetAttr=function(bt,bu,bv){bt.setAttribute(bu,bv);};t.Doc=function(){K.$cctor();return K.Doc;};t.CreateText=function(bt){return t.Doc().createTextNode(bt);};t.ChildrenArray=function(bt){var bu,bv,bw;bu=[];for(bv=0,bw=bt.childNodes.length-1;bv<=bw;bv++)bu.push(bt.childNodes[bv]);return bu;};t.InsertAt=function(bt,bu,bv){var bw;if(!(bv.parentNode===bt&&bu===(bw=bv.nextSibling,y.Equals(bw,null)?null:bw)))bt.insertBefore(bv,bu);};t.IterSelector=function(bt,bu,bv){var bw,bx,by;bw=bt.querySelectorAll(bu);for(bx=0,by=bw.length-1;bx<=by;bx++)bv(bw[bx]);};t.RemoveNode=function(bt,bu){if(bu.parentNode===bt)bt.removeChild(bu);};u.append=function(bt,bu){return{GetEnumerator:function(){var bv,bw;bv=F.Get(bt);bw=[true];return new G.New(bv,null,function(bx){var by;return bx.s.MoveNext()?(bx.c=bx.s.Current(),true):(by=bx.s,!y.Equals(by,null)?by.Dispose():void 0,bx.s=null,bw[0]&&(bw[0]=false,bx.s=F.Get(bu),bx.s.MoveNext()?(bx.c=bx.s.Current(),true):(bx.s.Dispose(),bx.s=null,false)));},function(bx){var by;by=bx.s;!y.Equals(by,null)?by.Dispose():void 0;});}};};u.iter=function(bt,bu){var bv;bv=F.Get(bu);try{while(bv.MoveNext())bt(bv.Current());}finally{if("Dispose"in bv)bv.Dispose();}};u.map=function(bt,bu){return{GetEnumerator:function(){var bv;bv=F.Get(bu);return new G.New(null,null,function(bw){return bv.MoveNext()&&(bw.c=bt(bv.Current()),true);},function(){bv.Dispose();});}};};u.fold=function(bt,bu,bv){var bw,bx;bw=bu;bx=F.Get(bv);try{while(bx.MoveNext())bw=bt(bw,bx.Current());return bw;}finally{if("Dispose"in bx)bx.Dispose();}};u.max=function(bt){var bu,bv,bw;bu=F.Get(bt);try{if(!bu.MoveNext())u.seqEmpty();bv=bu.Current();while(bu.MoveNext()){bw=bu.Current();y.Compare(bw,bv)===1?bv=bw:void 0;}return bv;}finally{if("Dispose"in bu)bu.Dispose();}};u.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};v.Value=function(bt){function bu(bv){return{$:1,$0:bv};}return v.CustomValue(bt,a.id,function(bv){return bu(a.id(bv));});};v.CustomValue=function(bt,bu,bv){return v.CustomVar(bt,function(bw,bx){bw.value=bu(bx);},function(bw){return bv(bw.value);});};v.CustomVar=function(bt,bu,bv){function bw(by,bz){return bt.UpdateMaybe(function(bA){var bB,bC;bB=bv(by);return bB!=null&&bB.$==1&&(!y.Equals(bB.$0,bA)&&(bC=[bB,bB.$0],true))?bC[0]:null;});}function bx(by,bz){var bA,bB;bA=bv(by);return bA!=null&&bA.$==1&&(y.Equals(bA.$0,bz)&&(bB=bA.$0,true))?null:bu(by,bz);}return o.Concat([v.Handler("change",function(by){return function(bz){return bw(by,bz);};}),v.Handler("input",function(by){return function(bz){return bw(by,bz);};}),v.Handler("keypress",function(by){return function(bz){return bw(by,bz);};}),v.DynamicCustom(function(by){return function(bz){return bx(by,bz);};},bt.get_View())]);};v.Handler=function(bt,bu){return w.Static(function(bv){bv.addEventListener(bt,function(bw){return(bu(bv))(bw);},false);});};v.DynamicCustom=function(bt,bu){return w.Dynamic(bu,bt);};w.Static=function(bt){return new o({$:3,$0:bt});};w.Insert=function(bt,bu){var bv,bw,bx;function by(bz){if(!(bz===null))if(bz!=null&&bz.$==1)bv.push(bz.$0);else if(bz!=null&&bz.$==2){by(bz.$0);by(bz.$1);}else if(bz!=null&&bz.$==3)bz.$0(bt);else if(bz!=null&&bz.$==4)bw.push(bz.$0);}bv=[];bw=[];by(bu);bx=bv.slice(0);return T.New(bt,w.Flags(bu),bx,bw.length===0?null:{$:1,$0:function(bz){u.iter(function(bA){bA(bz);},bw);}});};w.EmptyAttr=function(){U.$cctor();return U.EmptyAttr;};w.AppendTree=function(bt,bu){var bv;return bt===null?bu:bu===null?bt:(bv=new o({$:2,$0:bt,$1:bu}),(w.SetFlags(bv,w.Flags(bt)|w.Flags(bu)),bv));};w.Updates=function(bt){return C.MapTreeReduce(function(bu){return bu.NChanged();},x.Const(),x.Map2Unit,bt.DynNodes);};w.Flags=function(bt){return bt!==null&&bt.hasOwnProperty("flags")?bt.flags:0;};w.SetFlags=function(bt,bu){bt.flags=bu;};w.HasChangeAnim=function(bt){var bu;bu=4;return(bt.DynFlags&bu)===bu;};w.GetChangeAnim=function(bt){return w.GetAnim(bt,function(bu,bv){return bu.NGetChangeAnim(bv);});};w.HasEnterAnim=function(bt){var bu;bu=1;return(bt.DynFlags&bu)===bu;};w.GetEnterAnim=function(bt){return w.GetAnim(bt,function(bu,bv){return bu.NGetEnterAnim(bv);});};w.HasExitAnim=function(bt){var bu;bu=2;return(bt.DynFlags&bu)===bu;};w.GetExitAnim=function(bt){return w.GetAnim(bt,function(bu,bv){return bu.NGetExitAnim(bv);});};w.Dynamic=function(bt,bu){return new o({$:1,$0:new ba.New(bt,bu)});};w.GetAnim=function(bt,bu){return Y.Concat(A.map(function(bv){return bu(bv,bt.DynElem);},bt.DynNodes));};w.Sync=function(bt,bu){A.iter(function(bv){bv.NSync(bt);},bu.DynNodes);};x=f.View=bp.Class({},null,x);y.Equals=function(bt,bu){var bv,bw,bx,by;if(bt===bu)return true;else{bv=typeof bt;if(bv=="object"){if(bt===null||bt===void 0||bu===null||bu===void 0)return false;else if("Equals"in bt)return bt.Equals(bu);else if(bt instanceof a.Array&&bu instanceof a.Array)return y.arrayEquals(bt,bu);else if(bt instanceof a.Date&&bu instanceof a.Date)return y.dateEquals(bt,bu);else{bw=[true];for(var bz in bt)if(function(bA){bw[0]=!bt.hasOwnProperty(bA)||bu.hasOwnProperty(bA)&&y.Equals(bt[bA],bu[bA]);return!bw[0];}(bz))break;if(bw[0]){for(var bA in bu)if(function(bB){bw[0]=!bu.hasOwnProperty(bB)||bt.hasOwnProperty(bB);return!bw[0];}(bA))break;}return bw[0];}}else return bv=="function"&&("$Func"in bt?bt.$Func===bu.$Func&&bt.$Target===bu.$Target:"$Invokes"in bt&&"$Invokes"in bu&&y.arrayEquals(bt.$Invokes,bu.$Invokes));}};y.arrayEquals=function(bt,bu){var bv,bw;if(A.length(bt)===A.length(bu)){bv=true;bw=0;while(bv&&bw<A.length(bt)){!y.Equals(A.get(bt,bw),A.get(bu,bw))?bv=false:void 0;bw=bw+1;}return bv;}else return false;};y.dateEquals=function(bt,bu){return bt.getTime()===bu.getTime();};y.Hash=function(bt){var bu;bu=typeof bt;return bu=="function"?0:bu=="boolean"?bt?1:0:bu=="number"?bt:bu=="string"?y.hashString(bt):bu=="object"?bt==null?0:bt instanceof a.Array?y.hashArray(bt):y.hashObject(bt):0;};y.hashString=function(bt){var bu,bv,bw;if(bt===null)return 0;else{bu=5381;for(bv=0,bw=bt.length-1;bv<=bw;bv++)bu=y.hashMix(bu,bt[bv].charCodeAt());return bu;}};y.hashArray=function(bt){var bu,bv,bw;bu=-34948909;for(bv=0,bw=A.length(bt)-1;bv<=bw;bv++)bu=y.hashMix(bu,y.Hash(A.get(bt,bv)));return bu;};y.hashObject=function(bt){var bu,bv;if("GetHashCode"in bt)return bt.GetHashCode();else{bu=[0];for(var bw in bt)if(function(bx){bu[0]=y.hashMix(y.hashMix(bu[0],y.hashString(bx)),y.Hash(bt[bx]));return false;}(bw))break;return bu[0];}};y.Compare=function(bt,bu){var bv,bw,bx,by,bz,bA;if(bt===bu)return 0;else{bw=typeof bt;switch(bw=="function"?1:bw=="boolean"?2:bw=="number"?2:bw=="string"?2:bw=="object"?3:0){case 0:return typeof bu=="undefined"?0:-1;break;case 1:return h.FailWith("Cannot compare function values.");break;case 2:return bt<bu?-1:1;break;case 3:if(bt===null)bx=-1;else if(bu===null)bx=1;else if("CompareTo"in bt)bx=bt.CompareTo(bu);else if("CompareTo0"in bt)bx=bt.CompareTo0(bu);else if(bt instanceof a.Array&&bu instanceof a.Array)bx=y.compareArrays(bt,bu);else if(bt instanceof a.Date&&bu instanceof a.Date)bx=y.compareDates(bt,bu);else{by=[0];for(var bB in bt)if(function(bC){return!bt.hasOwnProperty(bC)?false:!bu.hasOwnProperty(bC)?(by[0]=1,true):(by[0]=y.Compare(bt[bC],bu[bC]),by[0]!==0);}(bB))break;if(by[0]===0){for(var bC in bu)if(function(bD){return!bu.hasOwnProperty(bD)?false:!bt.hasOwnProperty(bD)&&(by[0]=-1,true);}(bC))break;}bx=by[0];}return bx;break;}}};y.hashMix=function(bt,bu){return(bt<<5)+bt+bu;};y.compareArrays=function(bt,bu){var bv,bw;if(A.length(bt)<A.length(bu))return -1;else if(A.length(bt)>A.length(bu))return 1;else{bv=0;bw=0;while(bv===0&&bw<A.length(bt)){bv=y.Compare(A.get(bt,bw),A.get(bu,bw));bw=bw+1;}return bv;}};y.compareDates=function(bt,bu){return y.Compare(bt.getTime(),bu.getTime());};A.get=function(bt,bu){A.checkBounds(bt,bu);return bt[bu];};A.length=function(bt){return bt.dims===2?bt.length*bt.length:bt.length;};A.checkBounds=function(bt,bu){if(bu<0||bu>=bt.length)h.FailWith("Index was outside the bounds of the array.");};A.set=function(bt,bu,bv){A.checkBounds(bt,bu);bt[bu]=bv;};B.CreateElemNode=function(bt,bu,bv){var bw;B.LinkElement(bt,bv);bw=w.Insert(bt,bu);return H.New(bw,bv,null,bt,s.Int(),bp.GetOptional(bw.OnAfterRender));};B.LinkElement=function(bt,bu){B.InsertDoc(bt,bu,null);};B.CreateRunState=function(bt,bu){return W.New(X.get_Empty(),B.CreateElemNode(bt,w.EmptyAttr(),bu));};B.PerformAnimatedUpdate=function(bt,bu){var bv;return Y.get_UseAnimations()?(bv=null,_3.Delay(function(){var bw,bx,by;bw=X.FindAll(bu);bx=B.ComputeChangeAnim(bt,bw);by=B.ComputeEnterAnim(bt,bw);return _3.Bind(Y.Play(Y.Append(bx,B.ComputeExitAnim(bt,bw))),function(){return _3.Bind(B.SyncElemNodesNextFrame(bt),function(){return _3.Bind(Y.Play(by),function(){bt.PreviousNodes=bw;return _3.Return(null);});});});})):B.SyncElemNodesNextFrame(bt);};B.CreateEmbedNode=function(){return{Current:null,Dirty:false};};B.UpdateEmbedNode=function(bt,bu){bt.Current=bu;bt.Dirty=true;};B.InsertDoc=function(bt,bu,bv){var bw;return bu!=null&&bu.$==1?B.InsertNode(bt,bu.$0.El,bv):bu!=null&&bu.$==2?(bw=bu.$0,(bw.Dirty=false,B.InsertDoc(bt,bw.Current,bv))):bu==null?bv:bu!=null&&bu.$==4?B.InsertNode(bt,bu.$0.Text,bv):bu!=null&&bu.$==5?B.InsertNode(bt,bu.$0,bv):bu!=null&&bu.$==6?A.foldBack(function(bx,by){return bx.constructor===P?B.InsertDoc(bt,bx,by):B.InsertNode(bt,bx,by);},bu.$0.Els,bv):B.InsertDoc(bt,bu.$0,B.InsertDoc(bt,bu.$1,bv));};B.LocalTemplatesLoaded=function(){Z.$cctor();return Z.LocalTemplatesLoaded;};B.set_LocalTemplatesLoaded=function(bt){Z.$cctor();Z.LocalTemplatesLoaded=bt;};B.ComputeChangeAnim=function(bt,bu){var bv;function bw(bx){return w.HasChangeAnim(bx.Attr);}bv=function(bx){return X.Filter(bw,bx);};return Y.Concat(A.map(function(bx){return w.GetChangeAnim(bx.Attr);},X.ToArray(X.Intersect(bv(bt.PreviousNodes),bv(bu)))));};B.ComputeEnterAnim=function(bt,bu){return Y.Concat(A.map(function(bv){return w.GetEnterAnim(bv.Attr);},X.ToArray(X.Except(bt.PreviousNodes,X.Filter(function(bv){return w.HasEnterAnim(bv.Attr);},bu)))));};B.ComputeExitAnim=function(bt,bu){return Y.Concat(A.map(function(bv){return w.GetExitAnim(bv.Attr);},X.ToArray(X.Except(bu,X.Filter(function(bv){return w.HasExitAnim(bv.Attr);},bt.PreviousNodes)))));};B.SyncElemNodesNextFrame=function(bt){function bu(bv){a.requestAnimationFrame(function(){B.SyncElemNode(bt.Top);bv();});}return _3.FromContinuations(function(bv,bw,bx){return bu.apply(null,[bv,bw,bx]);});};B.InsertNode=function(bt,bu,bv){t.InsertAt(bt,bv,bu);return bu;};B.LoadedTemplateFile=function(bt){var bu,bv,bw;bu=(bv=null,[B.LoadedTemplates().TryGetValue(bt,{get:function(){return bv;},set:function(bx){bv=bx;}}),bv]);return bu[0]?bu[1]:(bw=new _1.New$5(),(B.LoadedTemplates().set_Item(bt,bw),bw));};B.LoadedTemplates=function(){Z.$cctor();return Z.LoadedTemplates;};B.SyncElemNode=function(bt){B.SyncElement(bt);B.Sync(bt.Children);B.AfterRender(bt);};B.SyncElement=function(bt){function bu(bv){function bw(bx){var by,bz;return bx!=null&&bx.$==0?bw(bx.$0)||bw(bx.$1):bx!=null&&bx.$==2?(by=bx.$0,by.Dirty||bw(by.Current)):bx!=null&&bx.$==6&&(bz=bx.$0,bz.Dirty||A.exists(bu,bz.Holes));}return bw(bv.Children);}w.Sync(bt.El,bt.Attr);bu(bt)?B.DoSyncElement(bt):void 0;};B.Sync=function(bt){var bu,bv;if(bt!=null&&bt.$==1)B.SyncElemNode(bt.$0);else if(bt!=null&&bt.$==2)B.Sync(bt.$0.Current);else if(bt==null);else if(bt!=null&&bt.$==5);else if(bt!=null&&bt.$==4){bu=bt.$0;bu.Dirty?(bu.Text.nodeValue=bu.Value,bu.Dirty=false):void 0;}else if(bt!=null&&bt.$==6){bv=bt.$0;A.iter(function(bw){B.SyncElemNode(bw);},bv.Holes);A.iter(function(bw){w.Sync(bw[0],bw[1]);},bv.Attrs);B.AfterRender(bv);}else{B.Sync(bt.$0);B.Sync(bt.$1);}};B.AfterRender=function(bt){var bu;bu=bp.GetOptional(bt.Render);bu!=null&&bu.$==1?(bu.$0(bt.El),bp.SetOptional(bt,"Render",null)):void 0;};B.TextHoleRE=function(){Z.$cctor();return Z.TextHoleRE;};B.DoSyncElement=function(bt){var bu,bv,bw;function bx(by,bz){var bA,bB;return by!=null&&by.$==1?by.$0.El:by!=null&&by.$==2?(bA=by.$0,bA.Dirty?(bA.Dirty=false,B.InsertDoc(bu,bA.Current,bz)):bx(bA.Current,bz)):by==null?bz:by!=null&&by.$==4?by.$0.Text:by!=null&&by.$==5?by.$0:by!=null&&by.$==6?(bB=by.$0,(bB.Dirty?bB.Dirty=false:void 0,A.foldBack(function(bC,bD){return bC.constructor===P?bx(bC,bD):bC;},bB.Els,bz))):bx(by.$0,bx(by.$1,bz));}bu=bt.El;bl.Iter((bv=bt.El,function(by){t.RemoveNode(bv,by);}),bl.Except(bl.DocChildren(bt),bl.Children(bt.El,bp.GetOptional(bt.Delimiters))));bx(bt.Children,(bw=bp.GetOptional(bt.Delimiters),bw!=null&&bw.$==1?bw.$0[1]:null));};C.MapTreeReduce=function(bt,bu,bv,bw){var bx;function by(bz,bA){var bB,bC;return bA<=0?bu:bA===1&&(bz>=0&&bz<bx)?bt(A.get(bw,bz)):(bC=bA/2>>0,bv(by(bz,bC),by(bz+bC,bA-bC)));}bx=A.length(bw);return by(0,bx);};C.ofSeqNonCopying=function(bt){var bu,bv;if(bt instanceof a.Array)return bt;else if(bt instanceof O)return A.ofList(bt);else if(bt===null)return[];else{bu=[];bv=F.Get(bt);try{while(bv.MoveNext())bu.push(bv.Current());return bu;}finally{if("Dispose"in bv)bv.Dispose();}}};C.TreeReduce=function(bt,bu,bv){var bw;function bx(by,bz){var bA,bB;return bz<=0?bt:bz===1&&(by>=0&&by<bw)?A.get(bv,by):(bB=bz/2>>0,bu(bx(by,bB),bx(by+bB,bz-bB)));}bw=A.length(bv);return bx(0,bw);};x.Const=function(bt){var bu;bu=n.New({$:0,$0:bt});return function(){return bu;};};x.Map=function(bt,bu){return x.CreateLazy(function(){return n.Map(bt,bu());});};x.Sink=function(bt,bu){function bv(){n.WhenRun(bu(),bt,function(){_3.scheduler().Fork(bv);});}_3.scheduler().Fork(bv);};x.Map2Unit=function(bt,bu){return x.CreateLazy(function(){return n.Map2Unit(bt(),bu());});};x.Bind=function(bt,bu){return x.Join(x.Map(bt,bu));};x.CreateLazy=function(bt){var bu;bu={c:null,o:bt};return function(){var bv,bw;bv=bu.c;return bv===null?(bv=bu.o(),bu.c=bv,(bw=bv.s,bw!=null&&bw.$==0)?bu.o=null:n.WhenObsoleteRun(bv,function(){bu.c=null;}),bv):bv;};};x.Join=function(bt){return x.CreateLazy(function(){return n.Join(bt());});};n.Obsolete=function(bt){var bu,bv,bw,bx,by;bv=bt.s;if(bv==null||(bv!=null&&bv.$==2?(bu=bv.$1,false):bv!=null&&bv.$==3?(bu=bv.$1,false):true))void 0;else{bt.s=null;for(bw=0,bx=A.length(bu)-1;bw<=bx;bw++){by=A.get(bu,bw);typeof by=="object"?function(bz){n.Obsolete(bz);}(by):by();}}};n.New=function(bt){return{s:bt};};E=f.Elt=bp.Class({},l,E);E.New=function(bt,bu,bv){var bw,bx;bw=B.CreateElemNode(bt,bu,bv.docNode);bx=Q.Create(bv.updates);return new E.New$1({$:1,$0:bw},x.Map2Unit(w.Updates(bw.Attr),bx.v),bt,bx);};E.New$1=bp.Ctor(function(bt,bu,bv,bw){l.New.call(this,bt,bu);this.docNode$1=bt;this.updates$1=bu;this.elt=bv;this.rvUpdates=bw;},E);F.Get=function(bt){return bt instanceof a.Array?F.ArrayEnumerator(bt):y.Equals(typeof bt,"string")?F.StringEnumerator(bt):bt.GetEnumerator();};F.ArrayEnumerator=function(bt){return new G.New(0,null,function(bu){var bv;bv=bu.s;return bv<A.length(bt)&&(bu.c=A.get(bt,bv),bu.s=bv+1,true);},void 0);};F.StringEnumerator=function(bt){return new G.New(0,null,function(bu){var bv;bv=bu.s;return bv<bt.length&&(bu.c=bt[bv],bu.s=bv+1,true);},void 0);};F.Get0=function(bt){return bt instanceof a.Array?F.ArrayEnumerator(bt):y.Equals(typeof bt,"string")?F.StringEnumerator(bt):"GetEnumerator0"in bt?bt.GetEnumerator0():bt.GetEnumerator();};G=F.T=bp.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},i,G);G.New=bp.Ctor(function(bt,bu,bv,bw){this.s=bt;this.c=bu;this.n=bv;this.d=bw;},G);H=f.DocElemNode=bp.Class({Equals:function(bt){return this.ElKey===bt.ElKey;},GetHashCode:function(){return this.ElKey;}},null,H);H.New=function(bt,bu,bv,bw,bx,by){var bz;return new H((bz={Attr:bt,Children:bu,El:bw,ElKey:bx},(bp.SetOptional(bz,"Delimiters",bv),bp.SetOptional(bz,"Render",by),bz)));};J.GetFieldValues=function(bt){var bu,bv;bu=[];for(var bw in bt)bu.push(bt[bw]);return bu;};K.$cctor=function(){K.$cctor=a.ignore;K.Doc=a.document;};L.StartProcessor=function(bt){var bu;function bv(){var bw;bw=null;return _3.Delay(function(){return _3.Bind(bt,function(){var bx;bx=bu[0];return bx===1?(bu[0]=0,_3.Zero()):bx===2?(bu[0]=1,bv()):_3.Zero();});});}bu=[0];return function(){var bw;bw=bu[0];bw===0?(bu[0]=1,_3.Start(bv(),null)):bw===1?bu[0]=2:void 0;};};M.$cctor=function(){M.$cctor=a.ignore;M.counter=0;};O=N.T=bp.Class({GetEnumerator:function(){return new G.New(this,null,function(bt){var bu;bu=bt.s;return bu.$==0?false:(bt.c=bu.$0,bt.s=bu.$1,true);},void 0);},GetEnumerator0:function(){return F.Get(this);}},null,O);A.ofList=function(bt){var bu,bv;bv=[];bu=bt;while(!(bu.$==0)){bv.push(N.head(bu));bu=N.tail(bu);}return bv;};A.foldBack=function(bt,bu,bv){var bw,bx,by,bz,bA;bw=bv;by=bu.length;for(bz=1,bA=by;bz<=bA;bz++)bw=bt(bu[by-bz],bw);return bw;};A.iter=function(bt,bu){var bv,bw;for(bv=0,bw=bu.length-1;bv<=bw;bv++)bt(bu[bv]);};A.map=function(bt,bu){var bv,bw,bx;bv=new a.Array(bu.length);for(bw=0,bx=bu.length-1;bw<=bx;bw++)bv[bw]=bt(bu[bw]);return bv;};A.choose=function(bt,bu){var bv,bw,bx,by;bv=[];for(bw=0,bx=bu.length-1;bw<=bx;bw++){by=bt(bu[bw]);by==null?void 0:bv.push(by.$0);}return bv;};A.tryPick=function(bt,bu){var bv,bw,bx;bv=null;bw=0;while(bw<bu.length&&bv==null){bx=bt(bu[bw]);bx!=null&&bx.$==1?bv=bx:void 0;bw=bw+1;}return bv;};A.tryFindIndex=function(bt,bu){var bv,bw;bv=null;bw=0;while(bw<bu.length&&bv==null){bt(bu[bw])?bv={$:1,$0:bw}:void 0;bw=bw+1;}return bv;};A.exists=function(bt,bu){var bv,bw,bx,by;bv=false;bw=0;by=A.length(bu);while(!bv&&bw<by)if(bt(bu[bw]))bv=true;else bw=bw+1;return bv;};A.filter=function(bt,bu){var bv,bw,bx;bv=[];for(bw=0,bx=bu.length-1;bw<=bx;bw++)if(bt(bu[bw]))bv.push(bu[bw]);return bv;};A.create=function(bt,bu){var bv,bw,bx;bv=new a.Array(bt);for(bw=0,bx=bt-1;bw<=bx;bw++)bv[bw]=bu;return bv;};A.concat=function(bt){return a.Array.prototype.concat.apply([],A.ofSeq(bt));};A.ofSeq=function(bt){var bu,bv;if(bt instanceof a.Array)return bt.slice();else if(bt instanceof O)return A.ofList(bt);else{bu=[];bv=F.Get(bt);try{while(bv.MoveNext())bu.push(bv.Current());return bu;}finally{if("Dispose"in bv)bv.Dispose();}}};A.pick=function(bt,bu){var bv;bv=A.tryPick(bt,bu);return bv==null?h.FailWith("KeyNotFoundException"):bv.$0;};A.init=function(bt,bu){var bv,bw,bx;bt<0?h.FailWith("Negative size given."):null;bv=new a.Array(bt);for(bw=0,bx=bt-1;bw<=bx;bw++)bv[bw]=bu(bw);return bv;};A.forall=function(bt,bu){var bv,bw,bx,by;bv=true;bw=0;by=A.length(bu);while(bv&&bw<by)if(bt(bu[bw]))bw=bw+1;else bv=false;return bv;};Q=f.Updates=bp.Class({},null,Q);Q.Create=function(bt){var bu;bu=null;bu=Q.New(bt,null,function(){var bv;bv=bu.s;return bv===null?(bv=n.Copy(bu.c()),bu.s=bv,n.WhenObsoleteRun(bv,function(){bu.s=null;}),bv):bv;});return bu;};Q.New=function(bt,bu,bv){return new Q({c:bt,s:bu,v:bv});};T.New=function(bt,bu,bv,bw){var bx;bx={DynElem:bt,DynFlags:bu,DynNodes:bv};bp.SetOptional(bx,"OnAfterRender",bw);return bx;};U.$cctor=function(){U.$cctor=a.ignore;U.EmptyAttr=null;};W.New=function(bt,bu){return{PreviousNodes:bt,Top:bu};};X.get_Empty=function(){return{$:0,$0:new _2.New$3()};};X.FindAll=function(bt){var bu;function bv(bx){if(bx!=null&&bx.$==0){bv(bx.$0);bv(bx.$1);}else if(bx!=null&&bx.$==1)bw(bx.$0);else if(bx!=null&&bx.$==2)bv(bx.$0.Current);else if(bx!=null&&bx.$==6)A.iter(bw,bx.$0.Holes);}function bw(bx){bu.push(bx);bv(bx.Children);}bu=[];bv(bt);return{$:0,$0:new _2.New$2(bu)};};X.Filter=function(bt,bu){return{$:0,$0:$.Filter(bt,bu.$0)};};X.Intersect=function(bt,bu){return{$:0,$0:$.Intersect(bt.$0,bu.$0)};};X.ToArray=function(bt){return $.ToArray(bt.$0);};X.Except=function(bt,bu){return{$:0,$0:$.Except(bt.$0,bu.$0)};};Y.get_UseAnimations=function(){return _4.UseAnimations();};Y.Play=function(bt){var bu;bu=null;return _3.Delay(function(){return _3.Bind(Y.Run(a.ignore,_4.Actions(bt)),function(){_4.Finalize(bt);return _3.Return(null);});});};Y.Append=function(bt,bu){return{$:0,$0:_5.Append(bt.$0,bu.$0)};};Y.Concat=function(bt){return{$:0,$0:_5.Concat(u.map(_4.List,bt))};};Y.Run=function(bt,bu){var bv;function bw(bx){function by(bz,bA){var bB;bB=bA-bz;bu.Compute(bB);bt();return bB<=bv?void a.requestAnimationFrame(function(bC){by(bz,bC);}):bx();}a.requestAnimationFrame(function(bz){by(bz,bz);});}bv=bu.Duration;return bv===0?_3.Zero():_3.FromContinuations(function(bx,by,bz){return bw.apply(null,[bx,by,bz]);});};Y.get_Empty=function(){return{$:0,$0:_5.Empty()};};N.head=function(bt){return bt.$==1?bt.$0:N.listEmpty();};N.tail=function(bt){return bt.$==1?bt.$1:N.listEmpty();};N.listEmpty=function(){return h.FailWith("The input list was empty.");};Z.$cctor=function(){Z.$cctor=a.ignore;Z.LoadedTemplates=new _1.New$5();Z.LocalTemplatesLoaded=false;Z.TextHoleRE="\\${([^}]+)}";};_1=_0.Dictionary=bp.Class({set_Item:function(bt,bu){this.set(bt,bu);},TryGetValue:function(bt,bu){var bv,bw,bx;bv=this;bw=this.data[this.hash(bt)];return bw&&(bx=A.tryPick(function(by){var bz;bz=h.KeyValue(by);return bv.equals.apply(null,[bz[0],bt])?{$:1,$0:bz[1]}:null;},bw),bx!=null&&bx.$==1&&(bu.set(bx.$0),true));},set:function(bt,bu){var bv,bw,bx,by;bv=this;bw=this.hash(bt);bx=this.data[bw];bx?(by=A.tryFindIndex(function(bz){return bv.equals.apply(null,[(h.KeyValue(bz))[0],bt]);},bx),by==null?(this.count=this.count+1,bx.push({K:bt,V:bu})):bx[by.$0]={K:bt,V:bu}):(this.count=this.count+1,this.data[bw]=new a.Array({K:bt,V:bu}));},ContainsKey:function(bt){var bu,bv;bu=this;bv=this.data[this.hash(bt)];return bv&&A.exists(function(bw){return bu.equals.apply(null,[(h.KeyValue(bw))[0],bt]);},bv);},get_Item:function(bt){return this.get(bt);},get:function(bt){var bu,bv;bu=this;bv=this.data[this.hash(bt)];return bv?A.pick(function(bw){var bx;bx=h.KeyValue(bw);return bu.equals.apply(null,[bx[0],bt])?{$:1,$0:bx[1]}:null;},bv):_6.notPresent();},GetEnumerator:function(){return F.Get0(this);},GetEnumerator0:function(){return F.Get0(A.concat(J.GetFieldValues(this.data)));}},i,_1);_1.New$5=bp.Ctor(function(){_1.New$6.call(this,[],y.Equals,y.Hash);},_1);_1.New$6=bp.Ctor(function(bt,bu,bv){var bw,bx;this.equals=bu;this.hash=bv;this.count=0;this.data=[];bw=F.Get(bt);try{while(bw.MoveNext()){bx=bw.Current();this.set(bx.K,bx.V);}}finally{if("Dispose"in bw)bw.Dispose();}},_1);_2=_0.HashSet=bp.Class({Contains:function(bt){var bu;bu=this.data[this.hash(bt)];return bu==null?false:this.arrContains(bt,bu);},Add:function(bt){return this.add(bt);},add:function(bt){var bu,bv;bu=this.hash(bt);bv=this.data[bu];return bv==null?(this.data[bu]=[bt],this.count=this.count+1,true):this.arrContains(bt,bv)?false:(bv.push(bt),this.count=this.count+1,true);},IntersectWith:function(bt){var bu,bv,bw,bx,by;bu=new _2.New$4(bt,this.equals,this.hash);bv=bi.concat(this.data);for(bw=0,bx=bv.length-1;bw<=bx;bw++){by=bv[bw];!bu.Contains(by)?this.Remove(by):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bt){var bu,bv,bw,bx;bu=0;bv=bi.concat(this.data);for(bw=0,bx=bv.length-1;bw<=bx;bw++)A.set(bt,bw,bv[bw]);},ExceptWith:function(bt){var bu;bu=F.Get(bt);try{while(bu.MoveNext())this.Remove(bu.Current());}finally{if("Dispose"in bu)bu.Dispose();}},arrContains:function(bt,bu){var bv,bw,bx,by;bv=true;bw=0;by=bu.length;while(bv&&bw<by)if(this.equals.apply(null,[bu[bw],bt]))bv=false;else bw=bw+1;return!bv;},Remove:function(bt){var bu;bu=this.data[this.hash(bt)];return bu==null?false:this.arrRemove(bt,bu)&&(this.count=this.count-1,true);},arrRemove:function(bt,bu){var bv,bw,bx,by;bv=true;bw=0;by=bu.length;while(bv&&bw<by)if(this.equals.apply(null,[bu[bw],bt])){bu.splice.apply(bu,[bw,1]);bv=false;}else bw=bw+1;return!bv;},GetEnumerator:function(){return F.Get(bi.concat(this.data));},GetEnumerator0:function(){return F.Get(bi.concat(this.data));}},i,_2);_2.New$3=bp.Ctor(function(){_2.New$4.call(this,[],y.Equals,y.Hash);},_2);_2.New$2=bp.Ctor(function(bt){_2.New$4.call(this,bt,y.Equals,y.Hash);},_2);_2.New$4=bp.Ctor(function(bt,bu,bv){var bw;this.equals=bu;this.hash=bv;this.data=[];this.count=0;bw=F.Get(bt);try{while(bw.MoveNext())this.add(bw.Current());}finally{if("Dispose"in bw)bw.Dispose();}},_2);_3.Delay=function(bt){return function(bu){try{(bt(null))(bu);}catch(bv){bu.k({$:1,$0:bv});}};};_3.Bind=function(bt,bu){return _3.checkCancel(function(bv){bt(_7.New(function(bw){var bx;if(bw.$==0){bx=bw.$0;_3.scheduler().Fork(function(){try{(bu(bx))(bv);}catch(by){bv.k({$:1,$0:by});}});}else _3.scheduler().Fork(function(){bv.k(bw);});},bv.ct));});};_3.Zero=function(){_8.$cctor();return _8.Zero;};_3.Start=function(bt,bu){var bv,bw;bv=(bw=(_3.defCTS())[0],bu==null?bw:bu.$0);_3.scheduler().Fork(function(){if(!bv.c)bt(_7.New(function(bx){if(bx.$==1)_3.UncaughtAsyncError(bx.$0);},bv));});};_3.Return=function(bt){return function(bu){bu.k({$:0,$0:bt});};};_3.checkCancel=function(bt){return function(bu){if(bu.ct.c)_3.cancel(bu);else bt(bu);};};_3.defCTS=function(){_8.$cctor();return _8.defCTS;};_3.UncaughtAsyncError=function(bt){br.log("WebSharper: Uncaught asynchronous exception",bt);};_3.FromContinuations=function(bt){return function(bu){var bv;function bw(bx){if(bv[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bv[0]=true;_3.scheduler().Fork(bx);}}bv=[false];bt(function(bx){bw(function(){bu.k({$:0,$0:bx});});},function(bx){bw(function(){bu.k({$:1,$0:bx});});},function(bx){bw(function(){bu.k({$:2,$0:bx});});});};};_3.cancel=function(bt){bt.k({$:2,$0:new bh.New(bt.ct)});};_3.scheduler=function(){_8.$cctor();return _8.scheduler;};_4.UseAnimations=function(){_.$cctor();return _.UseAnimations;};_4.Actions=function(bt){return _4.ConcatActions(A.choose(function(bu){return bu.$==1?{$:1,$0:bu.$0}:null;},_5.ToArray(bt.$0)));};_4.Finalize=function(bt){A.iter(function(bu){if(bu.$==0)bu.$0();},_5.ToArray(bt.$0));};_4.List=function(bt){return bt.$0;};_4.ConcatActions=function(bt){var bu,bv,bw,bx;bu=C.ofSeqNonCopying(bt);bv=A.length(bu);return bv===0?_4.Const():bv===1?A.get(bu,0):(bw=u.max(u.map(function(by){return by.Duration;},bu)),(bx=A.map(function(by){return _4.Prolong(bw,by);},bu),_4.Def(bw,function(by){A.iter(function(bz){bz.Compute(by);},bx);})));};_4.Const=function(bt){return _4.Def(0,function(){return bt;});};_4.Prolong=function(bt,bu){var bv,bw,bx;bv=bu.Compute;bw=bu.Duration;bx=bk.Create(function(){return bu.Compute(bu.Duration);});return{Compute:function(by){return by>=bw?bx.f():bv(by);},Duration:bt};};_4.Def=function(bt,bu){return{Compute:bu,Duration:bt};};_5.Append=function(bt,bu){return bt.$==0?bu:bu.$==0?bt:{$:2,$0:bt,$1:bu};};_5.Concat=function(bt){var bu;bu=C.ofSeqNonCopying(bt);return C.TreeReduce(_5.Empty(),_5.Append,bu);};_5.ToArray=function(bt){var bu;function bv(bw){if(bw.$==1)bu.push(bw.$0);else if(bw.$==2){bv(bw.$0);bv(bw.$1);}else if(bw.$==3)A.iter(function(bx){bu.push(bx);},bw.$0);}bu=[];bv(bt);return bu.slice(0);};_5.Empty=function(){bj.$cctor();return bj.Empty;};_6.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};_7.New=function(bt,bu){return{k:bt,ct:bu};};_8.$cctor=function(){_8.$cctor=a.ignore;_8.noneCT=_9.New(false,[]);_8.scheduler=new bd.New();_8.defCTS=[new be.New()];_8.Zero=_3.Return();_8.GetCT=function(bt){bt.k({$:0,$0:bt.ct});};};_9.New=function(bt,bu){return{c:bt,r:bu};};_.$cctor=function(){_.$cctor=a.ignore;_.CubicInOut=bf.Custom(function(bt){var bu;bu=bt*bt;return 3*bu-2*(bu*bt);});_.UseAnimations=true;};$.Filter=function(bt,bu){return new _2.New$2(A.filter(bt,$.ToArray(bu)));};$.Intersect=function(bt,bu){var bv;bv=new _2.New$2($.ToArray(bt));bv.IntersectWith($.ToArray(bu));return bv;};$.ToArray=function(bt){var bu;bu=A.create(bt.get_Count(),void 0);bt.CopyTo(bu);return bu;};$.Except=function(bt,bu){var bv;bv=new _2.New$2($.ToArray(bu));bv.ExceptWith($.ToArray(bt));return bv;};ba=f.DynamicAttrNode=bp.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bt){return Y.get_Empty();},NGetEnterAnim:function(bt){return Y.get_Empty();},NGetExitAnim:function(bt){return Y.get_Empty();},NSync:function(bt){if(this.dirty){(this.push(bt))(this.value);this.dirty=false;}}},i,ba);ba.New=bp.Ctor(function(bt,bu){var bv;bv=this;this.push=bu;this.value=void 0;this.dirty=false;this.updates=x.Map(function(bw){bv.value=bw;bv.dirty=true;},bt);},ba);bb.string=function(bt,bu,bv){return bu==null?bv!=null&&bv.$==1?bt.slice(0,bv.$0+1):"":bv==null?bt.slice(bu.$0):bt.slice(bu.$0,bv.$0+1);};bc.concat=function(bt,bu){return A.ofSeq(bu).join(bt);};bc.StartsWith=function(bt,bu){return bt.substring(0,bu.length)==bu;};bc.SplitChars=function(bt,bu,bv){return bc.Split(bt,new a.RegExp("["+bc.RegexEscape(bu.join(""))+"]"),bv);};bc.RegexEscape=function(bt){return bt.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bc.Split=function(bt,bu,bv){return bv===1?A.filter(function(bw){return bw!=="";},bc.SplitWith(bt,bu)):bc.SplitWith(bt,bu);};bc.SplitWith=function(bt,bu){return bt.split(bu);};bd=_3.Scheduler=bp.Class({Fork:function(bt){var bu;bu=this;this.robin.push(bt);this.idle?(this.idle=false,a.setTimeout(function(){bu.tick();},0)):void 0;},tick:function(){var bt,bu,bv;bu=this;bv=bs.now();bt=true;while(bt)if(this.robin.length===0){this.idle=true;bt=false;}else{(this.robin.shift())();bs.now()-bv>40?(a.setTimeout(function(){bu.tick();},0),bt=false):void 0;}}},i,bd);bd.New=bp.Ctor(function(){this.idle=true;this.robin=[];},bd);be=b.CancellationTokenSource=bp.Class({},i,be);be.New=bp.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},be);bf=f.Easing=bp.Class({},i,bf);bf.Custom=function(bt){return new bf.New(bt);};bf.New=bp.Ctor(function(bt){this.transformTime=bt;},bf);bg.Clear=function(bt){bt.splice(0,A.length(bt));};bh=b.OperationCanceledException=bp.Class({},null,bh);bh.New=bp.Ctor(function(bt){bh.New$1.call(this,"The operation was canceled.",null,bt);},bh);bh.New$1=bp.Ctor(function(bt,bu,bv){this.message=bt;this.inner=bu;this.ct=bv;},bh);bi.concat=function(bt){var bu,bv;bu=[];for(var bw in bt)bu.push.apply(bu,bt[bw]);return bu;};bj.$cctor=function(){bj.$cctor=a.ignore;bj.Empty={$:0};};bk.Create=function(bt){return bn.New(false,bt,bk.forceLazy);};bk.forceLazy=function(){var bt;bt=this.v();this.c=true;this.v=bt;this.f=bk.cachedLazy;return bt;};bk.cachedLazy=function(){return this.v;};bl.DocChildren=function(bt){var bu;function bv(bw){if(bw!=null&&bw.$==2)bv(bw.$0.Current);else if(bw!=null&&bw.$==1)bu.push(bw.$0.El);else if(bw==null);else if(bw!=null&&bw.$==5)bu.push(bw.$0);else if(bw!=null&&bw.$==4)bu.push(bw.$0.Text);else if(bw!=null&&bw.$==6)A.iter(function(bx){if(bx.constructor===P)bv(bx);else bu.push(bx);},bw.$0.Els);else{bv(bw.$0);bv(bw.$1);}}bu=[];bv(bt.Children);return{$:0,$0:C.ofSeqNonCopying(bu)};};bl.Children=function(bt,bu){var bv,bw,bx;if(bu!=null&&bu.$==1){bx=[];bv=bu.$0[0].nextSibling;while(bv!==bu.$0[1]){bx.push(bv);bv=bv.nextSibling;}return{$:0,$0:bx};}else return{$:0,$0:A.init(bt.childNodes.length,(bw=bt.childNodes,function(by){return bw[by];}))};};bl.Except=function(bt,bu){var bv;bv=bt.$0;return{$:0,$0:A.filter(function(bw){return A.forall(function(bx){return!(bw===bx);},bv);},bu.$0)};};bl.Iter=function(bt,bu){A.iter(bt,bu.$0);};bn.New=function(bt,bu,bv){return{c:bt,v:bu,f:bv};};bp.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
