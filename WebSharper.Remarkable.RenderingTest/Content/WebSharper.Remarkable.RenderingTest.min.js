function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Remarkable=b.Remarkable||{};d=c.RenderingTest=c.RenderingTest||{};e=d.Client=d.Client||{};f=b.UI=b.UI||{};g=f.Var=f.Var||{};h=b.Operators=b.Operators||{};i=b.Obj=b.Obj||{};j=f.HtmlModule=f.HtmlModule||{};k=j.attr=j.attr||{};l=f.Doc=f.Doc||{};m=f.ConcreteVar=f.ConcreteVar||{};n=f.Snap=f.Snap||{};o=f.AttrProxy=f.AttrProxy||{};p=b.JavaScript=b.JavaScript||{};q=p.Pervasives=p.Pervasives||{};r=f.Abbrev=f.Abbrev||{};s=r.Fresh=r.Fresh||{};t=f.DomUtility=f.DomUtility||{};u=b.Seq=b.Seq||{};v=f.AttrModule=f.AttrModule||{};w=f.Attrs=f.Attrs||{};x=f.View=f.View||{};y=b.Unchecked=b.Unchecked||{};z=a.EventTarget;A=b.Arrays=b.Arrays||{};B=f.Docs=f.Docs||{};C=f.Array=f.Array||{};D=a.Node;E=f.Elt=f.Elt||{};F=b.Enumerator=b.Enumerator||{};G=F.T=F.T||{};H=f.DocElemNode=f.DocElemNode||{};I=a.CharacterData;J=p.JSModule=p.JSModule||{};K=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};L=r.Mailbox=r.Mailbox||{};M=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};N=b.List=b.List||{};O=N.T=N.T||{};P=a.Object;Q=f.Updates=f.Updates||{};R=f.Client=f.Client||{};S=R.Attrs=R.Attrs||{};T=S.Dyn=S.Dyn||{};U=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};V=R.Docs=R.Docs||{};W=V.RunState=V.RunState||{};X=V.NodeSet=V.NodeSet||{};Y=f.An=f.An||{};Z=a.StartupCode$WebSharper_UI$Doc_Client=a.StartupCode$WebSharper_UI$Doc_Client||{};_0=b.Collections=b.Collections||{};_1=_0.Dictionary=_0.Dictionary||{};_2=_0.HashSet=_0.HashSet||{};_3=b.Concurrency=b.Concurrency||{};_4=f.Anims=f.Anims||{};_5=f.AppendList=f.AppendList||{};_6=R.Settings=R.Settings||{};_7=_0.DictionaryUtil=_0.DictionaryUtil||{};_8=_3.AsyncBody=_3.AsyncBody||{};_9=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_=_3.CT=_3.CT||{};$=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};ba=r.HashSet=r.HashSet||{};bb=f.DynamicAttrNode=f.DynamicAttrNode||{};bc=b.Slice=b.Slice||{};bd=b.Strings=b.Strings||{};be=_3.Scheduler=_3.Scheduler||{};bf=b.CancellationTokenSource=b.CancellationTokenSource||{};bg=f.Easing=f.Easing||{};bh=b.Queue=b.Queue||{};bi=b.OperationCanceledException=b.OperationCanceledException||{};bj=_0.HashSetUtil=_0.HashSetUtil||{};bk=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bl=b.Lazy=b.Lazy||{};bm=V.DomNodes=V.DomNodes||{};bn=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bo=bn.LazyRecord=bn.LazyRecord||{};bp=a.IntelliFactory;bq=bp&&bp.Runtime;br=a.jQuery;bs=a.console;bt=a.Date;e.Main=function(){var bu,bv;function bw(bx){return bu.render(bx);}bu=new a.Remarkable({html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:true,linkTarget:"",typographer:false,quotes:"'\ufffd\ufffd\ufffd\ufffd'"});bv=g.Create$1("");l.RunById("main",l.Element("div",[],[l.Element("h1",[],[l.TextNode("WebSharper.Remarkable extension sample page")]),l.Element("p",[],[l.TextNode("Type markdown text here:")]),l.InputArea([o.Create("class","input"),o.Create("rows","20")],bv),l.Element("hr",[],[]),l.Element("h4",[],[l.TextNode("Result")]),l.Element("div",[o.Create("class","output")],[l.BindView(function(bx){return l.Verbatim(bw(bx));},bv.get_View())])]));};g.Create$1=function(bu){return new m.New(false,n.New({$:2,$0:bu,$1:[]}),bu);};h.FailWith=function(bu){throw a.Error(bu);};h.KeyValue=function(bu){return[bu.K,bu.V];};i=b.Obj=bq.Class({Equals:function(bu){return this===bu;},GetHashCode:function(){return -1;}},null,i);k=j.attr=bq.Class({},i,k);g=f.Var=bq.Class({},i,g);g.New=bq.Ctor(function(){},g);l=f.Doc=bq.Class({},i,l);l.Element=function(bu,bv,bw){var bx,by;bx=o.Concat(bv);by=l.Concat(bw);return E.New(t.CreateElement(bu),bx,by);};l.InputArea=function(bu,bv){return l.InputInternal("textarea",function(){return u.append(bu,[v.Value(bv)]);});};l.Verbatim=function(bu){var bv;return l.Mk(C.MapTreeReduce(function(bw){return y.Equals(bw.nodeType,D.TEXT_NODE)?{$:5,$0:bw}:{$:1,$0:B.CreateElemNode(bw,w.EmptyAttr(),null)};},null,function(bw,bx){return{$:0,$0:bw,$1:bx};},(bv=br.parseHTML(bu),y.Equals(bv,null)?[]:bv)),x.Const());};l.RunById=function(bu,bv){var bw;bw=t.Doc().getElementById(bu);y.Equals(bw,null)?h.FailWith("invalid id: "+bu):l.Run(bw,bv);};l.Concat=function(bu){var bv;bv=C.ofSeqNonCopying(bu);return C.TreeReduce(l.Empty(),l.Append,bv);};l.TextNode=function(bu){return l.Mk({$:5,$0:t.CreateText(bu)},x.Const());};l.InputInternal=function(bu,bv){var bw;bw=t.CreateElement(bu);return E.New(bw,o.Concat(bv(bw)),l.Empty());};l.BindView=function(bu,bv){return l.EmbedView(x.Map(bu,bv));};l.Mk=function(bu,bv){return new l.New(bu,bv);};l.Run=function(bu,bv){var bw;l.LoadLocalTemplates$1();bw=bv.docNode;B.LinkElement(bu,bw);x.Sink(L.StartProcessor(B.PerformAnimatedUpdate(B.CreateRunState(bu,bw),bw)),bv.updates);};l.Empty=function(){return l.Mk(null,x.Const());};l.Append=function(bu,bv){return l.Mk({$:0,$0:bu.docNode,$1:bv.docNode},x.Map2Unit(bu.updates,bv.updates));};l.EmbedView=function(bu){var bv;bv=B.CreateEmbedNode();return l.Mk({$:2,$0:bv},x.Map(a.ignore,x.Bind(function(bw){B.UpdateEmbedNode(bv,bw.docNode);return bw.updates;},bu)));};l.LoadLocalTemplates$1=function(){if(!B.LocalTemplatesLoaded()){B.set_LocalTemplatesLoaded(true);l.LoadLocalTemplates("");}};l.LoadLocalTemplates=function(bu){var bv;bv=B.LoadedTemplateFile("");bv.count>0?B.LoadedTemplates().set_Item(bu,bv):(function(){var bw,bx,by,bz;while(true){bw=a.document.querySelector("[ws-template]");if(y.Equals(bw,null)){bx=a.document.querySelector("[ws-children-template]");if(y.Equals(bx,null))return null;else{by=bx.getAttribute("ws-children-template");bx.removeAttribute("ws-children-template");l.PrepareTemplate(bu,{$:1,$0:by},function(bA){return function(){return t.ChildrenArray(bA);};}(bx));}}else{bz=bw.getAttribute("ws-template");l.PrepareSingleTemplate(bu,{$:1,$0:bz},bw);}}}(),B.LoadedTemplates().set_Item("",B.LoadedTemplateFile(bu)));};l.PrepareTemplate=function(bu,bv,bw){var bx,by,bz,bA,bB;if(!B.LoadedTemplateFile(bu).ContainsKey(bv==null?"":bv.$0)){bx=bw();for(by=0,bz=bx.length-1;by<=bz;by++){bA=A.get(bx,by);bB=bA.parentNode;y.Equals(bB,null)?void 0:bB.removeChild(bA);}l.PrepareTemplateStrict(bu,bv,bx);}};l.PrepareSingleTemplate=function(bu,bv,bw){var bx,by,bz;bw.removeAttribute("ws-template");bx=bw.getAttribute("ws-replace");bx===null?void 0:(bw.removeAttribute("ws-replace"),by=bw.parentNode,y.Equals(by,null)?void 0:(bz=a.document.createElement(bw.tagName),bz.setAttribute("ws-replace",bx),by.replaceChild(bz,bw)));l.PrepareTemplateStrict(bu,bv,[bw]);};l.PrepareTemplateStrict=function(bu,bv,bw){var bx,by;function bz(bL){var bN,bO,bP,bQ,bR,bS,bT,bU;function bM(bV){var bW;bW=bL.getAttribute(bV);bW===null?void 0:bL.setAttribute(bV,bW.toLowerCase());}bN=bL.attributes;bO=[];bP=[];bQ=[];for(bR=0,bS=bN.length-1;bR<=bS;bR++){bT=bN.item(bR);bd.StartsWith(bT.nodeName,"ws-on")&&bT.nodeName!=="ws-onafterrender"&&bT.nodeName!=="ws-on"?(bO.push(bT.nodeName),bP.push(bc.string(bT.nodeName,{$:1,$0:"ws-on".length},null)+":"+bT.nodeValue.toLowerCase())):!bd.StartsWith(bT.nodeName,"ws-")&&(new a.RegExp(B.TextHoleRE())).test(bT.nodeValue)?(bT.nodeValue=(bU=new a.RegExp(B.TextHoleRE(),"g"),bT.nodeValue.replace(bU,function(bV,bW){return"${"+bW.toLowerCase()+"}";})),bQ.push(bT.nodeName)):void 0;}!(bP.length==0)?bL.setAttribute("ws-on",bd.concat(" ",bP)):void 0;!(bQ.length==0)?bL.setAttribute("ws-attr-holes",bd.concat(" ",bQ)):void 0;bM("ws-hole");bM("ws-replace");bM("ws-attr");bM("ws-onafterrender");bM("ws-var");A.iter(function(bV){bL.removeAttribute(bV);},bO);}function bA(bL){var bM,bN,bO,bP,bQ,bR;bM=null;bN=0;bP=bL.textContent;bQ=new a.RegExp(B.TextHoleRE(),"g");while(bM=bQ.exec(bP),bM!==null){bL.parentNode.insertBefore(a.document.createTextNode(bc.string(bP,{$:1,$0:bN},{$:1,$0:bQ.lastIndex-A.get(bM,0).length-1})),bL);bN=bQ.lastIndex;bR=a.document.createElement("span");bR.setAttribute("ws-replace",A.get(bM,1).toLowerCase());bL.parentNode.insertBefore(bR,bL);}bQ.lastIndex=0;bL.textContent=bc.string(bP,{$:1,$0:bN},null);}function bB(bL,bM){function bN(bO){t.IterSelector(bL,"["+bO+"]",function(bP){var bQ,bR;bQ=(bR=null,[bM.TryGetValue(bP.getAttribute(bO).toLowerCase(),{get:function(){return bR;},set:function(bS){bR=bS;}}),bR]);bQ[0]?bP.setAttribute(bO,bQ[1]):void 0;});}bN("ws-hole");bN("ws-replace");bN("ws-attr");bN("ws-onafterrender");bN("ws-var");t.IterSelector(bL,"[ws-on]",function(bO){bO.setAttribute("ws-on",bd.concat(" ",A.map(function(bP){var bQ,bR,bS;bQ=bd.SplitChars(bP,[":"],1);bR=(bS=null,[bM.TryGetValue(A.get(bQ,1),{get:function(){return bS;},set:function(bT){bS=bT;}}),bS]);return bR[0]?A.get(bQ,0)+":"+bR[1]:bP;},bd.SplitChars(bO.getAttribute("ws-on"),[" "],1))));});return t.IterSelector(bL,"[ws-attr-holes]",function(bO){var bP,bQ,bR;bP=bd.SplitChars(bO.getAttribute("ws-attr-holes"),[" "],1);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)(function(){var bS;function bT(bU,bV){var bW;bW=h.KeyValue(bV);return bU.replace(new a.RegExp("\\${"+bW[0]+"}","ig"),"${"+bW[1]+"}");}bS=A.get(bP,bQ);return bO.setAttribute(bS,(((bq.Curried3(u.fold))(bT))(bO.getAttribute(bS)))(bM));}());});}function bC(bL,bM){var bN,bO,bP,bQ,bR;bz(bM);bN=bM.nodeName.toLowerCase();bO=bL.querySelector("[ws-attr="+bN+"]");if(y.Equals(bO,null))return bs.warn("Filling non-existent attr hole",bN);else{bO.removeAttribute("ws-attr");for(bP=0,bQ=bM.attributes.length-1;bP<=bQ;bP++){bR=bM.attributes.item(bP);bR.name==="class"&&bO.hasAttribute("class")?bO.setAttribute("class",bO.getAttribute("class")+" "+bR.nodeValue):bO.setAttribute(bR.name,bR.nodeValue);}return;}}function bD(bL,bM){function bN(bO){t.IterSelector(bL,"["+bO+"]",function(bP){if(!bM.Contains(bP.getAttribute(bO)))bP.removeAttribute(bO);});}bN("ws-attr");bN("ws-onafterrender");bN("ws-var");t.IterSelector(bL,"[ws-hole]",function(bO){if(!bM.Contains(bO.getAttribute("ws-hole"))){bO.removeAttribute("ws-hole");while(bO.hasChildNodes())bO.removeChild(bO.lastChild);}});t.IterSelector(bL,"[ws-replace]",function(bO){if(!bM.Contains(bO.getAttribute("ws-replace")))bO.parentNode.removeChild(bO);});t.IterSelector(bL,"[ws-on]",function(bO){bO.setAttribute("ws-on",bd.concat(" ",A.filter(function(bP){return bM.Contains(A.get(bd.SplitChars(bP,[":"],1),1));},bd.SplitChars(bO.getAttribute("ws-on"),[" "],1))));});return t.IterSelector(bL,"[ws-attr-holes]",function(bO){var bP,bQ,bR,bS,bT;bP=bd.SplitChars(bO.getAttribute("ws-attr-holes"),[" "],1);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=A.get(bP,bQ);bO.setAttribute(bS,(bT=new a.RegExp(B.TextHoleRE(),"g"),bO.getAttribute(bS).replace(bT,function(bU,bV){return bM.Contains(bV)?bU:"";})));}});}function bE(bL,bM){var bN;bN=bL.querySelector("[ws-replace]");return y.Equals(bN,null)?(bs.warn("Filling non-existent text hole",bv),null):(bN.parentNode.replaceChild(new a.Text(bM),bN),{$:1,$0:bN.getAttribute("ws-replace")});}function bF(bL,bM,bN){while(true)if(bL.hasChildNodes())bN=bM.insertBefore(bL.lastChild,bN);else return null;}function bG(bL,bM,bN){var bO,bP,bQ,bR,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc;function bS(cd){}while(true)switch(bL){case 0:bT=bc.string(bM.nodeName,{$:1,$0:3},null).toLowerCase();bU=(bO=bT.indexOf("."),bO===-1?[bu,bT]:[bc.string(bT,null,{$:1,$0:bO-1}),bc.string(bT,{$:1,$0:bO+1},null)]);bV=bU[1];bW=bU[0];if(!B.LoadedTemplates().ContainsKey(bW))return bs.warn("Instantiating non-loaded template",bV);else{bX=B.LoadedTemplates().get_Item(bW);if(!bX.ContainsKey(bV))return bs.warn("Instantiating non-loaded template",bV);else{bY=bX.get_Item(bV);bZ=bY.cloneNode(true);b0=new _2.New$3();b1=new _1.New$5();b2=bM.attributes;for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2.item(b3).name.toLowerCase();b1.set_Item(b5,(b6=b2.item(b3).nodeValue,b6===""?b5:b6.toLowerCase()));!b0.Add(b5)?bs.warn("Hole mapped twice",b5):void 0;}for(b7=0,b8=bM.childNodes.length-1;b7<=b8;b7++){b9=bM.childNodes[b7];y.Equals(b9.nodeType,D.ELEMENT_NODE)?!b0.Add(b9.nodeName.toLowerCase())?bs.warn("Hole filled twice",bV):void 0:void 0;}b_=bM.childNodes.length===1&&y.Equals(bM.firstChild.nodeType,D.TEXT_NODE);if(b_){bQ=bE(bZ,bM.firstChild.textContent);((function(cd){return function(ce){if(ce!=null)cd(ce.$0);};}((bR=function(cd){return function(ce){return cd.Add(ce);};}(b0),function(cd){return bS(bR(cd));})))(bQ));}bD(bZ,b0);if(!b_){for(b$=0,ca=bM.childNodes.length-1;b$<=ca;b$++){cb=bM.childNodes[b$];y.Equals(cb.nodeType,D.ELEMENT_NODE)?cb.hasAttributes()?bC(bZ,cb):bH(bZ,cb):void 0;}}bB(bZ,b1);(((function(cd){function ce(cf,cg){return bF(cd,cf,cg);}return function(cf){return function(cg){return ce(cf,cg);};};}(bZ))(bM.parentNode))(bM));bM.parentNode.removeChild(bM);return;}}break;case 1:if(bN!==null){cc=bN.nextSibling;if(y.Equals(bN.nodeType,D.TEXT_NODE))bA(bN);else if(y.Equals(bN.nodeType,D.ELEMENT_NODE))bJ(bN);bN=cc;}else return null;break;}}function bH(bL,bM){var bN,bP,bQ;function bO(bR,bS){var bT,bU,bV;if(bP==="title"&&bM.hasChildNodes()){bT=br.parseHTML(bM.textContent);bM.removeChild(bM.firstChild);for(bU=0,bV=bT.length-1;bU<=bV;bU++)bM.appendChild(A.get(bT,bU));}else null;bJ(bM);return bF(bM,bR,bS);}bP=bM.nodeName.toLowerCase();t.IterSelector(bL,"[ws-attr-holes]",function(bR){var bS,bT,bU,bV,bW;bS=bd.SplitChars(bR.getAttribute("ws-attr-holes"),[" "],1);for(bT=0,bU=bS.length-1;bT<=bU;bT++){bV=A.get(bS,bT);bR.setAttribute(bV,(bW=new a.RegExp("\\${"+bP+"}","ig"),bR.getAttribute(bV).replace(bW,bM.textContent)));}});bQ=bL.querySelector("[ws-hole="+bP+"]");if(y.Equals(bQ,null)){bN=bL.querySelector("[ws-replace="+bP+"]");return y.Equals(bN,null)?null:(bO(bN.parentNode,bN),void bN.parentNode.removeChild(bN));}else{while(bQ.hasChildNodes())bQ.removeChild(bQ.lastChild);bQ.removeAttribute("ws-hole");return bO(bQ,null);}}function bI(bL){return bG(0,bL);}function bJ(bL){var bM,bN;if(bd.StartsWith(bL.nodeName.toLowerCase(),"ws-")&&!bL.hasAttribute("ws-template"))bI(bL);else{bz(bL);bM=bL.getAttribute("ws-template");if(bM===null){bN=bL.getAttribute("ws-children-template");if(bN===null)bK(bL,bL.firstChild);else{bL.removeAttribute("ws-children-template");l.PrepareTemplate(bu,{$:1,$0:bN},function(){return t.ChildrenArray(bL);});while(bL.hasChildNodes())bL.removeChild(bL.lastChild);}}else l.PrepareSingleTemplate(bu,{$:1,$0:bM},bL);}}function bK(bL,bM){return bG(1,bL,bM);}bx=l.FakeRoot(bw);by=(bv==null?"":bv.$0).toLowerCase();B.LoadedTemplateFile(bu).set_Item(by,bx);A.length(bw)>0?bK(bx,A.get(bw,0)):void 0;};l.FakeRoot=function(bu){var bv,bw,bx;bv=a.document.createElement("div");for(bw=0,bx=bu.length-1;bw<=bx;bw++)bv.appendChild(A.get(bu,bw));return bv;};l.New=bq.Ctor(function(bu,bv){this.docNode=bu;this.updates=bv;},l);m=f.ConcreteVar=bq.Class({get_View:function(){return this.view;},UpdateMaybe:function(bu){var bv;bv=bu(this.Get());bv!=null&&bv.$==1?this.Set(bv.$0):void 0;},Get:function(){return this.current;},Set:function(bu){if(this.isConst)(function(bv){return bv("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bv){bs.log(bv);}));else{n.Obsolete(this.snap);this.current=bu;this.snap=n.New({$:2,$0:bu,$1:[]});}}},g,m);m.New=bq.Ctor(function(bu,bv,bw){var bx;bx=this;g.New.call(this);this.isConst=bu;this.current=bw;this.snap=bv;this.view=function(){return bx.snap;};this.id=s.Int();},m);n.Map=function(bu,bv){var bw,bx;bw=bv.s;return bw!=null&&bw.$==0?n.New({$:0,$0:bu(bw.$0)}):(bx=n.New({$:3,$0:[],$1:[]}),(n.When(bv,function(by){n.MarkDone(bx,bv,bu(by));},bx),bx));};n.WhenRun=function(bu,bv,bw){var bx;bx=bu.s;bx==null?bw():bx!=null&&bx.$==2?(bx.$1.push(bw),bv(bx.$0)):bx!=null&&bx.$==3?(bx.$0.push(bv),bx.$1.push(bw)):bv(bx.$0);};n.Map2Unit=function(bu,bv){var bw,bx,by;function bz(){var bA,bB,bC;if(!(bA=by.s,bA!=null&&bA.$==0||bA!=null&&bA.$==2)){bB=n.ValueAndForever(bu);bC=n.ValueAndForever(bv);bB!=null&&bB.$==1?bC!=null&&bC.$==1?bB.$0[1]&&bC.$0[1]?n.MarkForever(by,null):n.MarkReady(by,null):void 0:void 0;}}bw=bu.s;bx=bv.s;return bw!=null&&bw.$==0?bx!=null&&bx.$==0?n.New({$:0,$0:null}):bv:bx!=null&&bx.$==0?bu:(by=n.New({$:3,$0:[],$1:[]}),(n.When(bu,bz,by),n.When(bv,bz,by),by));};n.Copy=function(bu){var bv,bw,bx;bv=bu.s;return bv==null?bu:bv!=null&&bv.$==2?(bw=n.New({$:2,$0:bv.$0,$1:[]}),(n.WhenObsolete(bu,bw),bw)):bv!=null&&bv.$==3?(bx=n.New({$:3,$0:[],$1:[]}),(n.When(bu,function(by){n.MarkDone(bx,bu,by);},bx),bx)):bu;};n.WhenObsoleteRun=function(bu,bv){var bw;bw=bu.s;bw==null?bv():bw!=null&&bw.$==2?bw.$1.push(bv):bw!=null&&bw.$==3?bw.$1.push(bv):void 0;};n.When=function(bu,bv,bw){var bx;bx=bu.s;bx==null?n.Obsolete(bw):bx!=null&&bx.$==2?(n.EnqueueSafe(bx.$1,bw),bv(bx.$0)):bx!=null&&bx.$==3?(bx.$0.push(bv),n.EnqueueSafe(bx.$1,bw)):bv(bx.$0);};n.MarkDone=function(bu,bv,bw){var bx;if(bx=bv.s,bx!=null&&bx.$==0)n.MarkForever(bu,bw);else n.MarkReady(bu,bw);};n.ValueAndForever=function(bu){var bv;bv=bu.s;return bv!=null&&bv.$==0?{$:1,$0:[bv.$0,true]}:bv!=null&&bv.$==2?{$:1,$0:[bv.$0,false]}:null;};n.MarkForever=function(bu,bv){var bw,bx,by,bz;bw=bu.s;if(bw!=null&&bw.$==3){bu.s={$:0,$0:bv};bx=bw.$0;for(by=0,bz=A.length(bx)-1;by<=bz;by++)(A.get(bx,by))(bv);}else void 0;};n.MarkReady=function(bu,bv){var bw,bx,by,bz;bw=bu.s;if(bw!=null&&bw.$==3){bu.s={$:2,$0:bv,$1:bw.$1};bx=bw.$0;for(by=0,bz=A.length(bx)-1;by<=bz;by++)(A.get(bx,by))(bv);}else void 0;};n.WhenObsolete=function(bu,bv){var bw;bw=bu.s;bw==null?n.Obsolete(bv):bw!=null&&bw.$==2?n.EnqueueSafe(bw.$1,bv):bw!=null&&bw.$==3?n.EnqueueSafe(bw.$1,bv):void 0;};n.Join=function(bu){var bv;bv=n.New({$:3,$0:[],$1:[]});n.When(bu,function(bw){var bx;bx=bw();n.When(bx,function(by){var bz,bA;if((bz=bx.s,bz!=null&&bz.$==0)&&(bA=bu.s,bA!=null&&bA.$==0))n.MarkForever(bv,by);else n.MarkReady(bv,by);},bv);},bv);return bv;};n.EnqueueSafe=function(bu,bv){var bw,bx,by,bz;bu.push(bv);if(bu.length%20===0){bw=bu.slice(0);bh.Clear(bu);for(bx=0,by=A.length(bw)-1;bx<=by;bx++){bz=A.get(bw,bx);typeof bz=="object"?function(bA){if(bA.s)bu.push(bA);}(bz):function(bA){bu.push(bA);}(bz);}}else void 0;};o=f.AttrProxy=bq.Class({},null,o);o.Create=function(bu,bv){return w.Static(function(bw){t.SetAttr(bw,bu,bv);});};o.Concat=function(bu){var bv;bv=C.ofSeqNonCopying(bu);return C.TreeReduce(w.EmptyAttr(),o.Append,bv);};o.Append=function(bu,bv){return w.AppendTree(bu,bv);};q.NewFromSeq=function(bu){var bv,bw,bx;bv={};bw=F.Get(bu);try{while(bw.MoveNext()){bx=bw.Current();bv[bx[0]]=bx[1];}}finally{if("Dispose"in bw)bw.Dispose();}return bv;};s.Int=function(){s.set_counter(s.counter()+1);return s.counter();};s.set_counter=function(bu){M.$cctor();M.counter=bu;};s.counter=function(){M.$cctor();return M.counter;};t.CreateElement=function(bu){return t.Doc().createElement(bu);};t.SetAttr=function(bu,bv,bw){bu.setAttribute(bv,bw);};t.Doc=function(){K.$cctor();return K.Doc;};t.CreateText=function(bu){return t.Doc().createTextNode(bu);};t.ChildrenArray=function(bu){var bv,bw,bx;bv=[];for(bw=0,bx=bu.childNodes.length-1;bw<=bx;bw++)bv.push(bu.childNodes[bw]);return bv;};t.InsertAt=function(bu,bv,bw){var bx;if(!(bw.parentNode===bu&&bv===(bx=bw.nextSibling,y.Equals(bx,null)?null:bx)))bu.insertBefore(bw,bv);};t.IterSelector=function(bu,bv,bw){var bx,by,bz;bx=bu.querySelectorAll(bv);for(by=0,bz=bx.length-1;by<=bz;by++)bw(bx[by]);};t.RemoveNode=function(bu,bv){if(bv.parentNode===bu)bu.removeChild(bv);};u.append=function(bu,bv){return{GetEnumerator:function(){var bw,bx;bw=F.Get(bu);bx=[true];return new G.New(bw,null,function(by){var bz;return by.s.MoveNext()?(by.c=by.s.Current(),true):(bz=by.s,!y.Equals(bz,null)?bz.Dispose():void 0,by.s=null,bx[0]&&(bx[0]=false,by.s=F.Get(bv),by.s.MoveNext()?(by.c=by.s.Current(),true):(by.s.Dispose(),by.s=null,false)));},function(by){var bz;bz=by.s;!y.Equals(bz,null)?bz.Dispose():void 0;});}};};u.iter=function(bu,bv){var bw;bw=F.Get(bv);try{while(bw.MoveNext())bu(bw.Current());}finally{if("Dispose"in bw)bw.Dispose();}};u.map=function(bu,bv){return{GetEnumerator:function(){var bw;bw=F.Get(bv);return new G.New(null,null,function(bx){return bw.MoveNext()&&(bx.c=bu(bw.Current()),true);},function(){bw.Dispose();});}};};u.fold=function(bu,bv,bw){var bx,by;bx=bv;by=F.Get(bw);try{while(by.MoveNext())bx=bu(bx,by.Current());return bx;}finally{if("Dispose"in by)by.Dispose();}};u.max=function(bu){var bv,bw,bx;bv=F.Get(bu);try{if(!bv.MoveNext())u.seqEmpty();bw=bv.Current();while(bv.MoveNext()){bx=bv.Current();y.Compare(bx,bw)===1?bw=bx:void 0;}return bw;}finally{if("Dispose"in bv)bv.Dispose();}};u.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};v.Value=function(bu){function bv(bw){return{$:1,$0:bw};}return v.CustomValue(bu,a.id,function(bw){return bv(a.id(bw));});};v.CustomValue=function(bu,bv,bw){return v.CustomVar(bu,function(bx,by){bx.value=bv(by);},function(bx){return bw(bx.value);});};v.CustomVar=function(bu,bv,bw){function bx(bz,bA){return bu.UpdateMaybe(function(bB){var bC,bD;bC=bw(bz);return bC!=null&&bC.$==1&&(!y.Equals(bC.$0,bB)&&(bD=[bC,bC.$0],true))?bD[0]:null;});}function by(bz,bA){var bB,bC;bB=bw(bz);return bB!=null&&bB.$==1&&(y.Equals(bB.$0,bA)&&(bC=bB.$0,true))?null:bv(bz,bA);}return o.Concat([v.Handler("change",function(bz){return function(bA){return bx(bz,bA);};}),v.Handler("input",function(bz){return function(bA){return bx(bz,bA);};}),v.Handler("keypress",function(bz){return function(bA){return bx(bz,bA);};}),v.DynamicCustom(function(bz){return function(bA){return by(bz,bA);};},bu.get_View())]);};v.Handler=function(bu,bv){return w.Static(function(bw){bw.addEventListener(bu,function(bx){return(bv(bw))(bx);},false);});};v.DynamicCustom=function(bu,bv){return w.Dynamic(bv,bu);};w.Static=function(bu){return new o({$:3,$0:bu});};w.Insert=function(bu,bv){var bw,bx,by;function bz(bA){if(!(bA===null))if(bA!=null&&bA.$==1)bw.push(bA.$0);else if(bA!=null&&bA.$==2){bz(bA.$0);bz(bA.$1);}else if(bA!=null&&bA.$==3)bA.$0(bu);else if(bA!=null&&bA.$==4)bx.push(bA.$0);}bw=[];bx=[];bz(bv);by=bw.slice(0);return T.New(bu,w.Flags(bv),by,bx.length===0?null:{$:1,$0:function(bA){u.iter(function(bB){bB(bA);},bx);}});};w.EmptyAttr=function(){U.$cctor();return U.EmptyAttr;};w.AppendTree=function(bu,bv){var bw;return bu===null?bv:bv===null?bu:(bw=new o({$:2,$0:bu,$1:bv}),(w.SetFlags(bw,w.Flags(bu)|w.Flags(bv)),bw));};w.Updates=function(bu){return C.MapTreeReduce(function(bv){return bv.NChanged();},x.Const(),x.Map2Unit,bu.DynNodes);};w.Flags=function(bu){return bu!==null&&bu.hasOwnProperty("flags")?bu.flags:0;};w.SetFlags=function(bu,bv){bu.flags=bv;};w.HasChangeAnim=function(bu){var bv;bv=4;return(bu.DynFlags&bv)===bv;};w.GetChangeAnim=function(bu){return w.GetAnim(bu,function(bv,bw){return bv.NGetChangeAnim(bw);});};w.HasEnterAnim=function(bu){var bv;bv=1;return(bu.DynFlags&bv)===bv;};w.GetEnterAnim=function(bu){return w.GetAnim(bu,function(bv,bw){return bv.NGetEnterAnim(bw);});};w.HasExitAnim=function(bu){var bv;bv=2;return(bu.DynFlags&bv)===bv;};w.GetExitAnim=function(bu){return w.GetAnim(bu,function(bv,bw){return bv.NGetExitAnim(bw);});};w.Dynamic=function(bu,bv){return new o({$:1,$0:new bb.New(bu,bv)});};w.GetAnim=function(bu,bv){return Y.Concat(A.map(function(bw){return bv(bw,bu.DynElem);},bu.DynNodes));};w.Sync=function(bu,bv){A.iter(function(bw){bw.NSync(bu);},bv.DynNodes);};x=f.View=bq.Class({},null,x);y.Equals=function(bu,bv){var bw,bx,by,bz;if(bu===bv)return true;else{bw=typeof bu;if(bw=="object"){if(bu===null||bu===void 0||bv===null||bv===void 0)return false;else if("Equals"in bu)return bu.Equals(bv);else if(bu instanceof a.Array&&bv instanceof a.Array)return y.arrayEquals(bu,bv);else if(bu instanceof a.Date&&bv instanceof a.Date)return y.dateEquals(bu,bv);else{bx=[true];for(var bA in bu)if(function(bB){bx[0]=!bu.hasOwnProperty(bB)||bv.hasOwnProperty(bB)&&y.Equals(bu[bB],bv[bB]);return!bx[0];}(bA))break;if(bx[0]){for(var bB in bv)if(function(bC){bx[0]=!bv.hasOwnProperty(bC)||bu.hasOwnProperty(bC);return!bx[0];}(bB))break;}return bx[0];}}else return bw=="function"&&("$Func"in bu?bu.$Func===bv.$Func&&bu.$Target===bv.$Target:"$Invokes"in bu&&"$Invokes"in bv&&y.arrayEquals(bu.$Invokes,bv.$Invokes));}};y.arrayEquals=function(bu,bv){var bw,bx;if(A.length(bu)===A.length(bv)){bw=true;bx=0;while(bw&&bx<A.length(bu)){!y.Equals(A.get(bu,bx),A.get(bv,bx))?bw=false:void 0;bx=bx+1;}return bw;}else return false;};y.dateEquals=function(bu,bv){return bu.getTime()===bv.getTime();};y.Hash=function(bu){var bv;bv=typeof bu;return bv=="function"?0:bv=="boolean"?bu?1:0:bv=="number"?bu:bv=="string"?y.hashString(bu):bv=="object"?bu==null?0:bu instanceof a.Array?y.hashArray(bu):y.hashObject(bu):0;};y.hashString=function(bu){var bv,bw,bx;if(bu===null)return 0;else{bv=5381;for(bw=0,bx=bu.length-1;bw<=bx;bw++)bv=y.hashMix(bv,bu[bw].charCodeAt());return bv;}};y.hashArray=function(bu){var bv,bw,bx;bv=-34948909;for(bw=0,bx=A.length(bu)-1;bw<=bx;bw++)bv=y.hashMix(bv,y.Hash(A.get(bu,bw)));return bv;};y.hashObject=function(bu){var bv,bw;if("GetHashCode"in bu)return bu.GetHashCode();else{bv=[0];for(var bx in bu)if(function(by){bv[0]=y.hashMix(y.hashMix(bv[0],y.hashString(by)),y.Hash(bu[by]));return false;}(bx))break;return bv[0];}};y.Compare=function(bu,bv){var bw,bx,by,bz,bA,bB;if(bu===bv)return 0;else{bx=typeof bu;switch(bx=="function"?1:bx=="boolean"?2:bx=="number"?2:bx=="string"?2:bx=="object"?3:0){case 0:return typeof bv=="undefined"?0:-1;break;case 1:return h.FailWith("Cannot compare function values.");break;case 2:return bu<bv?-1:1;break;case 3:if(bu===null)by=-1;else if(bv===null)by=1;else if("CompareTo"in bu)by=bu.CompareTo(bv);else if("CompareTo0"in bu)by=bu.CompareTo0(bv);else if(bu instanceof a.Array&&bv instanceof a.Array)by=y.compareArrays(bu,bv);else if(bu instanceof a.Date&&bv instanceof a.Date)by=y.compareDates(bu,bv);else{bz=[0];for(var bC in bu)if(function(bD){return!bu.hasOwnProperty(bD)?false:!bv.hasOwnProperty(bD)?(bz[0]=1,true):(bz[0]=y.Compare(bu[bD],bv[bD]),bz[0]!==0);}(bC))break;if(bz[0]===0){for(var bD in bv)if(function(bE){return!bv.hasOwnProperty(bE)?false:!bu.hasOwnProperty(bE)&&(bz[0]=-1,true);}(bD))break;}by=bz[0];}return by;break;}}};y.hashMix=function(bu,bv){return(bu<<5)+bu+bv;};y.compareArrays=function(bu,bv){var bw,bx;if(A.length(bu)<A.length(bv))return -1;else if(A.length(bu)>A.length(bv))return 1;else{bw=0;bx=0;while(bw===0&&bx<A.length(bu)){bw=y.Compare(A.get(bu,bx),A.get(bv,bx));bx=bx+1;}return bw;}};y.compareDates=function(bu,bv){return y.Compare(bu.getTime(),bv.getTime());};A.get=function(bu,bv){A.checkBounds(bu,bv);return bu[bv];};A.length=function(bu){return bu.dims===2?bu.length*bu.length:bu.length;};A.checkBounds=function(bu,bv){if(bv<0||bv>=bu.length)h.FailWith("Index was outside the bounds of the array.");};A.set=function(bu,bv,bw){A.checkBounds(bu,bv);bu[bv]=bw;};B.CreateElemNode=function(bu,bv,bw){var bx;B.LinkElement(bu,bw);bx=w.Insert(bu,bv);return H.New(bx,bw,null,bu,s.Int(),bq.GetOptional(bx.OnAfterRender));};B.LinkElement=function(bu,bv){B.InsertDoc(bu,bv,null);};B.CreateRunState=function(bu,bv){return W.New(X.get_Empty(),B.CreateElemNode(bu,w.EmptyAttr(),bv));};B.PerformAnimatedUpdate=function(bu,bv){var bw;return Y.get_UseAnimations()?(bw=null,_3.Delay(function(){var bx,by,bz;bx=X.FindAll(bv);by=B.ComputeChangeAnim(bu,bx);bz=B.ComputeEnterAnim(bu,bx);return _3.Bind(Y.Play(Y.Append(by,B.ComputeExitAnim(bu,bx))),function(){return _3.Bind(B.SyncElemNodesNextFrame(bu),function(){return _3.Bind(Y.Play(bz),function(){bu.PreviousNodes=bx;return _3.Return(null);});});});})):B.SyncElemNodesNextFrame(bu);};B.CreateEmbedNode=function(){return{Current:null,Dirty:false};};B.UpdateEmbedNode=function(bu,bv){bu.Current=bv;bu.Dirty=true;};B.InsertDoc=function(bu,bv,bw){var bx;return bv!=null&&bv.$==1?B.InsertNode(bu,bv.$0.El,bw):bv!=null&&bv.$==2?(bx=bv.$0,(bx.Dirty=false,B.InsertDoc(bu,bx.Current,bw))):bv==null?bw:bv!=null&&bv.$==4?B.InsertNode(bu,bv.$0.Text,bw):bv!=null&&bv.$==5?B.InsertNode(bu,bv.$0,bw):bv!=null&&bv.$==6?A.foldBack(function(by,bz){return by.constructor===P?B.InsertDoc(bu,by,bz):B.InsertNode(bu,by,bz);},bv.$0.Els,bw):B.InsertDoc(bu,bv.$0,B.InsertDoc(bu,bv.$1,bw));};B.LocalTemplatesLoaded=function(){Z.$cctor();return Z.LocalTemplatesLoaded;};B.set_LocalTemplatesLoaded=function(bu){Z.$cctor();Z.LocalTemplatesLoaded=bu;};B.ComputeChangeAnim=function(bu,bv){var bw;function bx(by){return w.HasChangeAnim(by.Attr);}bw=function(by){return X.Filter(bx,by);};return Y.Concat(A.map(function(by){return w.GetChangeAnim(by.Attr);},X.ToArray(X.Intersect(bw(bu.PreviousNodes),bw(bv)))));};B.ComputeEnterAnim=function(bu,bv){return Y.Concat(A.map(function(bw){return w.GetEnterAnim(bw.Attr);},X.ToArray(X.Except(bu.PreviousNodes,X.Filter(function(bw){return w.HasEnterAnim(bw.Attr);},bv)))));};B.ComputeExitAnim=function(bu,bv){return Y.Concat(A.map(function(bw){return w.GetExitAnim(bw.Attr);},X.ToArray(X.Except(bv,X.Filter(function(bw){return w.HasExitAnim(bw.Attr);},bu.PreviousNodes)))));};B.SyncElemNodesNextFrame=function(bu){function bv(bw){a.requestAnimationFrame(function(){B.SyncElemNode(bu.Top);bw();});}return _6.BatchUpdatesEnabled()?_3.FromContinuations(function(bw,bx,by){return bv.apply(null,[bw,bx,by]);}):(B.SyncElemNode(bu.Top),_3.Return(null));};B.InsertNode=function(bu,bv,bw){t.InsertAt(bu,bw,bv);return bv;};B.LoadedTemplateFile=function(bu){var bv,bw,bx;bv=(bw=null,[B.LoadedTemplates().TryGetValue(bu,{get:function(){return bw;},set:function(by){bw=by;}}),bw]);return bv[0]?bv[1]:(bx=new _1.New$5(),(B.LoadedTemplates().set_Item(bu,bx),bx));};B.LoadedTemplates=function(){Z.$cctor();return Z.LoadedTemplates;};B.SyncElemNode=function(bu){B.SyncElement(bu);B.Sync(bu.Children);B.AfterRender(bu);};B.SyncElement=function(bu){function bv(bw){function bx(by){var bz,bA;return by!=null&&by.$==0?bx(by.$0)||bx(by.$1):by!=null&&by.$==2?(bz=by.$0,bz.Dirty||bx(bz.Current)):by!=null&&by.$==6&&(bA=by.$0,bA.Dirty||A.exists(bv,bA.Holes));}return bx(bw.Children);}w.Sync(bu.El,bu.Attr);bv(bu)?B.DoSyncElement(bu):void 0;};B.Sync=function(bu){var bv,bw;if(bu!=null&&bu.$==1)B.SyncElemNode(bu.$0);else if(bu!=null&&bu.$==2)B.Sync(bu.$0.Current);else if(bu==null);else if(bu!=null&&bu.$==5);else if(bu!=null&&bu.$==4){bv=bu.$0;bv.Dirty?(bv.Text.nodeValue=bv.Value,bv.Dirty=false):void 0;}else if(bu!=null&&bu.$==6){bw=bu.$0;A.iter(function(bx){B.SyncElemNode(bx);},bw.Holes);A.iter(function(bx){w.Sync(bx[0],bx[1]);},bw.Attrs);B.AfterRender(bw);}else{B.Sync(bu.$0);B.Sync(bu.$1);}};B.AfterRender=function(bu){var bv;bv=bq.GetOptional(bu.Render);bv!=null&&bv.$==1?(bv.$0(bu.El),bq.SetOptional(bu,"Render",null)):void 0;};B.TextHoleRE=function(){Z.$cctor();return Z.TextHoleRE;};B.DoSyncElement=function(bu){var bv,bw,bx;function by(bz,bA){var bB,bC;return bz!=null&&bz.$==1?bz.$0.El:bz!=null&&bz.$==2?(bB=bz.$0,bB.Dirty?(bB.Dirty=false,B.InsertDoc(bv,bB.Current,bA)):by(bB.Current,bA)):bz==null?bA:bz!=null&&bz.$==4?bz.$0.Text:bz!=null&&bz.$==5?bz.$0:bz!=null&&bz.$==6?(bC=bz.$0,(bC.Dirty?bC.Dirty=false:void 0,A.foldBack(function(bD,bE){return bD.constructor===P?by(bD,bE):bD;},bC.Els,bA))):by(bz.$0,by(bz.$1,bA));}bv=bu.El;bm.Iter((bw=bu.El,function(bz){t.RemoveNode(bw,bz);}),bm.Except(bm.DocChildren(bu),bm.Children(bu.El,bq.GetOptional(bu.Delimiters))));by(bu.Children,(bx=bq.GetOptional(bu.Delimiters),bx!=null&&bx.$==1?bx.$0[1]:null));};C.MapTreeReduce=function(bu,bv,bw,bx){var by;function bz(bA,bB){var bC,bD;return bB<=0?bv:bB===1&&(bA>=0&&bA<by)?bu(A.get(bx,bA)):(bD=bB/2>>0,bw(bz(bA,bD),bz(bA+bD,bB-bD)));}by=A.length(bx);return bz(0,by);};C.ofSeqNonCopying=function(bu){var bv,bw;if(bu instanceof a.Array)return bu;else if(bu instanceof O)return A.ofList(bu);else if(bu===null)return[];else{bv=[];bw=F.Get(bu);try{while(bw.MoveNext())bv.push(bw.Current());return bv;}finally{if("Dispose"in bw)bw.Dispose();}}};C.TreeReduce=function(bu,bv,bw){var bx;function by(bz,bA){var bB,bC;return bA<=0?bu:bA===1&&(bz>=0&&bz<bx)?A.get(bw,bz):(bC=bA/2>>0,bv(by(bz,bC),by(bz+bC,bA-bC)));}bx=A.length(bw);return by(0,bx);};x.Const=function(bu){var bv;bv=n.New({$:0,$0:bu});return function(){return bv;};};x.Map=function(bu,bv){return x.CreateLazy(function(){return n.Map(bu,bv());});};x.Sink=function(bu,bv){function bw(){n.WhenRun(bv(),bu,function(){_3.scheduler().Fork(bw);});}_3.scheduler().Fork(bw);};x.Map2Unit=function(bu,bv){return x.CreateLazy(function(){return n.Map2Unit(bu(),bv());});};x.Bind=function(bu,bv){return x.Join(x.Map(bu,bv));};x.CreateLazy=function(bu){var bv;bv={c:null,o:bu};return function(){var bw,bx;bw=bv.c;return bw===null?(bw=bv.o(),bv.c=bw,(bx=bw.s,bx!=null&&bx.$==0)?bv.o=null:n.WhenObsoleteRun(bw,function(){bv.c=null;}),bw):bw;};};x.Join=function(bu){return x.CreateLazy(function(){return n.Join(bu());});};n.Obsolete=function(bu){var bv,bw,bx,by,bz;bw=bu.s;if(bw==null||(bw!=null&&bw.$==2?(bv=bw.$1,false):bw!=null&&bw.$==3?(bv=bw.$1,false):true))void 0;else{bu.s=null;for(bx=0,by=A.length(bv)-1;bx<=by;bx++){bz=A.get(bv,bx);typeof bz=="object"?function(bA){n.Obsolete(bA);}(bz):bz();}}};n.New=function(bu){return{s:bu};};E=f.Elt=bq.Class({},l,E);E.New=function(bu,bv,bw){var bx,by;bx=B.CreateElemNode(bu,bv,bw.docNode);by=Q.Create(bw.updates);return new E.New$1({$:1,$0:bx},x.Map2Unit(w.Updates(bx.Attr),by.v),bu,by);};E.New$1=bq.Ctor(function(bu,bv,bw,bx){l.New.call(this,bu,bv);this.docNode$1=bu;this.updates$1=bv;this.elt=bw;this.rvUpdates=bx;},E);F.Get=function(bu){return bu instanceof a.Array?F.ArrayEnumerator(bu):y.Equals(typeof bu,"string")?F.StringEnumerator(bu):bu.GetEnumerator();};F.ArrayEnumerator=function(bu){return new G.New(0,null,function(bv){var bw;bw=bv.s;return bw<A.length(bu)&&(bv.c=A.get(bu,bw),bv.s=bw+1,true);},void 0);};F.StringEnumerator=function(bu){return new G.New(0,null,function(bv){var bw;bw=bv.s;return bw<bu.length&&(bv.c=bu[bw],bv.s=bw+1,true);},void 0);};F.Get0=function(bu){return bu instanceof a.Array?F.ArrayEnumerator(bu):y.Equals(typeof bu,"string")?F.StringEnumerator(bu):"GetEnumerator0"in bu?bu.GetEnumerator0():bu.GetEnumerator();};G=F.T=bq.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},i,G);G.New=bq.Ctor(function(bu,bv,bw,bx){this.s=bu;this.c=bv;this.n=bw;this.d=bx;},G);H=f.DocElemNode=bq.Class({Equals:function(bu){return this.ElKey===bu.ElKey;},GetHashCode:function(){return this.ElKey;}},null,H);H.New=function(bu,bv,bw,bx,by,bz){var bA;return new H((bA={Attr:bu,Children:bv,El:bx,ElKey:by},(bq.SetOptional(bA,"Delimiters",bw),bq.SetOptional(bA,"Render",bz),bA)));};J.GetFieldValues=function(bu){var bv,bw;bv=[];for(var bx in bu)bv.push(bu[bx]);return bv;};K.$cctor=function(){K.$cctor=a.ignore;K.Doc=a.document;};L.StartProcessor=function(bu){var bv;function bw(){var bx;bx=null;return _3.Delay(function(){return _3.Bind(bu,function(){var by;by=bv[0];return by===1?(bv[0]=0,_3.Zero()):by===2?(bv[0]=1,bw()):_3.Zero();});});}bv=[0];return function(){var bx;bx=bv[0];bx===0?(bv[0]=1,_3.Start(bw(),null)):bx===1?bv[0]=2:void 0;};};M.$cctor=function(){M.$cctor=a.ignore;M.counter=0;};O=N.T=bq.Class({GetEnumerator:function(){return new G.New(this,null,function(bu){var bv;bv=bu.s;return bv.$==0?false:(bu.c=bv.$0,bu.s=bv.$1,true);},void 0);},GetEnumerator0:function(){return F.Get(this);}},null,O);A.ofList=function(bu){var bv,bw;bw=[];bv=bu;while(!(bv.$==0)){bw.push(N.head(bv));bv=N.tail(bv);}return bw;};A.foldBack=function(bu,bv,bw){var bx,by,bz,bA,bB;bx=bw;bz=bv.length;for(bA=1,bB=bz;bA<=bB;bA++)bx=bu(bv[bz-bA],bx);return bx;};A.iter=function(bu,bv){var bw,bx;for(bw=0,bx=bv.length-1;bw<=bx;bw++)bu(bv[bw]);};A.map=function(bu,bv){var bw,bx,by;bw=new a.Array(bv.length);for(bx=0,by=bv.length-1;bx<=by;bx++)bw[bx]=bu(bv[bx]);return bw;};A.choose=function(bu,bv){var bw,bx,by,bz;bw=[];for(bx=0,by=bv.length-1;bx<=by;bx++){bz=bu(bv[bx]);bz==null?void 0:bw.push(bz.$0);}return bw;};A.tryPick=function(bu,bv){var bw,bx,by;bw=null;bx=0;while(bx<bv.length&&bw==null){by=bu(bv[bx]);by!=null&&by.$==1?bw=by:void 0;bx=bx+1;}return bw;};A.tryFindIndex=function(bu,bv){var bw,bx;bw=null;bx=0;while(bx<bv.length&&bw==null){bu(bv[bx])?bw={$:1,$0:bx}:void 0;bx=bx+1;}return bw;};A.exists=function(bu,bv){var bw,bx,by,bz;bw=false;bx=0;bz=A.length(bv);while(!bw&&bx<bz)if(bu(bv[bx]))bw=true;else bx=bx+1;return bw;};A.filter=function(bu,bv){var bw,bx,by;bw=[];for(bx=0,by=bv.length-1;bx<=by;bx++)if(bu(bv[bx]))bw.push(bv[bx]);return bw;};A.create=function(bu,bv){var bw,bx,by;bw=new a.Array(bu);for(bx=0,by=bu-1;bx<=by;bx++)bw[bx]=bv;return bw;};A.concat=function(bu){return a.Array.prototype.concat.apply([],A.ofSeq(bu));};A.ofSeq=function(bu){var bv,bw;if(bu instanceof a.Array)return bu.slice();else if(bu instanceof O)return A.ofList(bu);else{bv=[];bw=F.Get(bu);try{while(bw.MoveNext())bv.push(bw.Current());return bv;}finally{if("Dispose"in bw)bw.Dispose();}}};A.pick=function(bu,bv){var bw;bw=A.tryPick(bu,bv);return bw==null?h.FailWith("KeyNotFoundException"):bw.$0;};A.init=function(bu,bv){var bw,bx,by;bu<0?h.FailWith("Negative size given."):null;bw=new a.Array(bu);for(bx=0,by=bu-1;bx<=by;bx++)bw[bx]=bv(bx);return bw;};A.forall=function(bu,bv){var bw,bx,by,bz;bw=true;bx=0;bz=A.length(bv);while(bw&&bx<bz)if(bu(bv[bx]))bx=bx+1;else bw=false;return bw;};Q=f.Updates=bq.Class({},null,Q);Q.Create=function(bu){var bv;bv=null;bv=Q.New(bu,null,function(){var bw;bw=bv.s;return bw===null?(bw=n.Copy(bv.c()),bv.s=bw,n.WhenObsoleteRun(bw,function(){bv.s=null;}),bw):bw;});return bv;};Q.New=function(bu,bv,bw){return new Q({c:bu,s:bv,v:bw});};T.New=function(bu,bv,bw,bx){var by;by={DynElem:bu,DynFlags:bv,DynNodes:bw};bq.SetOptional(by,"OnAfterRender",bx);return by;};U.$cctor=function(){U.$cctor=a.ignore;U.EmptyAttr=null;};W.New=function(bu,bv){return{PreviousNodes:bu,Top:bv};};X.get_Empty=function(){return{$:0,$0:new _2.New$3()};};X.FindAll=function(bu){var bv;function bw(by){if(by!=null&&by.$==0){bw(by.$0);bw(by.$1);}else if(by!=null&&by.$==1)bx(by.$0);else if(by!=null&&by.$==2)bw(by.$0.Current);else if(by!=null&&by.$==6)A.iter(bx,by.$0.Holes);}function bx(by){bv.push(by);bw(by.Children);}bv=[];bw(bu);return{$:0,$0:new _2.New$2(bv)};};X.Filter=function(bu,bv){return{$:0,$0:ba.Filter(bu,bv.$0)};};X.Intersect=function(bu,bv){return{$:0,$0:ba.Intersect(bu.$0,bv.$0)};};X.ToArray=function(bu){return ba.ToArray(bu.$0);};X.Except=function(bu,bv){return{$:0,$0:ba.Except(bu.$0,bv.$0)};};Y.get_UseAnimations=function(){return _4.UseAnimations();};Y.Play=function(bu){var bv;bv=null;return _3.Delay(function(){return _3.Bind(Y.Run(a.ignore,_4.Actions(bu)),function(){_4.Finalize(bu);return _3.Return(null);});});};Y.Append=function(bu,bv){return{$:0,$0:_5.Append(bu.$0,bv.$0)};};Y.Concat=function(bu){return{$:0,$0:_5.Concat(u.map(_4.List,bu))};};Y.Run=function(bu,bv){var bw;function bx(by){function bz(bA,bB){var bC;bC=bB-bA;bv.Compute(bC);bu();return bC<=bw?void a.requestAnimationFrame(function(bD){bz(bA,bD);}):by();}a.requestAnimationFrame(function(bA){bz(bA,bA);});}bw=bv.Duration;return bw===0?_3.Zero():_3.FromContinuations(function(by,bz,bA){return bx.apply(null,[by,bz,bA]);});};Y.get_Empty=function(){return{$:0,$0:_5.Empty()};};N.head=function(bu){return bu.$==1?bu.$0:N.listEmpty();};N.tail=function(bu){return bu.$==1?bu.$1:N.listEmpty();};N.listEmpty=function(){return h.FailWith("The input list was empty.");};Z.$cctor=function(){Z.$cctor=a.ignore;Z.BatchUpdatesEnabled=true;Z.LoadedTemplates=new _1.New$5();Z.LocalTemplatesLoaded=false;Z.TextHoleRE="\\${([^}]+)}";};_1=_0.Dictionary=bq.Class({set_Item:function(bu,bv){this.set(bu,bv);},TryGetValue:function(bu,bv){var bw,bx,by;bw=this;bx=this.data[this.hash(bu)];return bx&&(by=A.tryPick(function(bz){var bA;bA=h.KeyValue(bz);return bw.equals.apply(null,[bA[0],bu])?{$:1,$0:bA[1]}:null;},bx),by!=null&&by.$==1&&(bv.set(by.$0),true));},set:function(bu,bv){var bw,bx,by,bz;bw=this;bx=this.hash(bu);by=this.data[bx];by?(bz=A.tryFindIndex(function(bA){return bw.equals.apply(null,[(h.KeyValue(bA))[0],bu]);},by),bz==null?(this.count=this.count+1,by.push({K:bu,V:bv})):by[bz.$0]={K:bu,V:bv}):(this.count=this.count+1,this.data[bx]=new a.Array({K:bu,V:bv}));},ContainsKey:function(bu){var bv,bw;bv=this;bw=this.data[this.hash(bu)];return bw&&A.exists(function(bx){return bv.equals.apply(null,[(h.KeyValue(bx))[0],bu]);},bw);},get_Item:function(bu){return this.get(bu);},get:function(bu){var bv,bw;bv=this;bw=this.data[this.hash(bu)];return bw?A.pick(function(bx){var by;by=h.KeyValue(bx);return bv.equals.apply(null,[by[0],bu])?{$:1,$0:by[1]}:null;},bw):_7.notPresent();},GetEnumerator:function(){return F.Get0(this);},GetEnumerator0:function(){return F.Get0(A.concat(J.GetFieldValues(this.data)));}},i,_1);_1.New$5=bq.Ctor(function(){_1.New$6.call(this,[],y.Equals,y.Hash);},_1);_1.New$6=bq.Ctor(function(bu,bv,bw){var bx,by;this.equals=bv;this.hash=bw;this.count=0;this.data=[];bx=F.Get(bu);try{while(bx.MoveNext()){by=bx.Current();this.set(by.K,by.V);}}finally{if("Dispose"in bx)bx.Dispose();}},_1);_2=_0.HashSet=bq.Class({Contains:function(bu){var bv;bv=this.data[this.hash(bu)];return bv==null?false:this.arrContains(bu,bv);},Add:function(bu){return this.add(bu);},add:function(bu){var bv,bw;bv=this.hash(bu);bw=this.data[bv];return bw==null?(this.data[bv]=[bu],this.count=this.count+1,true):this.arrContains(bu,bw)?false:(bw.push(bu),this.count=this.count+1,true);},IntersectWith:function(bu){var bv,bw,bx,by,bz;bv=new _2.New$4(bu,this.equals,this.hash);bw=bj.concat(this.data);for(bx=0,by=bw.length-1;bx<=by;bx++){bz=bw[bx];!bv.Contains(bz)?this.Remove(bz):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bu){var bv,bw,bx,by;bv=0;bw=bj.concat(this.data);for(bx=0,by=bw.length-1;bx<=by;bx++)A.set(bu,bx,bw[bx]);},ExceptWith:function(bu){var bv;bv=F.Get(bu);try{while(bv.MoveNext())this.Remove(bv.Current());}finally{if("Dispose"in bv)bv.Dispose();}},arrContains:function(bu,bv){var bw,bx,by,bz;bw=true;bx=0;bz=bv.length;while(bw&&bx<bz)if(this.equals.apply(null,[bv[bx],bu]))bw=false;else bx=bx+1;return!bw;},Remove:function(bu){var bv;bv=this.data[this.hash(bu)];return bv==null?false:this.arrRemove(bu,bv)&&(this.count=this.count-1,true);},arrRemove:function(bu,bv){var bw,bx,by,bz;bw=true;bx=0;bz=bv.length;while(bw&&bx<bz)if(this.equals.apply(null,[bv[bx],bu])){bv.splice.apply(bv,[bx,1]);bw=false;}else bx=bx+1;return!bw;},GetEnumerator:function(){return F.Get(bj.concat(this.data));},GetEnumerator0:function(){return F.Get(bj.concat(this.data));}},i,_2);_2.New$3=bq.Ctor(function(){_2.New$4.call(this,[],y.Equals,y.Hash);},_2);_2.New$2=bq.Ctor(function(bu){_2.New$4.call(this,bu,y.Equals,y.Hash);},_2);_2.New$4=bq.Ctor(function(bu,bv,bw){var bx;this.equals=bv;this.hash=bw;this.data=[];this.count=0;bx=F.Get(bu);try{while(bx.MoveNext())this.add(bx.Current());}finally{if("Dispose"in bx)bx.Dispose();}},_2);_3.Delay=function(bu){return function(bv){try{(bu(null))(bv);}catch(bw){bv.k({$:1,$0:bw});}};};_3.Bind=function(bu,bv){return _3.checkCancel(function(bw){bu(_8.New(function(bx){var by;if(bx.$==0){by=bx.$0;_3.scheduler().Fork(function(){try{(bv(by))(bw);}catch(bz){bw.k({$:1,$0:bz});}});}else _3.scheduler().Fork(function(){bw.k(bx);});},bw.ct));});};_3.Zero=function(){_9.$cctor();return _9.Zero;};_3.Start=function(bu,bv){var bw,bx;bw=(bx=(_3.defCTS())[0],bv==null?bx:bv.$0);_3.scheduler().Fork(function(){if(!bw.c)bu(_8.New(function(by){if(by.$==1)_3.UncaughtAsyncError(by.$0);},bw));});};_3.Return=function(bu){return function(bv){bv.k({$:0,$0:bu});};};_3.checkCancel=function(bu){return function(bv){if(bv.ct.c)_3.cancel(bv);else bu(bv);};};_3.defCTS=function(){_9.$cctor();return _9.defCTS;};_3.UncaughtAsyncError=function(bu){bs.log("WebSharper: Uncaught asynchronous exception",bu);};_3.FromContinuations=function(bu){return function(bv){var bw;function bx(by){if(bw[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bw[0]=true;_3.scheduler().Fork(by);}}bw=[false];bu(function(by){bx(function(){bv.k({$:0,$0:by});});},function(by){bx(function(){bv.k({$:1,$0:by});});},function(by){bx(function(){bv.k({$:2,$0:by});});});};};_3.cancel=function(bu){bu.k({$:2,$0:new bi.New(bu.ct)});};_3.scheduler=function(){_9.$cctor();return _9.scheduler;};_4.UseAnimations=function(){$.$cctor();return $.UseAnimations;};_4.Actions=function(bu){return _4.ConcatActions(A.choose(function(bv){return bv.$==1?{$:1,$0:bv.$0}:null;},_5.ToArray(bu.$0)));};_4.Finalize=function(bu){A.iter(function(bv){if(bv.$==0)bv.$0();},_5.ToArray(bu.$0));};_4.List=function(bu){return bu.$0;};_4.ConcatActions=function(bu){var bv,bw,bx,by;bv=C.ofSeqNonCopying(bu);bw=A.length(bv);return bw===0?_4.Const():bw===1?A.get(bv,0):(bx=u.max(u.map(function(bz){return bz.Duration;},bv)),(by=A.map(function(bz){return _4.Prolong(bx,bz);},bv),_4.Def(bx,function(bz){A.iter(function(bA){bA.Compute(bz);},by);})));};_4.Const=function(bu){return _4.Def(0,function(){return bu;});};_4.Prolong=function(bu,bv){var bw,bx,by;bw=bv.Compute;bx=bv.Duration;by=bl.Create(function(){return bv.Compute(bv.Duration);});return{Compute:function(bz){return bz>=bx?by.f():bw(bz);},Duration:bu};};_4.Def=function(bu,bv){return{Compute:bv,Duration:bu};};_5.Append=function(bu,bv){return bu.$==0?bv:bv.$==0?bu:{$:2,$0:bu,$1:bv};};_5.Concat=function(bu){var bv;bv=C.ofSeqNonCopying(bu);return C.TreeReduce(_5.Empty(),_5.Append,bv);};_5.ToArray=function(bu){var bv;function bw(bx){if(bx.$==1)bv.push(bx.$0);else if(bx.$==2){bw(bx.$0);bw(bx.$1);}else if(bx.$==3)A.iter(function(by){bv.push(by);},bx.$0);}bv=[];bw(bu);return bv.slice(0);};_5.Empty=function(){bk.$cctor();return bk.Empty;};_6.BatchUpdatesEnabled=function(){Z.$cctor();return Z.BatchUpdatesEnabled;};_7.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};_8.New=function(bu,bv){return{k:bu,ct:bv};};_9.$cctor=function(){_9.$cctor=a.ignore;_9.noneCT=_.New(false,[]);_9.scheduler=new be.New();_9.defCTS=[new bf.New()];_9.Zero=_3.Return();_9.GetCT=function(bu){bu.k({$:0,$0:bu.ct});};};_.New=function(bu,bv){return{c:bu,r:bv};};$.$cctor=function(){$.$cctor=a.ignore;$.CubicInOut=bg.Custom(function(bu){var bv;bv=bu*bu;return 3*bv-2*(bv*bu);});$.UseAnimations=true;};ba.Filter=function(bu,bv){return new _2.New$2(A.filter(bu,ba.ToArray(bv)));};ba.Intersect=function(bu,bv){var bw;bw=new _2.New$2(ba.ToArray(bu));bw.IntersectWith(ba.ToArray(bv));return bw;};ba.ToArray=function(bu){var bv;bv=A.create(bu.get_Count(),void 0);bu.CopyTo(bv);return bv;};ba.Except=function(bu,bv){var bw;bw=new _2.New$2(ba.ToArray(bv));bw.ExceptWith(ba.ToArray(bu));return bw;};bb=f.DynamicAttrNode=bq.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bu){return Y.get_Empty();},NGetEnterAnim:function(bu){return Y.get_Empty();},NGetExitAnim:function(bu){return Y.get_Empty();},NSync:function(bu){if(this.dirty){(this.push(bu))(this.value);this.dirty=false;}}},i,bb);bb.New=bq.Ctor(function(bu,bv){var bw;bw=this;this.push=bv;this.value=void 0;this.dirty=false;this.updates=x.Map(function(bx){bw.value=bx;bw.dirty=true;},bu);},bb);bc.string=function(bu,bv,bw){return bv==null?bw!=null&&bw.$==1?bu.slice(0,bw.$0+1):"":bw==null?bu.slice(bv.$0):bu.slice(bv.$0,bw.$0+1);};bd.concat=function(bu,bv){return A.ofSeq(bv).join(bu);};bd.StartsWith=function(bu,bv){return bu.substring(0,bv.length)==bv;};bd.SplitChars=function(bu,bv,bw){return bd.Split(bu,new a.RegExp("["+bd.RegexEscape(bv.join(""))+"]"),bw);};bd.RegexEscape=function(bu){return bu.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bd.Split=function(bu,bv,bw){return bw===1?A.filter(function(bx){return bx!=="";},bd.SplitWith(bu,bv)):bd.SplitWith(bu,bv);};bd.SplitWith=function(bu,bv){return bu.split(bv);};be=_3.Scheduler=bq.Class({Fork:function(bu){var bv;bv=this;this.robin.push(bu);this.idle?(this.idle=false,a.setTimeout(function(){bv.tick();},0)):void 0;},tick:function(){var bu,bv,bw;bv=this;bw=bt.now();bu=true;while(bu)if(this.robin.length===0){this.idle=true;bu=false;}else{(this.robin.shift())();bt.now()-bw>40?(a.setTimeout(function(){bv.tick();},0),bu=false):void 0;}}},i,be);be.New=bq.Ctor(function(){this.idle=true;this.robin=[];},be);bf=b.CancellationTokenSource=bq.Class({},i,bf);bf.New=bq.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},bf);bg=f.Easing=bq.Class({},i,bg);bg.Custom=function(bu){return new bg.New(bu);};bg.New=bq.Ctor(function(bu){this.transformTime=bu;},bg);bh.Clear=function(bu){bu.splice(0,A.length(bu));};bi=b.OperationCanceledException=bq.Class({},null,bi);bi.New=bq.Ctor(function(bu){bi.New$1.call(this,"The operation was canceled.",null,bu);},bi);bi.New$1=bq.Ctor(function(bu,bv,bw){this.message=bu;this.inner=bv;this.ct=bw;},bi);bj.concat=function(bu){var bv,bw;bv=[];for(var bx in bu)bv.push.apply(bv,bu[bx]);return bv;};bk.$cctor=function(){bk.$cctor=a.ignore;bk.Empty={$:0};};bl.Create=function(bu){return bo.New(false,bu,bl.forceLazy);};bl.forceLazy=function(){var bu;bu=this.v();this.c=true;this.v=bu;this.f=bl.cachedLazy;return bu;};bl.cachedLazy=function(){return this.v;};bm.DocChildren=function(bu){var bv;function bw(bx){if(bx!=null&&bx.$==2)bw(bx.$0.Current);else if(bx!=null&&bx.$==1)bv.push(bx.$0.El);else if(bx==null);else if(bx!=null&&bx.$==5)bv.push(bx.$0);else if(bx!=null&&bx.$==4)bv.push(bx.$0.Text);else if(bx!=null&&bx.$==6)A.iter(function(by){if(by.constructor===P)bw(by);else bv.push(by);},bx.$0.Els);else{bw(bx.$0);bw(bx.$1);}}bv=[];bw(bu.Children);return{$:0,$0:C.ofSeqNonCopying(bv)};};bm.Children=function(bu,bv){var bw,bx,by;if(bv!=null&&bv.$==1){by=[];bw=bv.$0[0].nextSibling;while(bw!==bv.$0[1]){by.push(bw);bw=bw.nextSibling;}return{$:0,$0:by};}else return{$:0,$0:A.init(bu.childNodes.length,(bx=bu.childNodes,function(bz){return bx[bz];}))};};bm.Except=function(bu,bv){var bw;bw=bu.$0;return{$:0,$0:A.filter(function(bx){return A.forall(function(by){return!(bx===by);},bw);},bv.$0)};};bm.Iter=function(bu,bv){A.iter(bu,bv.$0);};bo.New=function(bu,bv,bw){return{c:bu,v:bv,f:bw};};bq.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
