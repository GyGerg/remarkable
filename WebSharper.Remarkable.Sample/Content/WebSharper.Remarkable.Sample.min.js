function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Cctor:function(n){var t=!0;return function(){t&&(t=!1,n())}},Class:function(n,t,i){var e=t?new t:{},r=function(n){if(n)for(var t in n)this[t]=n[t]},u,f;for(u in n)e[u]=n[u];if(r.prototype=e,i)for(f in i)r[f]=i[f];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){window.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Remarkable=b.Remarkable||{};d=c.RenderingTest=c.RenderingTest||{};e=d.Client=d.Client||{};f=b.UI=b.UI||{};g=f.Next=f.Next||{};h=g.Var=g.Var||{};i=b.Operators=b.Operators||{};j=g.Html=g.Html||{};k=j.attr=j.attr||{};l=g.Snap=g.Snap||{};m=g.Abbrev=g.Abbrev||{};n=m.Fresh=m.Fresh||{};o=g.Doc=g.Doc||{};p=g.AttrProxy=g.AttrProxy||{};q=b.JavaScript=b.JavaScript||{};r=q.Pervasives=q.Pervasives||{};s=g.DomUtility=g.DomUtility||{};t=b.Seq=b.Seq||{};u=g.AttrModule=g.AttrModule||{};v=g.Attrs=g.Attrs||{};w=b.Unchecked=b.Unchecked||{};x=a.StartupCode$WebSharper_UI_Next$Abbrev=a.StartupCode$WebSharper_UI_Next$Abbrev||{};y=g.Client=g.Client||{};z=y.DocNode=y.DocNode||{};A=g.Array=g.Array||{};B=g.Elt=g.Elt||{};C=g.View=g.View||{};D=b.Enumerator=b.Enumerator||{};E=D.T=D.T||{};F=a.StartupCode$WebSharper_UI_Next$DomUtility=a.StartupCode$WebSharper_UI_Next$DomUtility||{};G=g.Docs=g.Docs||{};H=m.Mailbox=m.Mailbox||{};I=g.DocElemNode=g.DocElemNode||{};J=b.Arrays=b.Arrays||{};K=b.List=b.List||{};L=K.T=K.T||{};M=y.Docs=y.Docs||{};N=M.RunState=M.RunState||{};O=M.NodeSet=M.NodeSet||{};P=g.An=g.An||{};Q=m.Async=m.Async||{};R=y.Attrs=y.Attrs||{};S=R.Dyn=R.Dyn||{};T=a.StartupCode$WebSharper_UI_Next$Attr_Client=a.StartupCode$WebSharper_UI_Next$Attr_Client||{};U=b.Collections=b.Collections||{};V=U.HashSet=U.HashSet||{};W=b.Concurrency=b.Concurrency||{};X=g.Anims=g.Anims||{};Y=g.AppendList=g.AppendList||{};Z=a.StartupCode$WebSharper_UI_Next$Animation=a.StartupCode$WebSharper_UI_Next$Animation||{};_0=m.HashSet=m.HashSet||{};_1=g.DynamicAttrNode=g.DynamicAttrNode||{};_2=W.Scheduler=W.Scheduler||{};_3=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_4=g.Easing=g.Easing||{};_5=M.DomNodes=M.DomNodes||{};_6=b.OperationCanceledException=b.OperationCanceledException||{};_7=b.CancellationTokenSource=b.CancellationTokenSource||{};_8=U.HashSetUtil=U.HashSetUtil||{};_9=a.StartupCode$WebSharper_UI_Next$AppendList=a.StartupCode$WebSharper_UI_Next$AppendList||{};_=b.Lazy=b.Lazy||{};$=a.IntelliFactory;ba=$&&$.Runtime;e.Main=function(){var bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn;bb={};bb.html=false;bb.xhtmlOut=false;bb.breaks=false;bb.langPrefix="language-";bb.linkify=true;bb.linkTarget="";bb.typographer=false;bb.quotes="'\ufffd\ufffd\ufffd\ufffd'";bc=new a.Remarkable(bb);bd=h.Create$1("");be=(bf=[(bg=[o.TextNode("WebSharper.Remarkable extension sample page")],o.Element("h1",[],bg)),(bh=[o.TextNode("Type markdown text here:")],o.Element("p",[],bh)),(bi=[p.Create("class","input"),p.Create("rows","20")],o.InputArea(bi,bd)),o.Element("hr",[],[]),(bj=[o.TextNode("Result")],o.Element("h4",[],bj)),(bk=[p.Create("class","output")],(bl=[(bm=bd.v,o.BindView((bn=function(bo){return bc.render(bo);},function(bo){return o.TextNode(bn(bo));}),bm))],o.Element("div",bk,bl)))],o.Element("div",[],bf));o.RunById("body",be);};h.Create$1=function(bb){var bc;bc=null;bc=h.New(false,bb,l.CreateWithValue(bb),n.Int(),function(){return bc.s;});return bc;};h.Set=function(bb,bc){if(bb.o)(function(bd){return bd("WebSharper UI.Next: invalid attempt to change value of a Var after calling SetFinal");}(function(bd){a.console.log(bd);}));else{l.MarkObsolete(bb.s);bb.c=bc;bb.s=l.CreateWithValue(bc);}};i.FailWith=function(bb){throw a.Error(bb);};i.DefaultArg=function(bb,bc){return bb==null?bc:bb.$0;};i.Compare=function(bb,bc){return w.Compare(bb,bc);};k=j.attr=ba.Class({},null,k);h=g.Var=ba.Class({RUpdM:function(bb){var bc,bd;bc=bb(this.c);(bc!=null?bc.$==1:false)?(bd=bc.$0,h.Set(this,bd)):void 0;},RView:function(){return this.v;}},null,h);h.New=function(bb,bc,bd,be,bf){return new h({o:bb,c:bc,s:bd,i:be,v:bf});};l.CreateWithValue=function(bb){return l.Make({$:2,$0:bb,$1:[]});};l.Make=function(bb){return{s:bb};};l.CreateForever=function(bb){return l.Make({$:0,$0:bb});};l.Map=function(bb,bc){var bd,be,bf,bg;bd=bc.s;return bd.$==0?(be=bd.$0,l.CreateForever(bb(be))):(bf=l.Create(),(l.When(bc,(bg=function(bh){l.MarkDone(bf,bc,bh);},function(bh){return bg(bb(bh));}),l.Obs(bf)),bf));};l.When=function(bb,bc,bd){var be,bf,bg;be=bb.s;be.$==1?bd():be.$==2?(bf=be.$0,be.$1.push(bd),bc(bf)):be.$==3?(bg=be.$1,be.$0.push(bc),bg.push(bd)):bc(be.$0);};l.Map2Unit=function(bb,bc){var bd,be,bf,bg;function bh(){var bi,bj,bk,bl;if(!l.IsDone(bf)){bi=l.ValueAndForever(bb);bj=l.ValueAndForever(bc);(bi!=null?bi.$==1:false)?(bj!=null?bj.$==1:false)?(bk=bi.$0[1],bl=bj.$0[1],(bk?bl:false)?l.MarkForever(bf,null):l.MarkReady(bf,null)):void 0:void 0;}}bd=bb.s;be=bc.s;return bd.$==0?be.$==0?l.CreateForever():bc:be.$==0?bb:(bf=l.Create(),(bg=l.Obs(bf),(l.When(bb,bh,bg),l.When(bc,bh,bg),bf)));};l.IsForever=function(bb){return bb.s.$==0?true:false;};l.WhenObsolete=function(bb,bc){var bd;bd=bb.s;bd.$==1?bc():bd.$==2?bd.$1.push(bc):bd.$==3?bd.$1.push(bc):void 0;};l.Create=function(){return l.Make({$:3,$0:[],$1:[]});};l.MarkDone=function(bb,bc,bd){if(l.IsForever(bc))l.MarkForever(bb,bd);else l.MarkReady(bb,bd);};l.Obs=function(bb){return function(){l.MarkObsolete(bb);};};l.IsDone=function(bb){var bc;bc=bb.s;return bc.$==0?true:bc.$==2?true:false;};l.ValueAndForever=function(bb){var bc;bc=bb.s;return bc.$==0?{$:1,$0:[bc.$0,true]}:bc.$==2?{$:1,$0:[bc.$0,false]}:null;};l.MarkForever=function(bb,bc){var bd,be;bd=bb.s;bd.$==3?(be=bd.$0,bb.s={$:0,$0:bc},t.iter(function(bf){bf(bc);},be)):void 0;};l.MarkReady=function(bb,bc){var bd,be,bf;bd=bb.s;bd.$==3?(be=bd.$1,bf=bd.$0,bb.s={$:2,$0:bc,$1:be},t.iter(function(bg){bg(bc);},bf)):void 0;};l.Join=function(bb){var bc,bd;bc=l.Create();bd=l.Obs(bc);l.When(bb,function(be){var bf;bf=be();l.When(bf,function(bg){if(l.IsForever(bf)?l.IsForever(bb):false)l.MarkForever(bc,bg);else l.MarkReady(bc,bg);},bd);},bd);return bc;};l.MarkObsolete=function(bb){var bc,bd;bc=bb.s;(bc.$==1?true:bc.$==2?(bd=bc.$1,false):bc.$==3?(bd=bc.$1,false):true)?void 0:(bb.s={$:1},t.iter(function(be){be();},bd));};n.Int=function(){n.set_counter(n.counter()+1);return n.counter();};n.set_counter=function(bb){x.$cctor();x.counter=bb;};n.counter=function(){x.$cctor();return x.counter;};o=g.Doc=ba.Class({},null,o);o.Element=function(bb,bc,bd){var be,bf,bg;be=p.Concat(bc);bf=o.Concat(bd);bg=s.CreateElement(bb);return B.New(bg,be,bf);};o.InputArea=function(bb,bc){return o.InputInternal("textarea",function(){return t.append(bb,[u.Value(bc)]);});};o.RunById=function(bb,bc){var bd;bd=s.Doc().getElementById(bb);w.Equals(bd,null)?i.FailWith("invalid id: "+bb):o.Run(bd,bc);};o.Concat=function(bb){var bc,bd;bc=A.ofSeqNonCopying(bb);bd=o.Empty();return A.TreeReduce(bd,o.Append,bc);};o.TextNode=function(bb){var bc,bd;bc={$:5,$0:s.CreateText(bb)};bd=C.Const();return o.Mk(bc,bd);};o.InputInternal=function(bb,bc){var bd,be,bf;bd=s.CreateElement(bb);be=p.Concat(bc(bd));bf=o.Empty();return B.New(bd,be,bf);};o.BindView=function(bb,bc){return o.EmbedView(C.Map(bb,bc));};o.Run=function(bb,bc){var bd,be,bf,bg;bd=bc.docNode;G.LinkElement(bb,bd);be=G.CreateRunState(bb,bd);bf=H.StartProcessor(G.PerformAnimatedUpdate(be,bd));bg=bc.updates;C.Sink(bf,bg);};o.Empty=function(){var bb,bc;bb=z.EmptyDoc;bc=C.Const();return o.Mk(bb,bc);};o.Append=function(bb,bc){var bd,be,bf,bg;bd=(be=bb.updates,(bf=bc.updates,C.Map2Unit(be,bf)));bg={$:0,$0:bb.docNode,$1:bc.docNode};return o.Mk(bg,bd);};o.Mk=function(bb,bc){return new o.New(bb,bc);};o.EmbedView=function(bb){var bc,bd,be,bf;bc=G.CreateEmbedNode();bd={$:2,$0:bc};return function(bg){return o.Mk(bd,bg);}((be=function(){},function(bg){return C.Map(be,bg);}((bf=function(bg){G.UpdateEmbedNode(bc,bg.docNode);return bg.updates;},function(bg){return C.Bind(bf,bg);}(bb)))));};o.New=ba.Ctor(function(bb,bc){this.docNode=bb;this.updates=bc;},o);p=g.AttrProxy=ba.Class({},null,p);p.Create=function(bb,bc){return v.Static(function(bd){s.SetAttr(bd,bb,bc);});};p.Concat=function(bb){var bc,bd;bc=A.ofSeqNonCopying(bb);bd=v.EmptyAttr();return A.TreeReduce(bd,p.Append,bc);};p.Append=function(bb,bc){return v.AppendTree(bb,bc);};r.NewFromSeq=function(bb){var bc,bd,be;bc={};bd=D.Get(bb);try{while(bd.MoveNext()){be=bd.Current();bc[be[0]]=be[1];}}finally{if("Dispose"in bd)bd.Dispose();}return bc;};s.CreateElement=function(bb){return s.Doc().createElement(bb);};s.SetAttr=function(bb,bc,bd){bb.setAttribute(bc,bd);};s.Doc=function(){F.$cctor();return F.Doc;};s.CreateText=function(bb){return s.Doc().createTextNode(bb);};s.InsertAt=function(bb,bc,bd){var be,bf;!(bd.parentNode===bb?bc===(be=bd.nextSibling,w.Equals(be,null)?null:be):false)?bf=bb.insertBefore(bd,bc):void 0;};s.RemoveNode=function(bb,bc){var bd;if(bc.parentNode===bb){bd=bb.removeChild(bc);}};t.append=function(bb,bc){return{GetEnumerator:function(){var bd,be;bd=D.Get(bb);be=[true];return new E.New(bd,null,function(bf){var bg;return bf.s.MoveNext()?(bf.c=bf.s.Current(),true):(bg=bf.s,!w.Equals(bg,null)?bg.Dispose():void 0,bf.s=null,be[0]?(be[0]=false,bf.s=D.Get(bc),bf.s.MoveNext()?(bf.c=bf.s.Current(),true):(bf.s.Dispose(),bf.s=null,false)):false);},function(bf){var bg;bg=bf.s;!w.Equals(bg,null)?bg.Dispose():void 0;});}};};t.iter=function(bb,bc){var bd;bd=D.Get(bc);try{while(bd.MoveNext())bb(bd.Current());}finally{if("Dispose"in bd)bd.Dispose();}};t.map=function(bb,bc){return{GetEnumerator:function(){var bd;bd=D.Get(bc);return new E.New(null,null,function(be){return bd.MoveNext()?(be.c=bb(bd.Current()),true):false;},function(){bd.Dispose();});}};};t.max=function(bb){return t.reduce(function(bc,bd){return w.Compare(bc,bd)>=0?bc:bd;},bb);};t.reduce=function(bb,bc){var bd,be;bd=D.Get(bc);try{if(!bd.MoveNext())i.FailWith("The input sequence was empty");be=bd.Current();while(bd.MoveNext())be=bb(be,bd.Current());return be;}finally{if("Dispose"in bd)bd.Dispose();}};u.Value=function(bb){var bc,bd;return u.CustomValue(bb,a.id,(bc=a.id,(bd=function(be){return{$:1,$0:be};},function(be){return bd(bc(be));})));};u.CustomValue=function(bb,bc,bd){return u.CustomVar(bb,function(be,bf){be.value=bc(bf);},function(be){return bd(be.value);});};u.CustomVar=function(bb,bc,bd){var be,bf;be=function(bg){return bb.RUpdM(function(bh){var bi,bj,bk;bi=bd(bg);return((bi!=null?bi.$==1:false)?(bk=bi.$0,!w.Equals(bk,bh))?(bj=[bi,bi.$0],true):false:false)?bj[0]:null;});};bf=function(bg,bh){var bi,bj,bk;bi=bd(bg);return((bi!=null?bi.$==1:false)?(bk=bi.$0,w.Equals(bk,bh))?(bj=bi.$0,true):false:false)?null:bc(bg,bh);};return p.Concat([u.Handler("change",function(bg){return function(bh){return be(bg,bh);};}),u.Handler("input",function(bg){return function(bh){return be(bg,bh);};}),u.Handler("keypress",function(bg){return function(bh){return be(bg,bh);};}),u.DynamicCustom(function(bg){return function(bh){return bf(bg,bh);};},bb.RView())]);};u.Handler=function(bb,bc){return v.Static(function(bd){bd.addEventListener(bb,function(be){return(bc(bd))(be);},false);});};u.DynamicCustom=function(bb,bc){return v.Dynamic(bc,bb);};v.Static=function(bb){return new p({$:3,$0:bb});};v.EmptyAttr=function(){T.$cctor();return T.EmptyAttr;};v.AppendTree=function(bb,bc){return bb===null?bc:bc===null?bb:new p({$:2,$0:bb,$1:bc});};v.Updates=function(bb){var bc,bd;bc=bb.DynNodes;bd=C.Const();return A.MapTreeReduce(function(be){return be.NChanged();},bd,C.Map2Unit,bc);};v.Insert=function(bb,bc){var bd,be,bf;function bg(bh){var bi;if(!(bh===null))if(bh!=null?bh.$==1:false)bd.push(bh.$0);else if(bh!=null?bh.$==2:false){bi=bh.$1;bg(bh.$0);bg(bi);}else if(bh!=null?bh.$==3:false)bh.$0(bb);else if(bh!=null?bh.$==4:false)be.push(bh.$0);}bd=[];be=[];bg(bc);bf=bd.slice(0);return S.New(bb,v.Flags(bc),bf,be.length===0?null:{$:1,$0:function(bh){t.iter(function(bi){bi(bh);},be);}});};v.HasChangeAnim=function(bb){var bc;bc=4;return(bb.DynFlags&bc)===bc;};v.GetChangeAnim=function(bb){return v.GetAnim(bb,function(bc,bd){return bc.NGetChangeAnim(bd);});};v.HasEnterAnim=function(bb){var bc;bc=1;return(bb.DynFlags&bc)===bc;};v.GetEnterAnim=function(bb){return v.GetAnim(bb,function(bc,bd){return bc.NGetEnterAnim(bd);});};v.HasExitAnim=function(bb){var bc;bc=2;return(bb.DynFlags&bc)===bc;};v.GetExitAnim=function(bb){return v.GetAnim(bb,function(bc,bd){return bc.NGetExitAnim(bd);});};v.Flags=function(bb){return(bb!==null?bb.hasOwnProperty("flags"):false)?bb.flags:0;};v.Dynamic=function(bb,bc){return new p({$:1,$0:new _1.New(bb,bc)});};v.GetAnim=function(bb,bc){var bd;return P.Concat((bd=function(be){return bc(be,bb.DynElem);},function(be){return J.map(bd,be);}(bb.DynNodes)));};v.Sync=function(bb,bc){var bd;bd=function(be){be.NSync(bb);};(function(be){J.iter(bd,be);}(bc.DynNodes));};w.Equals=function(bb,bc){var bd,be,bf,bg;if(bb===bc)return true;else{bd=typeof bb;if(bd=="object"){if(((bb===null?true:bb===void 0)?true:bc===null)?true:bc===void 0)return false;else if("Equals"in bb)return bb.Equals(bc);else if(bb instanceof a.Array?bc instanceof a.Array:false)return w.arrayEquals(bb,bc);else if(bb instanceof a.Date?bc instanceof a.Date:false)return w.dateEquals(bb,bc);else{be=[true];for(var bh in bb)if(function(bi){be[0]=!bb.hasOwnProperty(bi)?true:bc.hasOwnProperty(bi)?w.Equals(bb[bi],bc[bi]):false;return!be[0];}(bh))break;if(be[0]){for(var bi in bc)if(function(bj){be[0]=!bc.hasOwnProperty(bj)?true:bb.hasOwnProperty(bj);return!be[0];}(bi))break;}return be[0];}}else return bd=="function"?"$Func"in bb?bb.$Func===bc.$Func?bb.$Target===bc.$Target:false:("$Invokes"in bb?"$Invokes"in bc:false)?w.arrayEquals(bb.$Invokes,bc.$Invokes):false:false;}};w.arrayEquals=function(bb,bc){var bd,be;if(J.length(bb)===J.length(bc)){bd=true;be=0;while(bd?be<J.length(bb):false){!w.Equals(J.get(bb,be),J.get(bc,be))?bd=false:void 0;be=be+1;}return bd;}else return false;};w.dateEquals=function(bb,bc){return bb.getTime()===bc.getTime();};w.Hash=function(bb){var bc;bc=typeof bb;return bc=="function"?0:bc=="boolean"?bb?1:0:bc=="number"?bb:bc=="string"?w.hashString(bb):bc=="object"?bb==null?0:bb instanceof a.Array?w.hashArray(bb):w.hashObject(bb):0;};w.hashString=function(bb){var bc,bd,be;if(bb===null)return 0;else{bc=5381;for(bd=0,be=bb.length-1;bd<=be;bd++)bc=w.hashMix(bc,bb.charCodeAt(bd)<<0);return bc;}};w.hashArray=function(bb){var bc,bd,be;bc=-34948909;for(bd=0,be=J.length(bb)-1;bd<=be;bd++)bc=w.hashMix(bc,w.Hash(J.get(bb,bd)));return bc;};w.hashObject=function(bb){var bc,bd,be;if("GetHashCode"in bb)return bb.GetHashCode();else{bc=w.hashMix;bd=[0];for(var bf in bb)if(function(bg){bd[0]=bc(bc(bd[0],w.hashString(bg)),w.Hash(bb[bg]));return false;}(bf))break;return bd[0];}};w.Compare=function(bb,bc){var bd,be,bf,bg,bh,bi;if(bb===bc)return 0;else{be=typeof bb;switch(be=="function"?1:be=="boolean"?2:be=="number"?2:be=="string"?2:be=="object"?3:0){case 0:return typeof bc=="undefined"?0:-1;break;case 1:return i.FailWith("Cannot compare function values.");break;case 2:return bb<bc?-1:1;break;case 3:if(bb===null)bf=-1;else if(bc===null)bf=1;else if("CompareTo"in bb)bf=bb.CompareTo(bc);else if("CompareTo0"in bb)bf=bb.CompareTo0(bc);else if(bb instanceof a.Array?bc instanceof a.Array:false)bf=w.compareArrays(bb,bc);else if(bb instanceof a.Date?bc instanceof a.Date:false)bf=w.compareDates(bb,bc);else{bg=[0];for(var bj in bb)if(function(bk){return!bb.hasOwnProperty(bk)?false:!bc.hasOwnProperty(bk)?(bg[0]=1,true):(bg[0]=w.Compare(bb[bk],bc[bk]),bg[0]!==0);}(bj))break;if(bg[0]===0){for(var bk in bc)if(function(bl){return!bc.hasOwnProperty(bl)?false:!bb.hasOwnProperty(bl)?(bg[0]=-1,true):false;}(bk))break;}bf=bg[0];}return bf;break;}}};w.hashMix=function(bb,bc){return(bb<<5)+bb+bc;};w.compareArrays=function(bb,bc){var bd,be;if(J.length(bb)<J.length(bc))return -1;else if(J.length(bb)>J.length(bc))return 1;else{bd=0;be=0;while(bd===0?be<J.length(bb):false){bd=w.Compare(J.get(bb,be),J.get(bc,be));be=be+1;}return bd;}};w.compareDates=function(bb,bc){return i.Compare(bb.getTime(),bc.getTime());};x.$cctor=ba.Cctor(function(){x.counter=0;x.$cctor=a.ignore;});z.EmptyDoc={$:3};A.ofSeqNonCopying=function(bb){var bc,bd,be;if(bb instanceof a.Array)return bb;else if(bb instanceof L)return J.ofList(bb);else if(bb===null)return[];else{bc=[];bd=D.Get(bb);try{while(bd.MoveNext()){be=bc.push(bd.Current());}return bc;}finally{if("Dispose"in bd)bd.Dispose();}}};A.TreeReduce=function(bb,bc,bd){var be;function bf(bg,bh){var bi,bj;return bh<=0?bb:(bh===1?(bg>=0?bg<be:false)?true:false:false)?J.get(bd,bg):(bj=bh/2>>0,bc(bf(bg,bj),bf(bg+bj,bh-bj)));}be=J.length(bd);return bf(0,be);};A.MapTreeReduce=function(bb,bc,bd,be){var bf;function bg(bh,bi){var bj,bk;return bi<=0?bc:(bi===1?(bh>=0?bh<bf:false)?true:false:false)?bb(J.get(be,bh)):(bk=bi/2>>0,bd(bg(bh,bk),bg(bh+bk,bi-bk)));}bf=J.length(be);return bg(0,bf);};B=g.Elt=ba.Class({},o,B);B.New=function(bb,bc,bd){var be,bf,bg,bh,bi;be=G.CreateElemNode(bb,bc,bd.docNode);bf=h.Create$1(bd.updates);bg=v.Updates(be.Attr);bh=(bi=bf.v,C.Bind(function(bj){return C.Map2Unit(bg,bj);},bi));return new B.New$1({$:1,$0:be},bh,bb,bf);};B.New$1=ba.Ctor(function(bb,bc,bd,be){o.New.call(this,bb,bc);this.docNode$1=bb;this.updates$1=bc;this.elt=bd;this.rvUpdates=be;},B);C.Const=function(bb){var bc;bc=l.CreateForever(bb);return function(){return bc;};};C.Map=function(bb,bc){return C.CreateLazy(function(){var bd;bd=bc();return l.Map(bb,bd);});};C.Sink=function(bb,bc){function bd(){var be;be=bc();l.When(be,bb,function(){Q.Schedule(bd);});}Q.Schedule(bd);};C.Map2Unit=function(bb,bc){return C.CreateLazy(function(){var bd,be;bd=bb();be=bc();return l.Map2Unit(bd,be);});};C.Bind=function(bb,bc){return C.Join(C.Map(bb,bc));};C.CreateLazy=function(bb){var bc;bc={c:null,o:bb};return function(){var bd;bd=bc.c;return bd===null?(bd=bc.o(),bc.c=bd,l.IsForever(bd)?bc.o=null:l.WhenObsolete(bd,function(){bc.c=null;}),bd):bd;};};C.Join=function(bb){return C.CreateLazy(function(){return l.Join(bb());});};D.Get=function(bb){return bb instanceof a.Array?D.ArrayEnumerator(bb):w.Equals(typeof bb,"string")?D.StringEnumerator(bb):bb.GetEnumerator();};D.ArrayEnumerator=function(bb){return new E.New(0,null,function(bc){var bd;bd=bc.s;return bd<J.length(bb)?(bc.c=J.get(bb,bd),bc.s=bd+1,true):false;},void 0);};D.StringEnumerator=function(bb){return new E.New(0,null,function(bc){var bd;bd=bc.s;return bd<bb.length?(bc.c=bb.charCodeAt(bd),bc.s=bd+1,true):false;},void 0);};E=D.T=ba.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},null,E);E.New=ba.Ctor(function(bb,bc,bd,be){this.s=bb;this.c=bc;this.n=bd;this.d=be;},E);F.$cctor=ba.Cctor(function(){F.Doc=a.document;F.$cctor=a.ignore;});G.LinkElement=function(bb,bc){var bd;bd=G.InsertDoc(bb,bc,null);};G.CreateRunState=function(bb,bc){return N.New(O.get_Empty(),G.CreateElemNode(bb,v.EmptyAttr(),bc));};G.PerformAnimatedUpdate=function(bb,bc){var bd;return P.get_UseAnimations()?W.Delay(function(){var be,bf,bg,bh,bi;be=O.FindAll(bc);bf=G.ComputeChangeAnim(bb,be);bg=G.ComputeEnterAnim(bb,be);bh=G.ComputeExitAnim(bb,be);bi=P.Play(P.Append(bf,bh));return W.Bind(bi,function(){G.SyncElemNode(bb.Top);return W.Bind(P.Play(bg),function(){bb.PreviousNodes=be;return W.Return(null);});});}):(bd=function(be){var bf;bf=a.requestAnimationFrame(function(){G.SyncElemNode(bb.Top);be();});},W.FromContinuations(function(be,bf,bg){return bd.apply(null,[be,bf,bg]);}));};G.CreateElemNode=function(bb,bc,bd){var be;G.LinkElement(bb,bd);be=v.Insert(bb,bc);return I.New(be,bd,null,bb,n.Int(),ba.GetOptional(be.OnAfterRender));};G.CreateEmbedNode=function(){return{Current:z.EmptyDoc,Dirty:false};};G.UpdateEmbedNode=function(bb,bc){bb.Current=bc;bb.Dirty=true;};G.InsertDoc=function(bb,bc,bd){var be,bf,bg,bh,bi,bj,bk;return bc.$==1?(be=bc.$0,G.InsertNode(bb,be.El,bd)):bc.$==2?(bf=bc.$0,(bf.Dirty=false,G.InsertDoc(bb,bf.Current,bd))):bc.$==3?bd:bc.$==4?(bg=bc.$0,G.InsertNode(bb,bg.Text,bd)):bc.$==5?(bh=bc.$0,G.InsertNode(bb,bh,bd)):bc.$==6?(bi=bc.$0,J.foldBack(function(bl,bm){return bl.constructor===a.Object?G.InsertDoc(bb,bl,bm):G.InsertNode(bb,bl,bm);},bi.Els,bd)):(bj=bc.$1,(bk=bc.$0,G.InsertDoc(bb,bk,G.InsertDoc(bb,bj,bd))));};G.ComputeChangeAnim=function(bb,bc){var bd,be,bf,bg,bh;bd=(be=function(bi){return v.HasChangeAnim(bi.Attr);},function(bi){return O.Filter(be,bi);});return P.Concat((bf=function(bi){return v.GetChangeAnim(bi.Attr);},function(bi){return J.map(bf,bi);}(O.ToArray((bg=bd(bb.PreviousNodes),(bh=bd(bc),O.Intersect(bg,bh)))))));};G.ComputeEnterAnim=function(bb,bc){var bd,be,bf,bg;return P.Concat((bd=function(bh){return v.GetEnterAnim(bh.Attr);},function(bh){return J.map(bd,bh);}(O.ToArray((be=(bf=function(bh){return v.HasEnterAnim(bh.Attr);},function(bh){return O.Filter(bf,bh);}(bc)),(bg=bb.PreviousNodes,O.Except(bg,be)))))));};G.ComputeExitAnim=function(bb,bc){var bd,be,bf;return P.Concat((bd=function(bg){return v.GetExitAnim(bg.Attr);},function(bg){return J.map(bd,bg);}(O.ToArray((be=(bf=function(bg){return v.HasExitAnim(bg.Attr);},function(bg){return O.Filter(bf,bg);}(bb.PreviousNodes)),O.Except(bc,be))))));};G.SyncElemNode=function(bb){G.SyncElement(bb);G.Sync(bb.Children);G.AfterRender(bb);};G.InsertNode=function(bb,bc,bd){s.InsertAt(bb,bd,bc);return bc;};G.SyncElement=function(bb){function bc(bd){function be(bf){var bg,bh,bi;return bf.$==0?(bg=bf.$1,be(bf.$0)?true:be(bg)):bf.$==2?(bh=bf.$0,bh.Dirty?true:be(bh.Current)):bf.$==6?(bi=bf.$0,bi.Dirty?true:J.exists(bc,bi.Holes)):false;}return be(bd.Children);}v.Sync(bb.El,bb.Attr);bc(bb)?G.DoSyncElement(bb):void 0;};G.Sync=function(bb){var bc,bd,be,bf,bg;if(bb.$==1)G.SyncElemNode(bb.$0);else if(bb.$==2){bc=bb.$0;G.Sync(bc.Current);}else if(bb.$==3);else if(bb.$==5);else if(bb.$==4){bd=bb.$0;bd.Dirty?(bd.Text.nodeValue=bd.Value,bd.Dirty=false):void 0;}else if(bb.$==6){be=bb.$0;J.iter(function(bh){G.SyncElemNode(bh);},be.Holes);J.iter(function(bh){var bi,bj;bi=bh[0];bj=bh[1];v.Sync(bi,bj);},be.Attrs);G.AfterRender(be);}else{bf=bb.$1;bg=bb.$0;G.Sync(bg);G.Sync(bf);}};G.AfterRender=function(bb){var bc,bd;bc=ba.GetOptional(bb.Render);(bc!=null?bc.$==1:false)?(bd=bc.$0,bd(bb.El),ba.SetOptional(bb,"Render",null)):void 0;};G.DoSyncElement=function(bb){var bc,bd,be,bf,bg,bh,bi,bj,bk,bl;function bm(bn,bo){var bp,bq;return bn.$==1?bn.$0.El:bn.$==2?(bp=bn.$0,bp.Dirty?(bp.Dirty=false,G.InsertDoc(bc,bp.Current,bo)):bm(bp.Current,bo)):bn.$==3?bo:bn.$==4?bn.$0.Text:bn.$==5?bn.$0:bn.$==6?(bq=bn.$0,(bq.Dirty?bq.Dirty=false:void 0,J.foldBack(function(br,bs){return br.constructor===a.Object?bm(br,bs):br;},bq.Els,bo))):bm(bn.$0,bm(bn.$1,bo));}bc=bb.El;bd=_5.DocChildren(bb);be=(bf=(bg=bb.El,(bh=ba.GetOptional(bb.Delimiters),_5.Children(bg,bh))),_5.Except(bd,bf));bi=(bj=bb.El,function(bn){s.RemoveNode(bj,bn);});_5.Iter(bi,be);bl=bm(bb.Children,(bk=ba.GetOptional(bb.Delimiters),(bk!=null?bk.$==1:false)?bk.$0[1]:null));};H.StartProcessor=function(bb){var bc;function bd(){return W.Delay(function(){return W.Bind(bb,function(){var be,bf;be=bc[0];return w.Equals(be,1)?(bc[0]=0,W.Return(null)):w.Equals(be,2)?(bc[0]=1,bf=bd(),W.Bind(bf,function(){return W.Return(null);})):W.Return(null);});});}bc=[0];return function(){var be,bf;be=bc[0];w.Equals(be,0)?(bc[0]=1,bf=bd(),W.Start(bf,null)):w.Equals(be,1)?bc[0]=2:void 0;};};I=g.DocElemNode=ba.Class({Equals:function(bb){return this.ElKey===bb.ElKey;},GetHashCode:function(){return this.ElKey;}},null,I);I.New=function(bb,bc,bd,be,bf,bg){var bh;return new I((bh={Attr:bb,Children:bc,El:be,ElKey:bf},(ba.SetOptional(bh,"Delimiters",bd),ba.SetOptional(bh,"Render",bg),bh)));};J.get=function(bb,bc){J.checkBounds(bb,bc);return bb[bc];};J.length=function(bb){return bb.dims===2?bb.length*bb.length:bb.length;};J.checkBounds=function(bb,bc){if(bc<0?true:bc>=bb.length)i.FailWith("Index was outside the bounds of the array.");};J.set=function(bb,bc,bd){J.checkBounds(bb,bc);bb[bc]=bd;};L=K.T=ba.Class({GetEnumerator:function(){return new E.New(this,null,function(bb){var bc,bd;bc=bb.s;return bc.$==0?false:(bd=bc.$1,(bb.c=bc.$0,bb.s=bd,true));},void 0);}},null,L);J.ofList=function(bb){var bc,bd;bd=[];bc=bb;while(!(bc.$==0)){bd.push(K.head(bc));bc=K.tail(bc);}return bd;};J.foldBack=function(bb,bc,bd){var be,bf,bg,bh,bi;be=bd;bg=bc.length;for(bh=1,bi=bg;bh<=bi;bh++)be=bb(bc[bg-bh],be);return be;};J.iter=function(bb,bc){var bd,be;for(bd=0,be=bc.length-1;bd<=be;bd++)bb(bc[bd]);};J.map=function(bb,bc){var bd,be,bf,bg;be=(bd=bc.length,new a.Array(bd));for(bf=0,bg=bc.length-1;bf<=bg;bf++)be[bf]=bb(bc[bf]);return be;};J.choose=function(bb,bc){var bd,be,bf,bg;bd=[];for(be=0,bf=bc.length-1;be<=bf;be++){bg=bb(bc[be]);bg==null?void 0:bd.push(bg.$0);}return bd;};J.exists=function(bb,bc){var bd,be,bf,bg;bd=false;be=0;bg=J.length(bc);while(!bd?be<bg:false)if(bb(bc[be]))bd=true;else be=be+1;return bd;};J.filter=function(bb,bc){var bd,be,bf;bd=[];for(be=0,bf=bc.length-1;be<=bf;be++)if(bb(bc[be]))bd.push(bc[be]);return bd;};J.create=function(bb,bc){var bd,be,bf;bd=new a.Array(bb);for(be=0,bf=bb-1;be<=bf;be++)bd[be]=bc;return bd;};J.init=function(bb,bc){var bd,be,bf;bb<0?i.FailWith("Negative size given."):null;bd=new a.Array(bb);for(be=0,bf=bb-1;be<=bf;be++)bd[be]=bc(be);return bd;};J.forall=function(bb,bc){var bd,be,bf,bg;bd=true;be=0;bg=J.length(bc);while(bd?be<bg:false)if(bb(bc[be]))be=be+1;else bd=false;return bd;};N.New=function(bb,bc){return{PreviousNodes:bb,Top:bc};};O.get_Empty=function(){return{$:0,$0:new V.New$3()};};O.FindAll=function(bb){var bc;function bd(bf){var bg,bh,bi;if(bf.$==0){bg=bf.$1;bd(bf.$0);bd(bg);}else if(bf.$==1)be(bf.$0);else if(bf.$==2)bd(bf.$0.Current);else if(bf.$==6){bh=bf.$0;bi=bh.Holes;J.iter(be,bi);}}function be(bf){bc.push(bf);bd(bf.Children);}bc=[];bd(bb);return{$:0,$0:new V.New$2(bc)};};O.Filter=function(bb,bc){var bd;bd=bc.$0;return{$:0,$0:_0.Filter(bb,bd)};};O.Intersect=function(bb,bc){var bd,be;bd=bb.$0;be=bc.$0;return{$:0,$0:_0.Intersect(bd,be)};};O.ToArray=function(bb){return _0.ToArray(bb.$0);};O.Except=function(bb,bc){var bd,be;bd=bb.$0;be=bc.$0;return{$:0,$0:_0.Except(bd,be)};};P.get_UseAnimations=function(){return X.UseAnimations();};P.Play=function(bb){return W.Delay(function(){var bc,bd;bc=(bd=function(){},function(be){return P.Run(bd,be);}(X.Actions(bb)));return W.Bind(bc,function(){X.Finalize(bb);return W.Return(null);});});};P.Append=function(bb,bc){var bd,be;bd=bb.$0;be=bc.$0;return{$:0,$0:Y.Append(bd,be)};};P.Concat=function(bb){return{$:0,$0:Y.Concat(t.map(X.List,bb))};};P.Run=function(bb,bc){var bd,be;bd=bc.Duration;be=function(bf){var bg;function bh(bi,bj){var bk,bl;bk=bj-bi;bc.Compute(bk);bb();return bk<=bd?(bl=a.requestAnimationFrame(function(bm){bh(bi,bm);}),void 0):bf();}bg=a.requestAnimationFrame(function(bi){bh(bi,bi);});};return W.FromContinuations(function(bf,bg,bh){return be.apply(null,[bf,bg,bh]);});};P.get_Empty=function(){return{$:0,$0:Y.Empty()};};Q.Schedule=function(bb){W.Start(W.Delay(function(){bb();return W.Return(null);}),null);};S.New=function(bb,bc,bd,be){var bf;bf={DynElem:bb,DynFlags:bc,DynNodes:bd};ba.SetOptional(bf,"OnAfterRender",be);return bf;};K.head=function(bb){return bb.$==1?bb.$0:K.listEmpty();};K.tail=function(bb){return bb.$==1?bb.$1:K.listEmpty();};K.listEmpty=function(){return i.FailWith("The input list was empty.");};T.$cctor=ba.Cctor(function(){T.EmptyAttr=null;T.$cctor=a.ignore;});V=U.HashSet=ba.Class({add:function(bb){var bc,bd,be;bc=this.hash(bb);bd=this.data[bc];return bd==null?(this.data[bc]=[bb],this.count=this.count+1,true):this.arrContains(bb,bd)?false:(be=bd.push(bb),this.count=this.count+1,true);},IntersectWith:function(bb){var bc,bd,be,bf,bg,bh;bc=new V.New$4(bb,this.equals,this.hash);bd=_8.concat(this.data);for(be=0,bf=bd.length-1;be<=bf;be++){bg=bd[be];!bc.Contains(bg)?bh=this.Remove(bg):void 0;}},get_Count:function(){return this.count;},CopyTo:function(bb){var bc,bd,be,bf;bc=0;bd=_8.concat(this.data);for(be=0,bf=bd.length-1;be<=bf;be++)J.set(bb,be,bd[be]);},ExceptWith:function(bb){var bc,bd;bc=D.Get(bb);try{while(bc.MoveNext()){bd=this.Remove(bc.Current());}}finally{if("Dispose"in bc)bc.Dispose();}},arrContains:function(bb,bc){var bd,be,bf,bg;bd=true;be=0;bg=bc.length;while(bd?be<bg:false)if(this.equals.apply(null,[bc[be],bb]))bd=false;else be=be+1;return!bd;},Contains:function(bb){var bc;bc=this.data[this.hash(bb)];return bc==null?false:this.arrContains(bb,bc);},Remove:function(bb){var bc;bc=this.data[this.hash(bb)];return bc==null?false:this.arrRemove(bb,bc)?(this.count=this.count-1,true):false;},arrRemove:function(bb,bc){var bd,be,bf,bg,bh;bd=true;be=0;bg=bc.length;while(bd?be<bg:false)if(this.equals.apply(null,[bc[be],bb])){bh=bc.splice.apply(bc,[be,1].concat([]));bd=false;}else be=be+1;return!bd;},GetEnumerator:function(){return D.Get(_8.concat(this.data));}},null,V);V.New$3=ba.Ctor(function(){V.New$4.call(this,[],w.Equals,w.Hash);},V);V.New$2=ba.Ctor(function(bb){V.New$4.call(this,bb,w.Equals,w.Hash);},V);V.New$4=ba.Ctor(function(bb,bc,bd){var be,bf;this.equals=bc;this.hash=bd;this.data=a.Array.prototype.constructor.apply(a.Array,[]);this.count=0;be=D.Get(bb);try{while(be.MoveNext()){bf=this.add(be.Current());}}finally{if("Dispose"in be)be.Dispose();}},V);W.Delay=function(bb){return function(bc){try{(bb(null))(bc);}catch(bd){bc.k({$:1,$0:bd});}};};W.Bind=function(bb,bc){return W.checkCancel(function(bd){bb({k:function(be){var bf;if(be.$==0){bf=be.$0;W.scheduler().Fork(function(){try{(bc(bf))(bd);}catch(bg){bd.k({$:1,$0:bg});}});}else W.scheduler().Fork(function(){bd.k(be);});},ct:bd.ct});});};W.Return=function(bb){return function(bc){bc.k({$:0,$0:bb});};};W.Start=function(bb,bc){var bd;bd=i.DefaultArg(bc,(W.defCTS())[0]);W.scheduler().Fork(function(){if(!bd.c)bb({k:function(be){if(be.$==1)W.UncaughtAsyncError(be.$0);},ct:bd});});};W.FromContinuations=function(bb){return function(bc){var bd,be;bd=[false];be=function(bf){if(bd[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bd[0]=true;W.scheduler().Fork(bf);}};bb(function(bf){be(function(){bc.k({$:0,$0:bf});});},function(bf){be(function(){bc.k({$:1,$0:bf});});},function(bf){be(function(){bc.k({$:2,$0:bf});});});};};W.checkCancel=function(bb){return function(bc){if(bc.ct.c)W.cancel(bc);else bb(bc);};};W.defCTS=function(){_3.$cctor();return _3.defCTS;};W.UncaughtAsyncError=function(bb){a.console.log.apply(a.console,["WebSharper: Uncaught asynchronous exception"].concat([bb]));};W.cancel=function(bb){bb.k({$:2,$0:new _6.New(bb.ct)});};W.scheduler=function(){_3.$cctor();return _3.scheduler;};X.UseAnimations=function(){Z.$cctor();return Z.UseAnimations;};X.Actions=function(bb){var bc,bd;bc=bb.$0;return X.ConcatActions((bd=function(be){return be.$==1?{$:1,$0:be.$0}:null;},function(be){return J.choose(bd,be);}(Y.ToArray(bc))));};X.Finalize=function(bb){var bc,bd;bc=bb.$0;bd=function(be){if(be.$==0)be.$0();};(function(be){J.iter(bd,be);}(Y.ToArray(bc)));};X.List=function(bb){return bb.$0;};X.ConcatActions=function(bb){var bc,bd,be,bf,bg;bc=A.ofSeqNonCopying(bb);bd=J.length(bc);return bd===0?X.Const():bd===1?J.get(bc,0):(be=t.max((bf=function(bh){return bh.Duration;},function(bh){return t.map(bf,bh);}(bc))),(bg=J.map(function(bh){return X.Prolong(be,bh);},bc),X.Def(be,function(bh){J.iter(function(bi){bi.Compute(bh);},bg);})));};X.Const=function(bb){return X.Def(0,function(){return bb;});};X.Prolong=function(bb,bc){var bd,be,bf;bd=bc.Compute;be=bc.Duration;bf=_.Create(function(){return bc.Compute(bc.Duration);});return{Compute:function(bg){return bg>=be?bf.f():bd(bg);},Duration:bb};};X.Def=function(bb,bc){return{Compute:bc,Duration:bb};};Y.Append=function(bb,bc){return bb.$==0?bc:bc.$==0?bb:{$:2,$0:bb,$1:bc};};Y.Concat=function(bb){var bc,bd;bc=A.ofSeqNonCopying(bb);bd=Y.Empty();return A.TreeReduce(bd,Y.Append,bc);};Y.ToArray=function(bb){var bc;function bd(be){var bf,bg;if(be.$==1)bc.push(be.$0);else if(be.$==2){bf=be.$1;bd(be.$0);bd(bf);}else if(be.$==3){bg=be.$0;J.iter(function(bh){bc.push(bh);},bg);}}bc=[];bd(bb);return bc.slice(0);};Y.Empty=function(){_9.$cctor();return _9.Empty;};Z.$cctor=ba.Cctor(function(){Z.CubicInOut=_4.Custom(function(bb){var bc;bc=bb*bb;return 3*bc-2*(bc*bb);});Z.UseAnimations=true;Z.$cctor=a.ignore;});_0.Filter=function(bb,bc){var bd;return new V.New$2((bd=_0.ToArray(bc),J.filter(bb,bd)));};_0.Intersect=function(bb,bc){var bd;bd=new V.New$2(_0.ToArray(bb));bd.IntersectWith(_0.ToArray(bc));return bd;};_0.ToArray=function(bb){var bc;bc=J.create(bb.get_Count(),void 0);bb.CopyTo(bc);return bc;};_0.Except=function(bb,bc){var bd;bd=new V.New$2(_0.ToArray(bc));bd.ExceptWith(_0.ToArray(bb));return bd;};_1=g.DynamicAttrNode=ba.Class({NChanged:function(){return this.updates;},NGetChangeAnim:function(bb){return P.get_Empty();},NGetEnterAnim:function(bb){return P.get_Empty();},NGetExitAnim:function(bb){return P.get_Empty();},NSync:function(bb){if(this.dirty){(this.push(bb))(this.value);this.dirty=false;}}},null,_1);_1.New=ba.Ctor(function(bb,bc){var bd,be;bd=this;this.push=bc;this.value=void 0;this.dirty=false;this.updates=(be=function(bf){bd.value=bf;bd.dirty=true;},function(bf){return C.Map(be,bf);}(bb));},_1);_2=W.Scheduler=ba.Class({Fork:function(bb){var bc,bd;bc=this;this.robin.push(bb);this.idle?(this.idle=false,bd=a.setTimeout(function(){bc.tick();},0)):void 0;},tick:function(){var bb,bc,bd,be,bf;bc=this;bd=a.Date.now();bb=true;while(bb){be=this.robin.length;be===0?(this.idle=true,bb=false):((this.robin.shift())(),a.Date.now()-bd>40?(bf=a.setTimeout(function(){bc.tick();},0),bb=false):void 0);}}},null,_2);_2.New=ba.Ctor(function(){this.idle=true;this.robin=[];},_2);_3.$cctor=ba.Cctor(function(){_3.noneCT={c:false,r:[]};_3.scheduler=new _2.New();_3.defCTS=[new _7.New()];_3.GetCT=function(bb){bb.k({$:0,$0:bb.ct});};_3.$cctor=a.ignore;});_4=g.Easing=ba.Class({},null,_4);_4.Custom=function(bb){return new _4.New(bb);};_4.New=ba.Ctor(function(bb){this.transformTime=bb;},_4);_5.DocChildren=function(bb){var bc;function bd(be){var bf,bg,bh;if(be.$==2)bd(be.$0.Current);else if(be.$==1)bc.push(be.$0.El);else if(be.$==3);else if(be.$==5)bc.push(be.$0);else if(be.$==4)bc.push(be.$0.Text);else if(be.$==6){bf=be.$0;bg=function(bi){if(bi.constructor===a.Object)bd(bi);else bc.push(bi);};(function(bi){J.iter(bg,bi);}(bf.Els));}else{bh=be.$1;bd(be.$0);bd(bh);}}bc=[];bd(bb.Children);return{$:0,$0:A.ofSeqNonCopying(bc)};};_5.Children=function(bb,bc){var bd,be,bf,bg,bh,bi;if(bc!=null?bc.$==1:false){bf=bc.$0[1];bg=bc.$0[0];bh=a.Array.prototype.constructor.apply(a.Array,[]);bd=bg.nextSibling;while(bd!==bf){bi=bh.push(bd);bd=bd.nextSibling;}return{$:0,$0:bh};}else return{$:0,$0:J.init(bb.childNodes.length,(be=bb.childNodes,function(bj){return be[bj];}))};};_5.Except=function(bb,bc){var bd,be,bf;bd=bb.$0;be=bc.$0;return{$:0,$0:(bf=function(bg){var bh;bh=function(bi){return!(bg===bi);};return function(bi){return J.forall(bh,bi);}(bd);},function(bg){return J.filter(bf,bg);}(be))};};_5.Iter=function(bb,bc){var bd;bd=bc.$0;J.iter(bb,bd);};_6=b.OperationCanceledException=ba.Class({},null,_6);_6.New=ba.Ctor(function(bb){_6.New$1.call(this,"The operation was canceled.",null,bb);},_6);_6.New$1=ba.Ctor(function(bb,bc,bd){this.message=bb;this.inner=bc;this.ct=bd;},_6);_7=b.CancellationTokenSource=ba.Class({},null,_7);_7.New=ba.Ctor(function(){this.c=false;this.pending=null;this.r=[];this.init=1;},_7);_8.concat=function(bb){var bc,bd;bc=[];for(var be in bb)bc.push.apply(bc,bb[be]);return bc;};_9.$cctor=ba.Cctor(function(){_9.Empty={$:0};_9.$cctor=a.ignore;});_.Create=function(bb){return{c:false,v:bb,f:_.forceLazy};};_.forceLazy=function(){var bb;bb=this.v();this.c=true;this.v=bb;this.f=_.cachedLazy;return bb;};_.cachedLazy=function(){return this.v;};e.Main();}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
